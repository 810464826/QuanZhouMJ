require=function e(t,o,s){function n(i,a){if(!o[i]){if(!t[i]){var c="function"==typeof require&&require;if(!a&&c)return c(i,!0);if(r)return r(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var d=o[i]={exports:{}};t[i][0].call(d.exports,function(e){var o=t[i][1][e];return n(o?o:e)},d,d.exports,e,t,o,s)}return o[i].exports}for(var r="function"==typeof require&&require,i=0;i<s.length;i++)n(s[i]);return n}({_node_hall_click:[function(e,t,o){"use strict";cc._RFpush(t,"0f267234jFPTb11CEt7yqqI","_node_hall_click"),cc.Class({"extends":cc.Component,onLoad:function(){window.pageLog.generateLogNode()},node_createBtnClick:function(){getGI("hall").loading("start"),window.audio.playEffect("waterClick");var e="createRoomAlert/alertContent/createBg/",t=cc.find(e+"borderMethod/methodToggleGroup/ju8",this.node).getComponent(cc.Toggle).isChecked?1:cc.find(e+"borderMethod/methodToggleGroup/ju16",this.node).getComponent(cc.Toggle).isChecked?2:cc.find(e+"borderMethod/methodToggleGroup/fen100",this.node).getComponent(cc.Toggle).isChecked?3:cc.find(e+"borderMethod/methodToggleGroup/fen200",this.node).getComponent(cc.Toggle).isChecked?4:0,o=cc.find(e+"borderScore/scoreToggleGroup/toggle2",this.node).getComponent(cc.Toggle).isChecked?1:cc.find(e+"borderScore/scoreToggleGroup/toggle4",this.node).getComponent(cc.Toggle).isChecked?2:cc.find(e+"borderScore/scoreToggleGroup/toggle8",this.node).getComponent(cc.Toggle).isChecked?3:0,s=cc.find(e+"borderFan/fanToggleGroup/toggleSingle",this.node).getComponent(cc.Toggle).isChecked?1:cc.find(e+"borderFan/fanToggleGroup/toggleDouble",this.node).getComponent(cc.Toggle).isChecked?2:0;console.log({message:{ju:t,opt:[o,s]},type:"create"}),clientUser?clientUser.send({message:{ju:t,opt:[o,s]},type:"create"}):(getGI("hall").loading("end"),getGI("hall").errorReminder("未连接到服务器!"))},node_recordAlertShow:function(e,t){window.audio.playEffect("waterClick"),t="show"===t,t&&getGI("hall").loading("start"),this._toggleAlert_("recordAlert",t),t&&(clientUser?clientUser.send({type:"record"}):(getGI("hall").loading("end"),getGI("hall").errorReminder("未连接到服务器!")))},node_settingAlert:function(e,t){window.audio.playEffect("waterClick"),t="show"===t,t&&getGI("hall").loading("start"),this._toggleAlert_("settingAlert",t),t&&getGI("hall").loading("end")},node_activityAlert:function(e,t){window.audio.playEffect("waterClick"),t="show"===t,t&&getGI("hall").loading("start"),this._toggleAlert_("activityAlert",t),t&&getGI("hall").loading("end")},node_buyDiamondAlert:function(e,t){window.audio.playEffect("waterClick"),t="show"===t,t&&getGI("hall").loading("start"),this._toggleAlert_("buyDiamondAlert",t),t&&getGI("hall").loading("end")},node_joinRoomAlert:function(e,t){window.audio.playEffect("waterClick"),t="show"===t,t&&getGI("hall").loading("start"),this._toggleAlert_("joinRoomAlert",t),t||getGI("hall").inputNumPanel.reset(),t&&getGI("hall").loading("end")},node_methodAlert:function(e,t){if(window.audio.playEffect("waterClick"),t="show"===t){this.methodLoaded||(this.methodLoaded=!0,getGI("hall").loading("start"));var o=cc.find("methodAlert/alertContent/methodBg/scrollView/view/content",this.node);this._initHelpText_(o)}this._toggleAlert_("methodAlert",t)},_initHelpText_:function(e){0===e.childrenCount&&cc.loader.loadRes("prefabs/helpItem",function(t,o){for(var s=1e3,n=void 0,r=window.helpText,i=Math.ceil(r.length/s),a=0;a<i;a++)n=cc.instantiate(o),n.name="helpItem"+a,n.parent=e,n.getComponent(cc.Label).string=r.substring(a*s,(a+1)*s)})},node_createRoomAlert:function(e,t){window.audio.playEffect("waterClick"),t="show"===t,t&&getGI("hall").loading("start"),this._toggleAlert_("createRoomAlert",t),t&&getGI("hall").loading("end")},_toggleAlert_:function(e,t){this.node.getChildByName(e).active=t}}),cc._RFpop()},{}],_node_login:[function(e,t,o){"use strict";cc._RFpush(t,"a0569NsHRJKJ4roHfDcnyn+","_node_login");var s=e("audioMng");cc.Class({"extends":cc.Component,properties:{audio_clip:cc.AudioClip},onLoad:function(){if(!audio){window.audio=new s({dir:"audio/"}),window.audio.stopBgMusic(),window.audio.playMusic("hallBg");var e=window.location.href.match(/state=(\d{6})/);e&&window.userInfo&&(window.userInfo.roomId=e[1]),TOOL.createSocket({type:"login",message:window.userInfo});window.addEventListener("online",function(){if(console.log("上线了"),console.log(socket),window.socket&&!window.socket.wsObj)if(clientUser){var e=clientUser.attr("openId");TOOL.createSocket({type:"reConnect",openId:e},"reLink")}else TOOL.createSocket({type:"login",message:window.userInfo},"reLink")}),window.addEventListener("offline",function(){console.log("下线了"),console.log(socket)})}}}),cc._RFpop()},{audioMng:"audioMng"}],_node_operatePanelEvent:[function(e,t,o){"use strict";cc._RFpush(t,"d62fckeyphAI5HPCeXk03v1","_node_operatePanelEvent");var s=cc.Class({"extends":cc.Component,node_operateClick:function(e){if(clientUser.attr("isCanOperateClick")){var t=e.target.name.slice(-1);console.log("operateClick--选择的是 "+t+" 个"),this.view=clientUser.mahjongMng.mahView;var o=this.view.panelAttr("showObj").showArr[t],s=this.view.showChoose(o),n=0,r=clientUser.attr("operateArr");if(null===s||1===s.length){if("guo"===o)return void this._process_({t:"guo"});e:for(var i=0;i<r.length+1;i++){var a=r[i].t;switch(a){case"mingGang":case"anGang":case"buGang":if("gang"===o){n=i;break e}break;default:if(o===a){n=i;break e}}}this._process_(r[n])}}},node_chooseClick:function(e){var t=e.target.name.slice(-1);console.log("choosClick--选择的是 "+t+" 个");var o=this.view.panelAttr("currentArr")[t];this._process_(clientUser.attr("operateArr")[o])},_process_:function(e){switch(this.view.panelAttr("currentArr",null),clientUser.attr("chooseIten",e),this.view.panelAttr("isShow","hide"),e.t){case"guo":clientUser.attr("isActive")?(this.view.outCardEventAttr("isCanOperate",!0),this.view.outCardEventAttr("isCanPlay",!0)):(clientUser.send({type:"guo"}),this.view.outCardEventAttr("isCanOperate",!0));break;case"chi":case"mingGang":case"pong":case"buGang":clientUser.send({type:e.t,message:TOOL.converOperate(e)}),this.view.outCardEventAttr("isCanOperate",!1);break;case"hu":case"ziMo":case"tianHu":case"sanJingDao":!e.t,clientUser.send({type:e.t,message:TOOL.converOperate(e)}),this.view.outCardEventAttr("isCanPlay",!1);break;case"youJing":case"shuangYou":case"sanYou":!e.t,clientUser.send({type:e.t,message:TOOL.converOperate(e)}),this.view.outCardEventAttr("isCanPlay",!1);break;case"anGang":clientUser.operateItem(e),this.view.outCardEventAttr("isCanOperate",!0),this.view.outCardEventAttr("isCanPlay",!1)}},onLoad:function(){}});t.exports=s,cc._RFpop()},{}],_node_room_click:[function(e,t,o){"use strict";cc._RFpush(t,"a2cf0tEFvtKcqLiJyEXxkLy","_node_room_click"),cc.Class({"extends":cc.Component,onLoad:function(){console.log("调整room的高度"),this.node.height=cc.winSize.height;var e=this;cc.view.setResizeCallback(function(){console.log("调整room的高度"),e.node.height=cc.winSize.height,console.log(cc.winSize)}),window.pageLog.generateLogNode()},_test_allResult_:function(){function t(){if(!o){var t=e("allResultAlert_display");o=new t}o.refreshMahResult(testData.test_allResultData),s.active=!0}var o=null,s=cc.find("Canvas/allResultAlert");"touches"in cc.sys.capabilities?cc.find("Canvas").on("touchend",t,this):"mouse"in cc.sys.capabilities&&cc.find("Canvas").on("mouseup",t,this)},_test_dice_:function(){function e(){cc.find("Canvas").getComponent(cc.Animation).play("diceRun")}"touches"in cc.sys.capabilities?cc.find("Canvas/roomMain/timer/border").on("touchend",e,this):"mouse"in cc.sys.capabilities&&cc.find("Canvas/roomMain/timer/border").on("mouseup",e,this)},_test_singleResult_:function(){function t(){if(!o){var t=e("singleResult_display");o=new t}o.refreshMahResult(testData.test_singleResultData),s.active=!0}var o=null,s=cc.find("Canvas/singleAlert");"touches"in cc.sys.capabilities?cc.find("Canvas").on("touchend",t,this):"mouse"in cc.sys.capabilities&&cc.find("Canvas").on("mouseup",t,this)},_test_mj_:function(){function t(){if(o>15)return void o++;if(o>7){var t=testData.test_cardsData[o%4].naPaiCards.shift();return o%4!==0&&(t=""),o>11&&(t=["o2","o3"]),r[o%4].inCardL(t),void o++}if(o>3){if("left"===s)r[o%4].displayHandL(testData.test_cardsData[o%4].handCards);else{var t=testData.test_cardsData[o%4].naPaiCards.shift();o%4!==0&&(t=""),r[o%4].inCardR(t)}return void o++}if(0===r.length){for(var l=e("handCardMng"),d=e("outCardMng"),h=e("mingCardMng"),u=null,m=0;m<4;m++)u=cc.find("user"+m,c),r.push(new l(u)),i.push(new h(u)),a.push(new d(u)),u.active=!1,r[r.length-1].convertHM(n);c.active=!0}"right"===s&&r[o].displayHandR(testData.test_cardsData[o].handCards),"left"===s&&r[o].displayHandL(testData.test_cardsData[o].handCards.length),i[o].displayAllMing(testData.test_cardsData[o].optMsgs),a[o].operateAllOutCard(testData.test_cardsData[o].outCards),cc.find("user"+o,c).active=!0,o++}var o=0,s="right",n="hand",r=[],i=[],a=[],c=cc.find("Canvas/playingLayer");"touches"in cc.sys.capabilities?cc.find("Canvas").on("touchend",t,this):"mouse"in cc.sys.capabilities&&cc.find("Canvas").on("mouseup",t,this)},exitClick:function(e){window.audio.playEffect("waterClick"),clientUser.send({type:"exitRoom"}),cc.director.loadScene("hall",function(){window.reset(),getGI("hall").display({nickName:clientUser.attr("nickName"),userId:clientUser.attr("userId"),headIcon:clientUser.attr("faceIcon"),isVip:clientUser.attr("isVip"),roomCardNum:clientUser.attr("roomCards")})})},inviteClick:function(e,t){window.audio.playEffect("waterClick"),room.displayRoomInfo({shareFriend:t})},node_settingAlert:function(e,t){window.audio.playEffect("waterClick"),t="show"===t,this.node.getChildByName("settingAlert").active=t},node_wixinClick:function(e,t){console.log("返回微信按钮的点击事件"),window.audio.playEffect("waterClick"),window.close()},node_speachClick:function(e,t){console.log("语音按钮的点击事件"),window.audio.playEffect("waterClick")},node_headClick:function(e,t){window.audio.playEffect("waterClick"),t="show"===t,cc.find("Canvas/userInfoAlert").active=t},node_messageClick:function(e,t){window.audio.playEffect("waterClick"),t="show"===t,cc.find("Canvas/msgAlert").active=t}}),cc._RFpop()},{allResultAlert_display:"allResultAlert_display",handCardMng:"handCardMng",mingCardMng:"mingCardMng",outCardMng:"outCardMng",singleResult_display:"singleResult_display"}],allResultAlert_click:[function(e,t,o){"use strict";cc._RFpush(t,"55887Wsfg5IT4njLZSgY3g2","allResultAlert_click"),cc.Class({"extends":cc.Component,node_goHallClick:function(e){room.resultAlert.allResultShow("hide"),window.audio.playEffect("waterClick"),console.log("点击了总结算页面的返回大厅按钮"),room.resetMah(),cc.director.loadScene("hall",function(){TOOL.backHall()})},node_shareResultClick:function(){room.resultAlert.allResultShow("hide"),window.audio.playEffect("waterClick"),console.log("点击了总结算页面的分享排行按钮"),room.displayRoomInfo({shareFriend:"show"})}}),cc._RFpop()},{}],allResultAlert_display:[function(e,t,o){"use strict";cc._RFpush(t,"29993COshdJAZlSOjvJZMlk","allResultAlert_display");var s=cc.Class({name:"ResultAlert",ctor:function(){this.allResult=cc.find("Canvas/allResultAlert"),this.allResultUserPref=getGI("roomGlobalRes").allResultUserPref,this.isShow=!1,this.allUserData=null,this.shareObj=[]},reset:function(){this.isShow=!1,this.shareObj.length=0},allResultShow:function(e){this.isShow="show"===e,this.allResult.active=this.isShow,this.isShow||TOOL.replaceShareUrl(room?room.roomId:"wx")},_setShareObj_:function(e,t){var o={};o.name=room.getUser(e).attr("nickName"),o.score=t,this.shareObj.push(o)},refreshMahResult:function(e){this.allUserData=e,this._addHuInfo_(e),this._convert_(),this._setOthers_(),this._setDetails_(),TOOL.replaceShareUrl(this.shareObj)},_convert_:function(){var e=[];this.allUserData.forEach(function(t){var o={};o.userId=t.userInfo.userId,o.nickName=t.userInfo.nickName,o.headIcon=t.userInfo.headIcon,o.zhuangNum=t.huInfo.zhuangCount,o.huPaiNum=t.huInfo.huCount,o.dianPaoNum=t.huInfo.paoCount,o.scores=t.roomScore,e.push(o)}),this.allUserData=e},_addHuInfo_:function(e){var t=void 0,o=void 0;e.forEach(function(e){t=e.huInfo,o=e.optMsgs,t.daoType="",t.huCard="",TOOL.converOperate(o);for(var s=0;s<o.length;s++)switch(o[s].t){case"hu":case"sanJingDao":case"ziMo":case"youJing":case"shuangYou":case"sanYou":case"tianHu":return t.daoType=o[s].t,void(t.huCard=o[s].c)}})},_setOthers_:function(){var e=cc.find("alertContent/allResultBg",this.allResult);e.getChildByName("roomId").getComponent(cc.Label).string="房间号："+room.roomId;var t=room.attr({diFeng:void 0,fanXin:void 0}),o="底:"+t.diFeng+" 番:"+t.fanXin;e.getChildByName("method").getComponent(cc.Label).string=o},_setDetails_:function(){for(var e,t,o=0,s=0,n=0;n<4;n++){e=this.allUserData[n],t=cc.find("alertContent/allResultBg/users/allResultUser"+n,this.allResult),t||(t=cc.instantiate(this.allResultUserPref),t.name="allResultUser"+n,t.parent=cc.find("alertContent/allResultBg/users",this.allResult)),TOOL.setUserHeadIcon(t.getChildByName("headIcon"),e.headIcon),t.getChildByName("nickName").getComponent(cc.Label).string=e.nickName,t.getChildByName("zhuang").getComponent(cc.Label).string="坐庄: "+e.zhuangNum,t.getChildByName("huPai").getComponent(cc.Label).string="胡牌: "+e.huPaiNum,t.getChildByName("dianPao").getComponent(cc.Label).string="点炮: "+e.dianPaoNum;var r=e.scores;o=o>r?r:o,s=s<r?r:s,this._setShareObj_(e.userId,r),t.getChildByName("jiFeng").getComponent(cc.Label).string="积分: "+(r>0?"+"+r:r)}this._showWinner_(o,s)},_showWinner_:function(e,t){var o=[],s=[];if(t!==e)for(var n=0;n<4;n++)this.allUserData[n].scores===e&&o.push(n),this.allUserData[n].scores===t&&s.push(n);for(var n=0;n<4;n++){var r=cc.find("alertContent/allResultBg/users/allResultUser"+n,this.allResult);o.indexOf(n)!==-1?(r.getChildByName("diaoPao").active=!0,r.getChildByName("winer").active=!1):s.indexOf(n)!==-1?(r.getChildByName("diaoPao").active=!1,r.getChildByName("winer").active=!0):(r.getChildByName("diaoPao").active=!1,r.getChildByName("winer").active=!1)}}});t.exports=s,cc._RFpop()},{}],animate_countDown:[function(e,t,o){"use strict";cc._RFpush(t,"2e4d5uFl15HeLP8LoglEAeG","animate_countDown");var s=cc.Class({name:"Animate_countDown",ctor:function(){arguments[0];this.compon=getGI("roomGlobalRes"),this.timeBackNode=cc.find("Canvas/roomMain/timer"),this.timeLabel=this.timeBackNode.getChildByName("time").getComponent(cc.Label),this.timeBackArr=[];for(var e=0;e<4;e++)this.timeBackArr.push(this.timeBackNode.getChildByName(""+e));this.callback=null,this.activeIndex=0,this.orginalTime=+this.timeLabel.string},reset:function(){console.log("animate_countDown.js重置了。"),this.stopTime(),this.activeIndex=0},timeShow:function(e){e="show"===e,this.timeBackNode.active=e},diceToggle:function(e){"show"===e?(this.timeBackNode.getChildByName("time").active=!1,this.timeBackNode.getChildByName("border").active=!0):(this.timeBackNode.getChildByName("time").active=!0,this.timeBackNode.getChildByName("border").active=!1)},displayPointer:function(e){this.totalTime=this.orginalTime,this.callback&&this.compon.unschedule(this.callback),this.activeIndex!==-1&&(this.timeBackArr[this.activeIndex].stopAction(this.blinkAct),this.timeBackArr[this.activeIndex].stopAction(this.audioAct),this.blinkAct=null,this.audioAct=null),this.activeIndex=e;for(var t=0;t<4;t++)e===t?this.timeBackArr[t].active=!0:this.timeBackArr[t].active=!1;this.timeLabel.string=this.totalTime,e!==-1&&(this.callback=this._timerCallback_.bind(this),this.compon.schedule(this.callback,1))},_timerCallback_:function(){this.totalTime--,this.totalTime<=-1?(window.audio.playEffect("naozhong"),this.compon.unschedule(this.callback),this.blinkAct=this.timeBackArr[this.activeIndex].runAction(cc.repeatForever(cc.blink(20,20))),this.audioAct=this.timeBackArr[this.activeIndex].runAction(cc.repeatForever(cc.sequence(cc.delayTime(10),cc.callFunc(function(){window.audio.playEffect("naozhong")})))),this.totalTime=0):this.timeLabel.string=this.totalTime<10?"0"+this.totalTime:this.totalTime},stopTime:function(){this.compon.unschedule(this.callback)}});t.exports=s,cc._RFpop()},{}],animate_head:[function(e,t,o){"use strict";cc._RFpush(t,"87a69REFXFAuLhHoiez1kJB","animate_head");var s=cc.Class({name:"Animate_head",ctor:function(){this.userPath="Canvas/roomMain/user",this.finishedFunc=null,this.originalP=[],this._recordOriginalP_()},recoverOriginalP:function(){console.log("执行了函数 recoverOriginalP");for(var e,t,o=0;o<4;o++){e=cc.find(this.userPath+o).getComponent(cc.Widget),t=this.originalP[o];for(var s in t)e[s]=t[s]}},reset:function(){console.log("animate_head.js重置了。"),this.recoverOriginalP();var e=cc.find("Canvas").getComponent(cc.Animation);e.off("finished",this.finishedFunc)},runHead:function(){console.log("执行了函数 runHead");var e=cc.find("Canvas").getComponent(cc.Animation);e.play("userHeadRun")},offFinish:function(){var e=cc.find("Canvas").getComponent(cc.Animation);e.off("finished",this.finishedFunc)},runHeadNoTime:function(e){this.finishedFunc=e;var t=cc.find("Canvas").getComponent(cc.Animation);e&&t.on("finished",e);var o=t.getAnimationState("userHeadRun").duration;setTimeout(function(){t.play("userHeadRun",o-.1)},400)},_recordOriginalP_:function(){for(var e,t=0;t<4;t++)switch(e=cc.find(this.userPath+t).getComponent(cc.Widget),t){case 0:this.originalP.push({left:e.left,bottom:e.bottom});break;case 1:case 2:this.originalP.push({left:e.left,top:e.top});break;case 3:this.originalP.push({right:e.right,top:e.top})}}});t.exports=s,cc._RFpop()},{}],animate_outCard:[function(e,t,o){"use strict";cc._RFpush(t,"ddf95O3SAtJ8oVhTBZOa0nX","animate_outCard");var s=cc.Class({name:"Animate_outCard",ctor:function(){var e=arguments[0];this.userSelf=e.userSelf,this.userNode=e.userSelf.attr("userNode"),this.cards_Atlas=e.userSelf.attr("cards_Atlas"),this.outCardPosition=null,this.nextNode=null,this.handCardHeight=cc.p(0,cc.find("hand/handmah_0",this.userNode).height/2),this.outCardBig=this.userNode.getChildByName("outCard"),this.outCardCoord=this.outCardBig.getPosition(),this.outCardScaleX=this.outCardBig.scaleX,this.outCardScaleY=this.outCardBig.scaleY,this.out1Node=this.userNode.getChildByName("out1"),this.scale=this.out1Node.getChildByName("mingmah_0").width/this.outCardBig.width},reset:function(){log.log4("animate_outCard.js重置了。"),this._outCardReset_()},outCardAni:function(e,t,o){this.nextNode=e,this.callback=o,this.outCardPosition=e.getPosition(),this._outCardReset_(),this.outCardBig.getComponent(cc.Sprite).spriteFrame=this.cards_Atlas.getSpriteFrame("mingmah_"+t),this.outCardBig.active=!0,this.outCardBig.runAction(cc.sequence(cc.delayTime(.8),cc.spawn(cc.moveTo(.4,this._calcChildToGrand_(this.nextNode.parent,this.outCardPosition)),cc.scaleTo(.4,this.out1Node.scaleX,this.out1Node.scaleX)),cc.callFunc(this._outCardAniFinish_,this)))},_calcChildToGrand_:function(e,t){return t.mul(e.scaleX).add(e.getPosition())},_outCardAniFinish_:function(){log.log1("出牌动画完成、、、、"),audio.play("give");var e="mingmah_"+this.userSelf.mahjongMng.mahView.getOutPointerIndex();this.nextNode.active=!0;var t=this;this.nextNode.name!==e&&setTimeout(function(){t.nextNode.active=!1,room.finishOutSkipAni()},200),this.outCardBig.active=!1;var o;o=-1!==this.userNode.name.search(/[013]/)?this.outCardPosition.add(this.handCardHeight.mul(.5)):this.outCardPosition.add(this.handCardHeight);var s=this._calcChildToGrand_(this.nextNode.parent,o),n=this._calcChildToGrand_(this.userNode,s),r=this._calcChildToGrand_(this.userNode.parent,n);this.callback&&this.callback(r)},_outCardReset_:function(){this.outCardBig.setPosition(this.outCardCoord),this.outCardBig.scaleX=this.outCardScaleX,this.outCardBig.scaleY=this.outCardScaleY}});t.exports=s,cc._RFpop()},{}],animate_skip:[function(e,t,o){"use strict";cc._RFpush(t,"8e350Zj4ylFw5S24nZy81rs","animate_skip");var s=cc.Class({name:"Animate_skip",ctor:function(){this.animState=null,this.jumpNode=cc.find("Canvas/playingLayer/jumpNode"),this.animation=this.jumpNode.getComponent(cc.Animation),this.animationName="outCardJump"},reset:function(){this.finishOutSkipAni(),this.animState=null},playOutSkipAni:function(e){e=e instanceof cc.Vec2?e:this._convertCoord_(e),this.animState&&this.animState.isPlaying?this.jumpNode.setPosition(e):(this.jumpNode.active=!0,this.jumpNode.setPosition(e),this.animState=this.animation.play(this.animationName))},_convertCoord_:function(e){var t=e.convertToWorldSpace(cc.v2(e.width/2,e.height/2+5));return this.jumpNode.parent.convertToNodeSpace(t)},finishOutSkipAni:function(){this.animation.stop(this.animationName),this.jumpNode.active=!1}});t.exports=s,cc._RFpop()},{}],audioMng:[function(e,t,o){"use strict";cc._RFpush(t,"7998eR+55dG67r76z5J9Y/Z","audioMng");var s=cc.Class({name:"AudioMng",ctor:function(){var e=arguments[0];this.dir=e.dir,this.refresh(),this.volumeEffectArr=[]},refresh:function(){this.extend=window.getGI("extension"),this.language="mingNan"===window.getGI("language")?"mn":"pt",this.effectVolume=window.getGI("effectVolume"),this.musicVolume=window.getGI("musicVolume")},refreshVolume:function(){this.effectVolume=window.getGI("effectVolume");var e=window.getGI("musicVolume");e!==this.musicVolume&&(this.musicVolume=e,e?room?this.playMusic("playingBg"):this.playMusic("hallBg"):this.stopBgMusic())},refreshLanguage:function(){this.language="mingNan"===window.getGI("language")?"mn":"pt"},playMusic:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.musicVolume){var s=this;cc.loader.loadRes(this.dir+"comm/"+e,function(n,r){s[e]=cc.audioEngine.play(r,t,o),s.volumeEffectArr.push(s[e])})}},playEffect:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.effectVolume){var s=this;cc.loader.loadRes(this.dir+"comm/"+e,function(n,r){s[e]=cc.audioEngine.play(r,t,o)})}},playMj:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.effectVolume){var s=this;console.log(this.dir+this.language+"/"+e),cc.loader.loadRes(this.dir+this.language+"/"+e,function(n,r){s[e]=cc.audioEngine.play(r,t,o)})}},chat:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.effectVolume){var s=this;cc.loader.loadRes(this.dir+"chat/"+e,function(n,r){s[e]=cc.audioEngine.play(r,t,o)})}},setDir:function(e){e&&(this.dir=e)},stop:function(e){void 0!==this[e]&&(cc.audioEngine.stop(this[e]),delete this[e])},setBgVolume:function(e){for(var t=this.volumeEffectArr,o=0;o<t.length;o++)cc.audioEngine.setVolume(t[o],e)},stopBgMusic:function(){for(var e=this.volumeEffectArr,t=0;t<e.length;t++)cc.audioEngine.stop(e[t]);e.length=0}});t.exports=s,cc._RFpop()},{}],buGangCheck_controller:[function(e,t,o){"use strict";cc._RFpush(t,"42b5aleTAhH3pFt72I9vYsq","buGangCheck_controller");var s=cc.Class({name:"BuGangCheck_controller",ctor:function(){},wantBuGang_controller:function(e){console.log("执行 wantBuGang_controller...");var t=e.message.m,o={};o.operateName=e.type,o.operateCard=t.c,o.index=t.index,o.from=t.from;var s=e.message.p;if(!room.msgIsMeSend(s)){if("specialBuGang"===window.messageType[t.t]){var n=room.getUser(s),r=n.mahjongMng;r.mahModel.operateCard(o.operateCard,1,"sub");var i=r.mahModel.getHandCard();r.mahView.displayHand(i)}clientUser.othersBuGangCheck({type:50,message:o,openId:s})}room.displayPointer(-1),socket.finishMsg("wantBuGang")}});t.exports=s,cc._RFpop()},{}],calcHuMng:[function(e,t,o){"use strict";cc._RFpush(t,"1286bo7oF1A367gSwvVWDIm","calcHuMng");var s=e("cardsHu_pair"),n=e("cardsHu_other"),r=cc.Class({name:"calcHuMng",ctor:function(){var e=arguments[0];this.cardsMng=e.cardsMng,this.cardsHu_pair=new s({cardsMng:this.cardsMng}),this.cardsHu_other=new n({cardsMng:this.cardsMng}),this.hasCalcHuFirst=!1,this.statisticsArr=[],this.allHuCardsArr=[]},reset:function(){console.log("calcHuMng.js重置了。")},getAllCanHuCards:function(){this.hasCalcHuFirst=!0,console.log("getAllCanHuCards-手中的牌是： "+this.cardsMng.getAllCardsStr()),this.allHuCardsArr.length=0;var e=this.cardsHu_other.getJiao();return e.isNeedContinue?(this._calcPairType(),this._convertToJiaoArr(),console.log("cardsHu: 有教的计算结果："),console.log(this.allHuCardsArr),this.allHuCardsArr):void this.allHuCardsArr.push(e.resultArr)},getAllJiao:function(){return this.statisticsArr.length>0&&this.statisticsArr},checkHasHu:function(e){for(var t=0;t<this.statisticsArr.length;t++)if(this.statisticsArr[t]===e)return!0;return!1},huResultForEach:function(e,t){t=t||this;for(var o,s=this.allHuCardsArr,n={type:"",huCardArr:null,huDetail:null,i:0},r=0;r<s.length;r++)switch(n.type=s[r].name,n.huCardArr=s[r].huCard,n.huDetail=s[r],n.i=r,o=e.call(t,n)){case"break":break;case"continue":continue}},_calcPairType:function(){var e=0;this.cardsMng.forEach(function(t){if("continueInner"===this._skip.call(this,t))return"continueInner";var o=this.cardsHu_pair.checkHasHu(t.cardName);console.log("getAllCanHuCards：检查的结果是：",o),o&&(e++,o.huCard=[t.cardName],o.name="jiang"+e,this.allHuCardsArr.push(o))},this)},_convertToJiaoArr:function(){var e=this.allHuCardsArr;if(this.statisticsArr=[],e.length>0)for(var t=0;t<e.length;t++)this.statisticsArr=this.statisticsArr.concat(e[t].huCard)},_skip:function(e){var t=(e.i,e.j),o=e.typeName,s=e.arr;if(!("o"!==o&&"t"!==o&&"w"!==o||0!==e.num&&3!==e.num)){if(!(0!==s[t-1]&&void 0!==s[t-1]||0!==s[t+1]&&void 0!==s[t+1]))return"continueInner";if(!(0!==s[t-1]&&void 0!==s[t-1]||0!==s[t+2]&&void 0!==s[t+2]))return"continueInner";if(!(0!==s[t-2]&&void 0!==s[t-2]||0!==s[t+1]&&void 0!==s[t+1]))return"continueInner"}}});t.exports=r,cc._RFpop()},{cardsHu_other:"cardsHu_other",cardsHu_pair:"cardsHu_pair"}],calc:[function(e,t,o){"use strict";cc._RFpush(t,"e499dQj3GhA4rYhG1pQxUWn","calc"),cc._RFpop()},{}],cardsAll:[function(e,t,o){"use strict";cc._RFpush(t,"a9abazO2+hHHKjoPmhKcI/E","cardsAll");var s=cc.Class({name:"CardsAll",ctor:function(){var e=arguments[0];this.handCards=e.handCards,this.outCards=e.outCards,this.operateCards=e.operateCards,this.operateCards_operate=e.operateCards_operate},outArr:function(){return this.outCards.outArr.apply(this.outCards,arguments)},operateAttr:function(){return this.operateCards.operateAttr.apply(this.operateCards,arguments)},reset:function(){console.log("cardsAll.js重置了。")},outCard:function(e){this.outCards.pushCard(e),this.handCards.operateCard(e,1,"sub")},inCard:function(e){this.handCards.operateCard(e,1,"add")},operate:function(e){var t=e.m;if("buHua"===e.t)this.handCards.operateCard(e.c,1,"sub");else if("chi"===e.t)for(var o=0;o<t.length;o++)e.c!==t[o]&&this.handCards.operateCard(t[o],1,"sub");else for(var o=0;o<t.length;o++)this.handCards.operateCard(t[o],1,"sub");return this.operateCards.addOperate(e)}});t.exports=s,cc._RFpop()},{}],cardsHu_other:[function(e,t,o){"use strict";cc._RFpush(t,"92970jM/YdAVZVDRcleOE5L","cardsHu_other");var s=(e("tools"),e("cardsHu_pair"),cc.Class({name:"CardsHu_other",ctor:function(){var e=arguments[0];this.cardsMng=e.cardsMng},getJiao:function(){var e,t={isNeedContinue:!0,resultArr:[]};return(e=this._isThirteenMessy())?(t.resultArr.push(e),t.isNeedContinue=!1):(e=this._isJiaHu())?(t.resultArr.push(e),t.isNeedContinue=!1):(e=this._isSevePair())&&(t.resultArr.push(e),t.isNeedContinue=!0),t},_isJiaHu:function(){var e=this.cardsMng.isSameColor();if(e){switch(e){case"o":case"t":case"w":for(var t=[],o=1;o<=9;o++)t.push(e+o);break;case"z":var t=["e","s","x","n","z","f","b"]}var s=[];return s.name="jiaHu",s.huCard=t,s}return!1},_isSevePair:function(){var e=!0,t=!1,o=[];return o.name="seven",13===this.cardsMng.getLen()?this.cardsMng.forEach(function(s){if(1===s.num||3===s.num){if(t!==!1)return e=!1,"breakOuter";t=!0,o.huCard=[s.cardName],o.push({name:s.cardName,num:++s.num})}else 0!==s.num&&o.push({name:s.cardName,num:s.num})}):e=!1,e&&o},_isThirteenMessy:function(){var e=!0,t={wordCards:[],ordinalCards:[]},o=[];return 13===this.cardsMng.getLen()?this.cardsMng.forEach(function(o){if(o.num>1)return e=!1,"breakOuter";"f"!==o.typeName&&"j"!==o.typeName||0===o.num&&t.wordCards.push(o.cardName);var s=o.j;if(1===o.num&&("o"===o.typeName||"t"===o.typeName||"w"===o.typeName)){if(0!==o.arr[s+1]&&void 0!==o.arr[s+1]||0!==o.arr[s+2]&&void 0!==o.arr[s+2])return e=!1,"breakOuter";for(var n=s+3;n<o.arr.length&&0===o.arr[n];n++)t.ordinalCards.push(o.cardName)}}):e=!1,!!e&&(o.name="thirty",o.huCard=t.wordCards.concat(t.wordCards),o)}}));t.exports=s,cc._RFpop()},{cardsHu_pair:"cardsHu_pair",tools:"tools"}],cardsHu_pair:[function(e,t,o){"use strict";cc._RFpush(t,"894cdTbRTNA2rxLWEEIEbyx","cardsHu_pair");var s=cc.Class({name:"CardsHu_pair",ctor:function(){var e=arguments[0];this.isZFBOrder=room.attr("isZFBOrder"),this.cardsMng=e.cardsMng},reset:function(){console.log("cardsHu_pair.js重置了。")},checkHasHu:function(e,t){this.cardsMng.operateCard(e,1,"add");var o=this._subTwo(this._checkDiffPair,t);return this.cardsMng.operateCard(e,1,"sub"),o},_subTwo:function(e,t,o){var s=[];o=o||this;var n=t?2:0;return this.cardsMng.forEach(function(t){if(t.num>=n){t.arr[t.j]-=n,console.log("_subTwo-start/////////////////////////////////去掉将牌后，手中牌是："+this.cardsMng.getAllCardsStr());var r=[],i=e.call(o,r);t.arr[t.j]+=n,console.log("_subTwo-将牌和结果是："+t.cardName+"  ",i),console.log("_subTwo-huArr: ",r),console.log("_subTwo-end/////////////////////////////////加上将牌后，手中牌是："+this.cardsMng.getAllCardsStr()),i===!1?console.log("-----false----"):(console.log("-----true----"),r.push({name:t.cardName,num:2}),r.jiangCard=t.cardName,s.push(r))}},this),console.log("_subTwo-检查是否胡牌的结果 calcHuArr: ",s),0!==s.length&&s},_checkDiffPair:function(e){var t=!0,o=this;return this.cardsMng.outerForEach(function(s){if(t=o._checkAllCards(s.arr,s.typeName,e),console.log("_checkDiffPair-传入_checkAllCards的数据是：",s.arr,s.typeName,s.j),console.log("_checkDiffPair-本次检查的是"+s.typeName+"牌, 结果是："+t),t===!1)return"break"}),t},_checkAllCards:function(e,t,o){console.log("_checkAllCards-分割前的传入的3个参数是: ",e,t,o);var s=!0,n=null;if("f"===t||"j"===t){if(n=TOOL.getNoZeroArr(e),console.log("_checkAllCards-分割(去零)的结果splitAll: ",n),s=this._checkAllCard(n,t,o),console.log("_checkAllCards-对于本次分割的计算结果result: ",s),s===!1)return!1}else{n=TOOL.getSplitAll(e),console.log("_checkAllCards-分割(真的分割)的结果splitAll: ",n);for(var r=0;r<n.length;r++)if(console.log("_checkAllCards-对于本次分割的片段"+r+": ",n[r],t,o),s=this._checkAllCard(n[r],t,o),console.log("_checkAllCards-对于本次分割的片段: "+r+"的计算结果result是: ",s),console.log("_checkAllCards-计算后的3个参数是: ",n[r],t,o),s===!1)return!1}return!0},_justHasOneCard:function(e,t,o){return 3===e[0]&&(o.push({name:this.cardsMng.getCardName(t,e.index0),num:e[0]}),!0)},_justHasTwoCard:function(e,t,o){return 3===e[0]&&3===e[1]&&(o.push({name:this.cardsMng.getCardName(t,e.index0),num:e[0]}),o.push({name:this.cardsMng.getCardName(t,e.index1),num:e[1]}),!0)},_justHasThreeCard:function(e,t,o){var s,n,r;return this.isZFBOrder||"j"!==t?e[0]===e[1]&&e[0]===e[2]?(s=this.cardsMng.getCardName(t,e.index0),n=this.cardsMng.getCardName(t,e.index1),r=this.cardsMng.getCardName(t,e.index2),o.push({name:s,name1:n,name2:r,num:e[0]}),!0):!(1!==e[0]&&4!==e[0]||1!==e[1]&&4!==e[1]||1!==e[2]&&4!==e[2])&&(s=this.cardsMng.getCardName(t,e.index0),n=this.cardsMng.getCardName(t,e.index1),r=this.cardsMng.getCardName(t,e.index2),o.push({name:s,name1:n,name2:r,num:e[0]}),4===e[0]&&o.push({name:s,num:e[0]-1}),4===e[1]&&o.push({name:n,num:e[1]-1}),4===e[2]&&o.push({name:r,num:e[2]-1}),!0):3===e[0]&&3===e[1]&&3===e[2]&&(s=this.cardsMng.getCardName(t,e.index0),n=this.cardsMng.getCardName(t,e.index1),r=this.cardsMng.getCardName(t,e.index2),o.push({name:s,name1:n,name2:r,num:e[0]}),!0)},_justHasOverThreeCard:function(e,t,o){var s;return console.log("_justHasOverThreeCard-降级前的3个参数：",e,t,o),s="f"===t||"j"===t?this._wordDegradeArr(e,t,o):this._degradeArr(e,t,o),console.log("_justHasOverThreeCard-降级计算的返回结果：",s),console.log("_justHasOverThreeCard-降级后的3个参数：",e,t,o),s!==!1&&("f"===t||"j"===t?e=TOOL.getNoZeroArr(e):TOOL.trimFrontZero(e),void console.log("_justHasOverThreeCard-去掉0后的数组是：",e));
},_checkAllCard:function(e,t,o){var s=!0;for(console.log("_checkAllCard-"+t+"牌是：",e);0!==e.length;)switch(e.length){case 1:return s=this._justHasOneCard(e,t,o),s!==!1;case 2:return s=this._justHasTwoCard(e,t,o),s!==!1;case 3:return s=this._justHasThreeCard(e,t,o),s!==!1;case 4:case 5:case 6:case 7:case 8:case 9:if(s=this._justHasOverThreeCard(e,t,o),s===!1)return!1}return s!==!1},_wordDegradeArr:function(e,t,o){var s=0,n=0;switch(e[0]){case 0:case 3:return e[0]=0,!0;case 1:case 2:s=e[0];break;case 4:s=1}for(var r={},i=1;i<4;i++)e[i]>=s&&n<=2&&(e[i]-=s,n++,r["name"+n]=this.cardsMng.getCardName(t,e["index"+i]),r.num=s);return 2===n&&(r.name=this.cardsMng.getCardName(t,e.index0),4===e[0]&&o.push({name:this.cardsMng.getCardName(t,e.index0),num:3}),o.push(r),e[0]=0,!0)},_degradeArr:function(e,t,o){switch(console.log("_degradeArr-序数牌的降级前的三个参数：",e,t,o),e[0]){case 0:return!0;case 1:if(e[0]=0,e[1]--,e[2]--,e[1]<0||e[2]<0)return!1;if(0===e[2]){if(3!==e[1]&&0!==e[1])return!1;3===e[1]&&(e[1]=0,o.push({name:t+(e.index1+1),num:3}))}else o.push({name:t+(e.index0+1),name1:t+(e.index1+1),name2:t+(e.index2+1),num:1});break;case 2:if(e[0]=0,e[1]-=2,e[2]-=2,e[1]<0||e[2]<0)return!1;if(0===e[2]){if(3!==e[1]&&0!==e[1])return!1;3===e[1]&&(e[1]=0,o.push({name:t+(e.index1+1),num:3}))}else o.push({name:t+(e.index0+1),name1:t+(e.index1+1),name2:t+(e.index2+1),num:2});break;case 3:e[0]=0,o.push({name:t+e.index0,num:3});break;case 4:if(e[0]=0,e[1]-=1,e[2]-=1,e[1]<0||e[2]<0)return!1;if(0===e[2]){if(3!==e[1]&&0!==e[1])return!1;3===e[1]&&(e[1]=0,o.push({name:t+(e.index1+1),num:3}))}else o.push({name:t+(e.index0+1),name1:t+(e.index1+1),name2:t+(e.index2+1),num:1}),o.push({name:t+(e.index0+1),num:3})}return console.log("_degradeArr-序数牌的降级后的三个参数：",e,t,o),!0}});t.exports=s,cc._RFpop()},{}],cardsMng:[function(e,t,o){"use strict";cc._RFpush(t,"42dd72wYYlAwIY45Efmg7pg","cardsMng");var s=e("combination"),n=e("outCards"),r=e("operateCards"),i=e("handCardsChild"),a=e("cardsAll"),c=e("operateCards_operate"),l=e("outCards_operate"),d=e("calcHuMng"),h=cc.Class({name:"CardsMng","extends":s,ctor:function(){this.outCards=new n,this.operateCards=new r,this.handCards=new i,this.operateCards_operate=new c({handCards:this.handCards,operateCards:this.operateCards}),this.outCards_operate=new l({outCards:this.outCards}),this.cardsAll=new a({outCards:this.outCards,handCards:this.handCards,operateCards:this.operateCards,operateCards_operate:this.operateCards_operate}),this.combination([{name:"handCardsChild",combineType:"method",type:"objectExist",config:{obj:this.handCards}},{name:"outCards_operate",combineType:"method",type:"objectExist",config:{obj:this.outCards_operate}},{name:"operateCards_operate",combineType:"method",type:"objectExist",config:{obj:this.operateCards_operate}},{name:"cardsAll",combineType:"method",type:"objectExist",config:{obj:this.cardsAll}}]),this.calcHuMng=new d({cardsMng:this}),this.combination([{name:"calcHuMng",combineType:"method",type:"objectExist",config:{obj:this.calcHuMng}}])},reset:function(){console.log("cardsMng.js重置了。"),this.reset_other(),this.outCards.reset(),this.operateCards.reset()}});t.exports=h,cc._RFpop()},{calcHuMng:"calcHuMng",cardsAll:"cardsAll",combination:"combination",handCardsChild:"handCardsChild",operateCards:"operateCards",operateCards_operate:"operateCards_operate",outCards:"outCards",outCards_operate:"outCards_operate"}],combination:[function(e,t,o){"use strict";cc._RFpush(t,"f190bH8lFBB/pUh8czJvvEE","combination");var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=cc.Class({name:"Combination",ctor:function(){this.data=[],this.methodObj={},this.methodLen=0,this.oldMethodLen=this.methodLen},remove:function(e){for(var t=e,o=0;o<t.length;o++){for(var s=0;s<this.data.length;s++)this.data[s].name===t[o]&&(this.data.splice(s,1),s--);for(var n in this.methodObj){for(var r=this.methodObj[n],s=0;s<r.length;s++)r[s].name===t[o]&&(r.splice(s,1),s--);0===r.length&&(n.search(/_other$/)===-1&&delete this[n],delete this.methodObj[n])}}return this},combination:function(t){if(t&&t.length){for(var o=0;o<t.length;o++){var s=null;switch(t[o].type){case"class":this.className=e(t[o].name),s=void 0!==t[o].config?new this.className(t[o].config):new this.className;break;case"object":s=e(t[o].name);break;case"objectExist":s=t[o].config.obj}s.name=t[o].name,t[o].combineType.search(/data/)!==-1&&this.data.push(s),t[o].combineType.search(/method/)!==-1&&(this.oldMethodLen=this.methodLen,this._changeMethodObj_(s),this.oldMethodLen!==this.methodLen&&this._copyMethod_())}return this}},attr:function(e,t){if(e){if("object"===("undefined"==typeof e?"undefined":s(e))){for(var o in e)e[o]=this._attr_(o,e[o]);return e}return this._attr_(e,t)}},_attr_:function(e,t){for(var o=this.data,s=0;s<o.length;s++)if(void 0!==o[s][e])return void 0===t?o[s][e]:o[s][e]=t},_copyMethod_:function(){var e;for(var t in this.methodObj)e=this.methodObj[t].selfHave?t+"_other":t,e in this||(this[e]=function(e){return function(){for(var t=this.methodObj[e],o=0;o<t.length;o++){var s=t[o][e].apply(t[o],arguments);if(void 0!==s)return s}if("reset"===e)for(var t=this.data,o=0;o<t.length;o++)if(t[o][e]){var s=t[o][e].apply(t[o],arguments);if(void 0!==s)return s}}}(t))},_changeMethodObj_:function(e){for(var t in e)"function"!=typeof e[t]||"constructor"===t||t.match(/(^_)|(_$)/)||(t in this.methodObj?this.methodObj[t].push(e):(this.methodObj[t]=[e],this.methodLen++,t in this&&(this.methodObj[t].selfHave=!0)))}});t.exports=n,cc._RFpop()},{}],conditions:[function(e,t,o){"use strict";cc._RFpush(t,"239faMVjHxO67OQK9iL+Klo","conditions");var s={roomFinish_condition:["juScore","roomScore","word","face","ready","dismissing","dismiss","leaveLine","reConnect"],joinOver_condition:["start","napai"],buHuaOver_condition:["outCard","guo","pong","hu","mingGang","chi","buGang","anGang"],existRoomUser_condition:["leaveLine","reConnect","exitRoom"],allResultShow_condition:["roomScore"],initConditions:function(){for(var e in s)for(var t=s[e],o=0;o<t.length;o++)"function"!=typeof t[o]&&(t[o]in n?n[t[o]].push(e):n[t[o]]=[e])}},n={roomFinish_condition:function(e){return getGI("roomSceneFinished")},joinOver_condition:function(){return getGI("joinOver")},buHuaOver_condition:function(){return getGI("buHuaOver")},existRoomUser_condition:function(e){var t=e.message;return window.room&&t&&room.getUser(t)},allResultShow_condition:function(e){var t=room.attr("isCanShowAllResult");return t?(room.attr("isCanShowAllResult",!1),!0):t}};s.initConditions(),t.exports=n,cc._RFpop()},{}],controllerMapMng:[function(e,t,o){"use strict";cc._RFpush(t,"7acb8VgEkxMWInmRYdBkq+8","controllerMapMng");var s=cc.Class({name:"ControllerMapMng",ctor:function(){var e=arguments[0];this.controllerMap=e.controllerMap,this.controllerSave={},this.controllerObjArr=[],this._init_()},resetController:function(){for(var e=this.controllerObjArr,t=0;t<e.length;t++)e[t].reset&&e[t].reset()},accessController:function(e){var t=e.type,o=e.success?this.controllerSave[t]:this.controllerSave.error_controller,s=o.index,n=o[t+"_controller"];s&&s.call(o,e),n&&n.call(o,e),e.success||n||(console.log("---简单的输出错误信息---"+e.errMsg),socket.finishMsg("error_sample"))},_init_:function(){this.className;for(var t in controllerMap){this.className=e(t);var o=new this.className;if(o.fileName=t,this.controllerObjArr.push(o),"error_controller"===t)this.controllerSave.error_controller=o;else for(var s=this.controllerMap[t],n=0;n<s.length;n++)this.controllerSave[s[n]]=o}}});t.exports=s,cc._RFpop()},{}],dialogWords:[function(e,t,o){"use strict";cc._RFpush(t,"837c85N7OpC8aK3ha+B+xLt","dialogWords");var s={data:{c00:"大家多多关照啊",c01:"牌好，心情就好",c02:"牌品好，人品才会好",c03:"看到没有，赌神就在这里啊",c04:"赶紧出牌啊",c05:"哈哈，风水轮流转呀",c06:"这一盘，看你们怎么办",c07:"都是自己人，何必呢",c08:"唉，怎么会这样呢",c09:"这两天手气怎么这么衰呢"},order:["c00","c01","c02","c03","c04","c05","c06","c07","c08","c09"]};t.exports=s,cc._RFpop()},{}],dismissAlert_click:[function(e,t,o){"use strict";cc._RFpush(t,"dafa78s0xhIn67icYFc02Sa","dismissAlert_click"),cc.Class({"extends":cc.Component,onLoad:function(){this.dismissAlert=room.dismissAlert},_test_:function(){var t=e("dismissAlert_display");return new t},dismissAlertClick:function(e){return room.attr("isCanDismiss")?void room.dismissAlert.startDismiss():void room.displayRoomInfo("onLine","只有房间中的全部成员同时在线时，才能解散房间！")},agreeClick:function(e,t){window.audio.playEffect("waterClick"),clientUser.send({message:!0,type:"dismissing"}),this.dismissAlert.changeBtnState("disabled"),this.dismissAlert.showOperate(clientUser.attr("nickName"),!0)},continueClick:function(){window.audio.playEffect("waterClick"),clientUser.send({message:!1,type:"dismissing"}),this.dismissAlert.changeBtnState("disabled"),this.dismissAlert.showOperate(clientUser.attr("nickName"),!1)}}),cc._RFpop()},{dismissAlert_display:"dismissAlert_display"}],dismissAlert_display:[function(e,t,o){"use strict";cc._RFpush(t,"4bf73YCBTNFer5EGJcG5FSn","dismissAlert_display");var s=cc.Class({name:"DismissAlert_display",ctor:function(){this.dismissNode=cc.find("Canvas/dimissAlert"),this.contentNode=cc.find("alertContent/dikuang",this.dismissNode),this.dimiss_Atlas=getGI("roomGlobalRes").dimiss_Atlas,this.reset()},getIsShow:function(){return this.isShow},reset:function(){for(var e=0;e<4;e++)this.contentNode.getChildByName("check"+e).getComponent(cc.Sprite).spriteFrame=this.dimiss_Atlas.getSpriteFrame("waiting"),this.contentNode.getChildByName("user"+e).acitve=!1,this.contentNode.getChildByName("check"+e).acitve=!1;this.isShow=!1,room.attr("dismissingNum",0)},initUsers:function(e){var t=void 0,o=void 0,s=void 0;this.contentNode.getChildByName("startPerson").getComponent(cc.Label).string=e.attr("nickName");for(var n=0;n<4;n++)t=room.usersArr[n],o=!!t,s=this.contentNode.getChildByName("user"+n),s.active=o,this.contentNode.getChildByName("check"+n).active=o,this.contentNode.getChildByName("check"+n).getComponent(cc.Sprite).spriteFrame=this.dimiss_Atlas.getSpriteFrame("waiting"),o&&(s.getComponent(cc.Label).string=t.attr("nickName"))},dismissShow:function(e,t){var o=this;if(this.isShow="show"===e,this.isShow)this.initUsers(t),this.changeBtnState("enabled"),this.dismissNode.active=!0;else{var s=t;s?setTimeout(function(){o.dismissNode.active=!1,o.reset()},s):(this.dismissNode.active=!1,this.reset())}},startDismiss:function(){clientUser.send({message:!0,type:"dismissing"}),this.isShow=!0,this.initUsers(clientUser),this.showOperate(clientUser.attr("nickName"),!0),this.dismissNode.active=!0,this.changeBtnState("disabled")},changeBtnState:function(e){e="enabled"===e,this.contentNode.getChildByName("refuseBtn").getComponent(cc.Button).interactable=e,this.contentNode.getChildByName("agreeBtn").getComponent(cc.Button).interactable=e},showOperate:function(e,t){for(var o=0;o<4;o++){var s=this.contentNode.getChildByName("user"+o);if(s.getComponent(cc.Label).string===e){var n=this.contentNode.getChildByName("check"+o);s.active=!0,n.getComponent(cc.Sprite).spriteFrame=this.dimiss_Atlas.getSpriteFrame(t?"agree":"notAgree"),n.active=!0,this.index++}}}});t.exports=s,cc._RFpop()},{}],dismiss_controller:[function(e,t,o){"use strict";cc._RFpush(t,"6c3c4VhzG5B151VdYVOkJ+0","dismiss_controller");var s=cc.Class({name:"Dismiss_controller",ctor:function(){arguments[0];this.disimssNum=0},ready_controller:function(e){console.log("执行 ready_controller..."),room.attr("readyArr",e.message);var t=e.message;if("endJu"!==room.attr("period"))for(var o=0;o<t.length;o++)room.getUser(t[o]).displayHead("ok","show");else if(room.singleResult.isSingleAlertShow())room&&room.displayRoomInfo&&room.displayRoomInfo("onLine",room.getUser(t[t.length-1]).attr("nickName")+" 继续了游戏...");else for(var o=0;o<t.length;o++)room.getUser(t[o]).displayHead("ok","show");socket.finishMsg("ready")},dismissing_controller:function(e){console.log("客户端-- 执行 dismissing_controller..."),console.log(e),room.attr("dismissingNum",room.attr("dismissingNum")+1);var t=e.message;room.msgIsMeSend(t.p)||(room.dismissAlert.getIsShow()||(room.dismissAlert.reset(),room.dismissAlert.dismissShow("show",room.getUser(t.p))),room.dismissAlert.showOperate(room.getUser(t.p).attr("nickName"),t.m)),room.attr("dismissingNum")>3&&(room.attr("dismissingNum",0),room.attr("isCanShowAllResult",!0)),socket.finishMsg("dismissing")},dismiss_controller:function(e){console.log("客户端-- 执行 dismiss_controller..."),e.message?setTimeout(function(){cc.director.loadScene("hall",function(){TOOL.backHall(),socket.finishMsg("dismiss")})},1e3):(room.dismissAlert.dismissShow("hide",1e3),socket.finishMsg("dismiss"))}});t.exports=s,cc._RFpop()},{}],error_controller:[function(e,t,o){"use strict";cc._RFpush(t,"7ee24iwWN5J1pZsbs2fe7br","error_controller");var s=cc.Class({name:"Error_controller",join_controller:function(e){getGI("hall").errorReminder(e.errMsg),socket.finishMsg("error_join"),getGI("hall").loading("end")},ready_controller:function(e){console.log("ready出错了...."),socket.finishMsg("error_ready")},create_controller:function(e){getGI("hall").errorReminder(e.errMsg),socket.finishMsg("error_create"),getGI("hall").loading("end")},error_controller:function(e){console.log("error_controller出错了....",e),window.room?cc.director.loadScene("hall",function(){window.reset(),getGI("hall").display({nickName:clientUser.attr("nickName"),userId:clientUser.attr("userId"),headIcon:clientUser.attr("faceIcon"),roomCardNum:clientUser.attr("roomCards")}),socket.finishMsg("error_error")}):(TOOL.createSocket({type:"login",message:window.userInfo}),socket.finishMsg("error_error"))}});t.exports=s,cc._RFpop()},{}],globalData:[function(e,t,o){"use strict";cc._RFpush(t,"2457chhis1HrL5nG58XN72I","globalData");var s={debug:1,model:"produce",isBuildUserInfo:!0,socketURL:"ws://192.168.0.114:8080/quanzhou/ws/qzmj",shareConfig:null,musicVolume:!1,effectVolume:!0,language:"puTongHua",extension:".mp3",hall:null,setAlert:null,offlineAlert:null,roomGlobalRes:null,roomSceneFinished:!1,joinOver:!1,buHuaOver:!1,rebuildFinished:!1};"produce"===s.model&&(s.socketURL="ws://120.24.57.27:8080/quanzhou/ws/qzmj",s.isBuildUserInfo=!1),s.isBuildUserInfo&&(window.userInfo={openId:"10101",userId:10101,nickName:"玩家10101",faceIcon:"5350b36d56b6e054.jpg",sex:1,ip:"192.168.75.1",roomId:""}),s.setGI=function(e,t){s[e]=t},s.getGI=function(e){return s[e]},t.exports=s,cc._RFpop()},{}],global:[function(e,t,o){"use strict";cc._RFpush(t,"daabf/WfUpBYKp8YSXeDxnn","global"),window.clientUser=null,window.room=null,window.socket=null,window.ajaxMng=null,window.audio=null,window.msgCache=null,window.MYGLOBAL=null,window.helpTextArr=null,window.reset=null,window.msgCondition=null,window.messageType=null,window.controllerMap=null,window.words=null,window.TOOL=null,window.msgCondition=e("conditions"),window.helpText=e("helpText"),window.MYGLOBAL=e("globalData"),window.setGI=window.MYGLOBAL.setGI,window.getGI=window.MYGLOBAL.getGI;var s=e("msgConfig");window.messageType=s.messageType,window.controllerMap=s.controllerMap,window.words=e("dialogWords"),window.TOOL=e("tools"),window.pageLog=e("pageLog"),window.CONDITIONS=e("conditions"),window.testData=e("test_data"),window.reset=function(){TOOL.resetData(),window.audio&&window.audio.stopBgMusic(),window.msgCache&&window.msgCache.reset(),TOOL.replaceShareUrl("wx"),window.room=null,window.socket.reset(),window.MYGLOBAL.roomGlobalRes=null,window.MYGLOBAL.roomSceneFinished=!1},cc._RFpop()},{conditions:"conditions",dialogWords:"dialogWords",globalData:"globalData",helpText:"helpText",msgConfig:"msgConfig",pageLog:"pageLog",test_data:"test_data",tools:"tools"}],handCardMng:[function(e,t,o){"use strict";cc._RFpush(t,"958fbeKsDpDObzMYia3wqW+","handCardMng");var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=cc.Class({name:"CardHandMng",ctor:function(){this.user=arguments[0],this.userNode=arguments[0].attr("userNode"),this.mj_Atlas=getGI("roomGlobalRes").mj_Atlas,this.n=this.userNode.name.substr(-1,1),this.cardsCoord=[],this.currentModel="handd",this.handPosition=this.userNode.getChildByName("hand").getPosition(),this.handdPosition=this.userNode.getChildByName("handd").getPosition(),this.convertHM("handd"),this.youJingCards=null,this.cardsHandOrder=arguments[0].attr("cardsHandOrder"),this.mjBPointer=-1},convertHM:function(e){if(this.cardNodes)for(var t=0;t<this.cardNodes.length;t++)this.cardNodes[t].setPosition(this.cardsCoord[t]);this.handNode=this.userNode.getChildByName(e),this.currentModel=e;var o="hand"===e;this.userNode.getChildByName("hand").active=o,this.userNode.getChildByName("handd").active=!o,this.cardNodes=this.handNode.children,this.cardNodes.sort(function(e,t){return e.name.match(/mj(.*)$/)[1]-t.name.match(/mj(.*)$/)[1]});for(var t=0;t<this.cardNodes.length;t++)this.cardsCoord[t]=this.cardNodes[t].getPosition()},reset:function(){console.log("cardHandMng.js重置了。");for(var e=0;e<this.cardNodes.length;e++)this.cardNodes[e].setPosition(this.cardsCoord[e]);this.hideHand(),this.youJingCards=null},displayHand:function(e,t){this.youJingCards=this.user.attr("youJingCards"),3==this.n?this.displayHandL(e,t):this.displayHandR(e,t),this.youJingCards=null},displayHandR:function(e,t){"object"===("undefined"==typeof t?"undefined":s(t))&&this.convertHM(t);var o;o="number"==typeof e?e:e.length;var n=o-1,r="mjB";if(17===o||"wantOutCard"===t)var i=this.cardNodes.length-1;else{var i=this.cardNodes.length-2;this.cardNodes[i+1].active=!1}for(var a=i;a>-1;a--)n>-1?("object"===("undefined"==typeof e?"undefined":s(e))&&(r=e[n],this._recordCardName_(this.cardNodes[a].name,r)),this._setMj_(this.cardNodes[a],r),this.cardNodes[a].active=!0,n--):this.cardNodes[a].active=!1;this._handNodeMove_(o)},_handNodeMove_:function(e){var t,o,s,n,r=this.n,i=!1;if(1==r?(t=340,o=78.7*3.14/180,i=!0,s=-1,n=1):3==r&&(t=340,o=78.7*3.14/180,i=!0,s=1,n=1),i){n=n*t/17*(17-e)/2,s=0;var a="handd"===this.currentModel?this.handdPosition:this.handPosition,c=a.add(cc.v2(s,n));this.handNode.setPosition(c)}},displayHandL:function(e,t){"object"===("undefined"==typeof t?"undefined":s(t))&&this.convertHM(t),3==this.n&&this.mjBPointer!==-1&&(this.mjBPointer=this.mjBPointer>16?16:this.mjBPointer,this.cardNodes[this.mjBPointer].setPosition(this.cardsCoord[this.mjBPointer]));var o;o="number"==typeof e?e:e.length;for(var n=0,r=0,i="mjB",a=n;a<this.cardNodes.length;a++)o>r?("object"===("undefined"==typeof e?"undefined":s(e))&&(i=e[r],this._recordCardName_(this.cardNodes[a].name,i)),this._setMj_(this.cardNodes[a],i),this.cardNodes[a].active=!0,r++):this.cardNodes[a].active=!1;this.mjBPointer=o,3==this.n&&17===o&&this._move3Incard_(this.cardNodes[16],17),this._handNodeMove_(o)},_move3Incard_:function(e,t){e.setPosition(e.getPosition().add(cc.v2(-5,15).mulSelf(-1/32*(t-1)+1)))},inCard:function(e){var t;if(3==this.n?(this.mjBPointer=this.mjBPointer>16?16:this.mjBPointer,t=this.mjBPointer,this._move3Incard_(this.cardNodes[t],t)):t=this.cardNodes.length-1,e){if(this.youJingCards=this.user.attr("youJingCards"),this._recordCardName_(this.cardNodes[t].name,e),this.youJingCards&&this.youJingCards.length>0)for(var o=void 0,s=0;s<17;s++)o=this.cardNodes[s],o.active&&(this.youJingCards.indexOf(this.cardsHandOrder[o.name])!==-1?(o.getChildByName("reminder").active=!0,o.getChildByName("reminder").getComponent(cc.Sprite).spriteFrame=this.mj_Atlas.getSpriteFrame("youjin")):o.getChildByName("reminder").active=!1)}else e="mjB";this._setMj_(this.cardNodes[t],e),this.cardNodes[t].active=!0,this.youJingCards=null},hideHand:function(){for(var e=0;e<this.cardNodes.length;e++)this.cardNodes[e].active=!1},hideTingMask:function(){for(var e=0;e<this.cardNodes.length;e++)this.cardNodes[e].getChildByName("mashMask").active=!1},_recordCardName_:function(e,t){this.cardsHandOrder[e]=t},_getCardNameFromNode_:function(e){return this.cardsHandOrder[e]},_setMj_:function(e,t){var o;e.getComponent(cc.Sprite).spriteFrame.name;switch(t){case"mjB":case"mjF":this._mjReverSal_(e,t);break;default:if(o=e.getChildByName("hua"),"handd"===this.currentModel)this._mjReverSal_(e,"mjF");else if(!o)return;o.getComponent(cc.Sprite).spriteFrame=this.mj_Atlas.getSpriteFrame(t),t===room.goldCard?e.getChildByName("jinLabel").active=!0:e.getChildByName("jinLabel").active=!1,this.youJingCards&&this.youJingCards.length>0&&this.youJingCards.indexOf(t)!==-1?(e.getChildByName("reminder").active=!0,e.getChildByName("reminder").getComponent(cc.Sprite).spriteFrame=this.mj_Atlas.getSpriteFrame("youjin")):e.getChildByName("reminder").active=!1}},_mjReverSal_:function(e,t){var o=e.getComponent(cc.Sprite).spriteFrame.name;switch(t){case"mjB":if("hand"===this.currentModel)return;"h"===o.charAt(0)?o.search("handb")===-1&&(o=o.replace("handm","handb"),e.getComponent(cc.Sprite).spriteFrame=this.mj_Atlas.getSpriteFrame(o)):o.search("mingb")===-1&&(o=o.replace("ming","mingb"),e.getComponent(cc.Sprite).spriteFrame=this.mj_Atlas.getSpriteFrame(o)),e.getChildByName("hua").active=!1;break;case"mjF":"h"===o.charAt(0)?o.search("handb")!==-1&&(o=o.replace("handb","handm"),e.getComponent(cc.Sprite).spriteFrame=this.mj_Atlas.getSpriteFrame(o)):o.search("mingb")!==-1&&(o=o.replace("mingb","ming"),e.getComponent(cc.Sprite).spriteFrame=this.mj_Atlas.getSpriteFrame(o)),e.getChildByName("hua").active=!0}}});t.exports=n,cc._RFpop()},{}],handCardsBase:[function(e,t,o){"use strict";cc._RFpush(t,"650ffS9R/VHa7lANQrUPQIn","handCardsBase");var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=cc.Class({name:"HandCardsBase",ctor:function(){arguments[0];this._init()},_init:function(){this.order=["w","t","o","f","j","i","h"],this._copyOrderProp_(),this.originalCardsHand=[],this.cardsHand=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0],[0,0,0],[0,0,0,0],[0,0,0,0]],this.goldCards=[],this.goldCard="",this.cardsHandArr=[],this.cardsNum=0},_copyOrderProp_:function(){for(var e={},t=0;t<this.order.length;t++)e[t]=this.order[t],e[this.order[t]]=t;this.order=e},setCards:function(e){this.goldCard=room.goldCard,"object"!==("undefined"==typeof e?"undefined":s(e))?(this.cardsNum=e,this.originalCardsHand=this.cardsNum):(this.originalCardsHand.length=0,TOOL.copyArray(this.originalCardsHand,e),this._clearCardsHand_(),this._convertToCardsHand_(),this.cardsNum=e.length)},reset:function(){console.log("handCardsBase.js重置了。"),"object"===s(this.originalCardsHand)&&(this.originalCardsHand.length=0,this._clearCardsHand_(),this.cardsHandArr.length=0),this.cardsNum=0,this.goldCards.length=0,this.goldCard=""},operateCard:function(e,t,o){if("object"!==s(this.originalCardsHand)){switch(o){case"add":this.cardsNum+=t;break;case"set":this.cardsNum=t;break;case"sub":this.cardsNum-=t}return this.cardsNum}if(e===this.goldCard){switch(o){case"add":this.goldCards.push(e);break;case"set":this.goldCards.length=t;break;case"sub":this.goldCards.pop()}return this.goldCards.length}var n=this._getCardCoord(e);switch(o){case"add":this.cardsHand[n.i][n.j]+=t,this.cardsNum+=t;break;case"set":this.cardsHand[n.i][n.j]=t,this.cardsNum+=t-this.cardsHand[n.i][n.j];break;case"sub":this.cardsHand[n.i][n.j]-=t,this.cardsNum-=t}return this.cardsHand[n.i][n.j]},forEach:function(e,t){t=t||this;var o=null,s=this.cardsHand.length,n=null,r={num:0,cardName:"",typeName:"",i:0,j:0,arr:null,cardsHand:null};e:for(var i=0;i<s;i++){o=this.cardsHand[i];t:for(var a=0;a<o.length;a++)switch(r.num=o[a],r.cardName=this._getCardNameFromCoord(i,a),r.typeName=this.order[i],r.j=a,r.i=i,r.arr=o,r.cardsHand=this.cardsHand,n=e.call(t,r)){case"breakOuter":break e;case"breakInner":break t;case"continueInner":continue t;case"continumOuter":continue e}}},forEachReduce:function(e,t){t=t||this;var o=null,s=this.cardsHand.length,n=null,r={num:0,cardName:"",typeName:"",i:0,j:0,arr:null,cardsHand:null};e:for(var i=s-1;i>-1;i--){o=this.cardsHand[i];t:for(var a=o.length-1;a>-1;a--)switch(r.num=o[a],r.typeName=this.order[i],r.cardName=this._getCardNameFromCoord(i,a),r.j=a,r.i=i,r.arr=o,r.cardsHand=this.cardsHand,n=e.call(t,r)){case"breakOuter":break e;case"breakInner":break t;case"continueInner":continue t;case"continumOuter":continue e}}},outerForEach:function(e,t){t=t||this;var o=this.cardsHand.length,s=null,n={typeName:"",i:0,arr:null,cardsHand:null};e:for(var r=0;r<o;r++)switch(n.typeName=this.order[r],n.i=r,n.arr=this.cardsHand[r],n.cardsHand=this.cardsHand,s=e.call(t,n)){case"break":break e;case"continue":continue e}},getLen:function(){if("object"!==s(this.originalCardsHand))return this.cardsNum;var e=0;return this.forEach(function(t){e+=t.num}),e+this.goldCards.length},getCardNums:function(e){var t=this._getCardCoord(e);return this.cardsHand[t.i][t.j]},_getCardNameFromCoord:function(e,t){return"object"===("undefined"==typeof e?"undefined":s(e))&&(e=e.i,t=e.j),this.order[e]+(t+1)},_getCardCoord:function(e){return{i:this.order[e.charAt(0)],j:e.charAt(1)-1}},_convertToCardsHand_:function(){var e=this.originalCardsHand.length;console.log("转换时："+this.originalCardsHand);for(var t=0;t<e;t++){var o=this.originalCardsHand[t];this.goldCard===o?this.goldCards.push(o):this.cardsHand[this.order[o.charAt(0)]][o.charAt(1)-1]++}},_clearCardsHand_:function(){this.forEach(function(e){e.arr[e.j]=0}),this.goldCards.length=0}});t.exports=n,cc._RFpop()},{}],handCardsChild:[function(e,t,o){"use strict";cc._RFpush(t,"09334+j+LZFbrurkDQzdULV","handCardsChild");var s=e("handCards"),n=cc.Class({name:"HandCardsChild","extends":s,ctor:function(){this.cardsTypeNum=[0,0,0,0,0]},multiCardTypeForEach:function(e){for(var t=0;t<arguments.length&&"string"==typeof arguments[t];t++);for(var o,s=0;s<t;s++)switch(o=this.cardTypeForEach(arguments[s],arguments[t],arguments[t+1])){case"return":return}},getAllCardsStr:function(){return this.cardsHandConvertToArr().toString()}});t.exports=n,cc._RFpop()},{handCards:"handCards"}],handCards:[function(e,t,o){"use strict";cc._RFpush(t,"020d5e+jR1NpYMyvqx/5/80","handCards");var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=e("handCardsBase"),r=cc.Class({name:"HandCards","extends":n,ctor:function(){this.isZFBOrder=room.attr("isZFBOrder")},cardTypeForEach:function(e,t,o){o=o||this;var s=this.order[e],n=this.cardsHand[s],r=n.length,i=null,a={};e:for(var c=0;c<r;c++)switch(a.num=n[c],a.cardName=this._getCardNameFromCoord(s,c),a.typeName=this.order[s],a.j=c,a.i=s,a.arr=n,a.cardsHand=this.cardsHand,i=t.call(o,a)){case"break":break e;case"return":break e;case"continue":continue e}return i},checkNum:function(e){var t=this.getCardNums(e);return t<1?(this.forEach(function(t){if(t.num>0)return e=t.cardName,"breakOuter"}),e):e},_getFourCard_:function(){var e=[];return this.forEach(function(t){4===t.num&&e.push(t.cardName)}),e},getHandCard:function(){var e=this;return"object"!==s(this.originalCardsHand)?this.cardsNum:(this.cardsHandArr.length=0,this.goldCards.forEach(function(t){e.cardsHandArr.push(t)}),this.forEach(function(e){for(var t=0;t<e.num;t++)this.cardsHandArr.push(e.cardName)}),this.cardsHandArr)}});t.exports=r,cc._RFpop()},{handCardsBase:"handCardsBase"}],hand_operatePanel:[function(e,t,o){"use strict";cc._RFpush(t,"d835f4GsBdB8b07D+7U6zaI","hand_operatePanel");var s=cc.Class({name:"OperateEvent",ctor:function(){this.userNode=arguments[0],this.btnsNode=cc.find("operate/btns",this.userNode),this.btnsArr=this.btnsNode.getChildren(),this.chooseNode=cc.find("operate/choose",this.userNode),this.chooseArr=this.chooseNode.getChildren(),this.chooseNode.active=!1,this.btnsNode.active=!1,this.isCanShowPanel=!0,this.mj_Atlas=getGI("roomGlobalRes").mj_Atlas,this.operate_Atlas=getGI("roomGlobalRes").operate_Atlas,this.gangArr=[],this.chiArr=[],this.showArr=["guo"],this.currentArr=null,this.mjW=this.chooseArr[0].children[0].width},reset:function(){console.log("hand_operatePanel.js重置了。"),this.chooseNode.active=!1,this.btnsNode.active=!1,this.isShowing=!1,this.isCanShowPanel=!0,this.operateArr=null,this.gangArr.length=0,this.chiArr.length=0,this.showArr.length=1,this.currentArr=null},showPanel:function(e){if(this.isCanShowPanel){this.operateArr=e,this.gangArr.length=0,this.chiArr.length=0,this.showArr.length=1;for(var t=this.gangArr,o=this.chiArr,s=this.showArr,n=0;n<e.length;n++)switch(e[n].t){case"mingGang":case"anGang":case"buGang":t.push(n);break;case"chi":o.push(n);break;case"pong":s.push("pong")}o.length>0&&s.push("chi"),t.length>0&&s.push("gang");for(var n=0;n<e.length;n++)switch(e[n].t){case"youJing":case"shuangYou":case"sanYou":case"sanJingDao":case"hu":case"tianHu":case"ziMo":s.push(e[n].t)}for(var n=0;n<s.length;n++){var r=s[n];"hu"!==r&&"tianHu"!==r&&"ziMo"!==r||(r="dao"),this.btnsArr[n].getComponent(cc.Sprite).spriteFrame=this.operate_Atlas.getSpriteFrame(r+"_btn"),this.btnsArr[n].active=!0}for(var i=n;i<this.btnsArr.length;i++)this.btnsArr[i].active=!1;this.isShowing=!0,this.btnsNode.active=!0}},showChoose:function(e){if("gang"!==e&&"chi"!==e)return null;var t=this[e+"Arr"];if(this.currentArr===t)return this.chooseNode.active=!this.chooseNode.active,t;var o=this.operateArr,s=30;if(t.length>1){for(var n=0;n<t.length;n++){for(var r=t[n],i=this.chooseArr[n].children,a=o[r].m,c=o[r].t,l=0;l<a.length;l++)i[l].active=!0,i[l].getChildByName("hua").getComponent(cc.Sprite).spriteFrame=this.mj_Atlas.getSpriteFrame(a[l]),"chi"===c&&o[r].c===a[l]?i[l].getChildByName("mask").active=!0:i[l].getChildByName("mask").active=!1;"mingGang"===c&&(i[l].active=!0,i[l].getChildByName("hua").getComponent(cc.Sprite).spriteFrame=this.mj_Atlas.getSpriteFrame(o[r].c),i[l].getChildByName("mask").active=!0,l++);for(var d=l;d<4;d++)i[d].active=!1;this.chooseArr[n].width=this.mjW*l,s+=this.mjW*l,this.chooseArr[n].active=!0}for(var h=n;h<this.chooseArr.length;h++)this.chooseArr[h].active=!1;var u=s+10*(n-1);s=u+this.btnsNode.width,s>920?(this.chooseNode.x=this.btnsNode.x-100-u/2,this.chooseNode.y=90):(this.chooseNode.x=this.btnsNode.x-u/2-this.btnsNode.width,this.chooseNode.y=0),this.chooseNode.active=!0,this.currentArr=t}else this.chooseNode.active=!1;return t},panelAttr:function(e,t){switch(e){case"isShow":var o="show"===t;this.isShowing=o,this.btnsNode.active=o,this.chooseNode.active=o;break;case"isCanShowPanel":return void 0!==t?this.isCanShowPanel=t:this.isCanShowPanel;case"isShowing":return void 0!==t?this.isShowing=t:this.isShowing;case"gangArr":return this.gangArr;case"chiArr":return this.chiArr;case"showArr":return this.showArr;case"currentArr":return void 0!==t?this.currentArr=t:this.currentArr;case"showObj":return{gangArr:this.gangArr,chiArr:this.chiArr,showArr:this.showArr}}}});t.exports=s,cc._RFpop()},{}],hand_outCardEvent:[function(e,t,o){"use strict";cc._RFpush(t,"8f09amlE9tMc7y1HXb6bWQ5","hand_outCardEvent");var s=cc.Class({name:"OutCardEvent",ctor:function(){var e=arguments[0];this.handNode=e.getChildByName("hand"),this.clickNum=0,this.clickNode=null,this.isCanOperate=!0,this.isCanPlay=!1,this.handCardNodes=this.handNode.children,this._andClick_()},reset:function(){this.clickNum=0,this.clickNode&&(this.clickNode.y=0),this.clickNode=null,this.isCanOperate=!0,this.isCanPlay=!1},mahRunBack:function(){this.clickNode&&(this.clickNode.y=0,this.clickNode=null)},outCardEventAttr:function(e,t){return void 0===t?this[e]:this[e]=t},_andClick_:function(){for(var e=0;e<17;e++)"touches"in cc.sys.capabilities?(console.log("outCardEvent--touches"),this.handCardNodes[e].on("touchstart",this._clickDown_,this),this.handCardNodes[e].on("touchend",this._clickUp_,this)):"mouse"in cc.sys.capabilities&&(console.log("outCardEvent--mouse"),this.handCardNodes[e].on("mousedown",this._clickDown_,this),this.handCardNodes[e].on("mouseup",this._clickUp_,this))},_clickDown_:function(e){if(this.isCanOperate){window.audio.playEffect("select");
var t=e.target;this.clickNode===t?this.clickNum=2:null===this.clickNode?(this.clickNode=t,this.clickNum=1,t.runAction(cc.moveBy(.03,0,15))):(this.clickNum=3,t.runAction(cc.moveBy(.03,0,15)),this.clickNode.y=0,this.clickNode=t)}},_clickUp_:function(e){if(this.isCanOperate){var t=e.target;if(2===this.clickNum&&this.isCanPlay){this.isCanPlay=!1;var o=clientUser.attr("cardsHandOrder")[t.name];console.log("点击选中的牌是："+o);var s=clientUser.attr("youJingCards");s?(s.indexOf(o)!==-1?(clientUser.displayHead("youJing",s.type),clientUser.send({type:s.type,message:o})):clientUser.send({message:o,type:"outCard"}),clientUser.attr("youJingCards",null)):clientUser.send({message:o,type:"outCard"}),clientUser.outCard(o),this.clickNode.y=0,this.clickNode=null}}}});t.exports=s,cc._RFpop()},{}],helpText:[function(e,t,o){"use strict";cc._RFpush(t,"75127I329pPn61627elU7iQ","helpText");var s="一、基本用词说明\n    1.手牌：牌局开始时发给自己的牌，即自己手中的所有牌(自己可看见牌的正面，别人只能看见牌的背面)，庄家起始17张手牌，闲家起始16张手牌。\n    2.明牌：即自己 碰、明杠、暗杠、补杠、吃 后，摆放在自己手牌旁边的所有牌。\n    2.庄家：每一局都有一个人是庄家，第一局的庄家是房间的创建者。庄家赢牌或输牌时，输赢要翻倍。\n    3.闲家：每一局都有三个人是闲家。庄家赢牌或输牌时，输赢按照正常的处分流程计算。\n    4.序数牌：指 1筒~9筒、1条~9条、1万~9万。\n    5.箭牌：指 红中、发财、白板。\n    6.顺子：筒牌中连续三张牌可组成一个顺子，条牌中连续三张牌可组成一个顺子，万牌中连续三张牌可组成一个顺子，\n            注意 一张红中+一张发财+一张白板不能组成一个顺子。 一张东风+一张西风+一张南风也不能组成一个顺子\n            如：一张3筒+一张4筒+一张5筒为一顺，一张3筒+一张4条+一张5筒不是一顺。\n    7.一对或对子：指手牌中两张完全一样的牌。\n    8.刻子：指手牌中三张完全一样的牌。\n    9.杠子：指手牌中的四张完全一样的牌。\n    10.杠：指 明杠、暗杠、补杠。\n    11.自摸：自己摸了一张牌后，胡牌了，称为自摸。\n    12.放炮：自己打了一张牌被别人胡了，就称自己 放炮。\n    13.接炮：别人打了一张牌被自己胡了，就称自己 接炮。\n    14.臭庄：臭庄即黄庄，当牌墙里剩下16张牌时，如果没有人到牌，即臭庄。臭庄当盘的庄家继续做下一盘的庄家，庄家的底这时要翻倍，乘以2倍，再次臭庄再乘。\n    15.连庄：如果庄家到牌则发生连庄，连庄的时候底分翻倍，没有杀三。\n    16.杠: 补杠可以抢杠(到), 暗杠不显示牌(只有自己能看到自己的暗杠的牌，别人只能看到牌的背面)。\n    17.金牌: 任意牌都可能成为金牌，由翻金产生,金牌相当于混牌，百搭，其功能是可以替代除花牌之外的任何牌。翻开的那张金牌，相当于打了一张牌。\n            金牌可以为花牌，当金牌为黑花(梅兰竹菊)时，红花(春夏秋冬)需要补牌，否则，黑花需要补牌。\n    18.翻金：金牌的产生称为翻金。庄家补牌结束后，跳牌处的人扔出两个骰子，根据点数从牌墙最后一张牌数数，最后落在哪张上翻开即为 金。\n    19.单游：当手上拿金牌作为将牌的时候可以将一张将牌打出，这样在下一圈内摸到任何牌均可到牌，此时到牌称为单游。\n    20.双游：如果单游时摸到的牌为金牌，此时可以将金牌打出，金牌打出后，开始双游,本圈内所有玩家都只能自摸，不能平到(点炮胡或抢杠胡)。\n            当游金时摸到的牌正好可以代另一张金(能到牌的情况下)，可以将金打出，此时其它三家不能平到，自己如没能自摸双游就没过，如能自摸则算游过\n    21.三游：双游时如果继续摸到金牌，此时仍旧将金牌打出，视为三游，三游时本圈内所有玩家都只能自摸，不能平到(点炮胡或抢杠胡)。\n            当双游时，摸到的牌又是一张金，可以再次将金打出，此时其它三家只能各摸一张牌，如没能自摸三游就没过，如能自摸则算游过，此为三游\n    22.到: 即 到牌，也叫胡牌，“到”和“胡”的意义在本文档中完全一样。\n    23.三金倒：起手或在臭庄前只要手里拿三个金不管其他牌是什么牌，即可到牌。\n    24.天到，起手就到牌。\n    25.平到：别人打出来的牌其中一家到，称为平到。\n    26.盘: 也称局。当盘(当局)，是指当前正在打的一局牌。\n\n二、基本规则\n    1.所有的牌共144张：其中 筒牌(共计36张)：1筒~9筒，每种牌4张\n                          条牌(共计36张)：1条~9条，每种牌4张\n                          万牌(共计36张)：1万~9万，每种牌4张\n                          箭牌(共计12张)：红中、发财、白板，各4张\n                          风牌(共计16张)：东、南、西、北，各4张\n                          花牌(共计8张)： 春、夏、秋、冬(这四张牌称为红花)，梅、兰、竹、菊(这四张牌称为黑花)。\n    2.一局牌有四个玩家，有庄家和闲家之分。其中一个是庄家，另外三个是闲家，庄家起始拿牌17张，闲家起始拿牌16张。\n    3.可以碰：即 其它玩家出了一张牌，而自己手牌中有 与这张牌完全相同的牌 两张，则自己可以选择碰，碰后要出一张牌。\n    4.可以明杠：即 其它玩家出了一张牌，而自己手牌中有 与这张牌完全相同的牌 三张，则自己可以选择明杠，明杠后要拿一张牌。\n    5.可以暗杠：即 玩家自己拿了一张牌后，而自己手牌中有 四张完全相同的牌， 则自己可以选择暗杠，暗杠后要拿一张牌。\n    6.可以补杠：即 玩家自己拿了一张牌后，而玩家自己以前碰过这张牌，则玩家自己可以选择补碰，补后要拿一张牌。\n    7.可以吃：即 其它玩家出了一张牌，而自己手中有两张牌能与出的那张牌组合成顺子，则自己可以选择吃，吃后要出一张牌。\n    8.可以补花：即 玩家自己摸到一张花牌(这张花牌不是金牌时)，可以补花，补花是自动进行的，补花后会拿一张牌。\n    9.没有报听的功能。\n    10.没有一炮多响(即其它玩家出了一张牌后，只能有一个人可以胡这张牌)。\n    11.在一局中只要有玩家胡牌了 或 牌只乘下16张时，本局结束。\n    12.玩家的坐位按加入房间的先后顺序顺时针依次确定。\n    13.所有玩家以逆时针方向的顺序轮流拿牌。\n\n三、基本到牌规则\n        1. 到牌的基本牌型有且仅有以下六种：\n            （1）11.123.123.123.123.123 （2）11.123.123.123.123.111 （3）11.123.123.123.111.111\n            （4）11.123.123.111.111.111 （5）11.123.111.111.111.111 （6）11.111.111.111.111.111\n            注: 1) 11表示手牌中两张一样的牌，即对子。在到牌牌型中专门称其为将牌。\n                2) 111表示手牌中三张一样的牌 或 明牌中三张或四张一样的牌。可以是刻子，也可以是明牌中的明杠、暗杠、补杠、碰。\n                3) 123表示一个顺子。可以是手牌中的顺子，也可以是明牌中的吃。\n\n        2. 每次到牌，只能是以下这六种到牌方式中的一种(注意，不可能同时是两种或以上)：\n            (1)平到  (2)自摸  (3)游金  (4)双游  (5)三游  (6)三金倒\n            注: 当局结束后，总是以上述6种中的一种到牌类型计算每个人的得分\n\n        3.只要有一个人胡牌了，一局就结束。\n        4.没有一炮多响，如果有多个人同时胡一张牌，而当有人出了这张牌后，从打这张牌的人开始按逆针方向最近的那个人胡牌，其它人是不能胡的。\n        5.荒庄了什么都不算，大家分数不增不减, 也就是一旦荒庄了，不管有没有杠或金，大家都得0分。\n\n四、庄家规则\n    1．如果是第一局，则由房间的创建者作为庄家；\n    2．如果当盘庄家胡牌，则下一局的庄家不变(还是他自己), 称为连庄，连庄的时候底分翻倍。\n    3. 如果当盘闲家胡牌，则按逆时方向轮流坐庄。\n    4. 如果当盘臭庄，则当盘的庄家继续做下一盘的庄家，庄家的底这时要翻倍，再次臭庄再乘。\n    5．庄家胡牌时，庄家要多赢一番，闲家胡牌时，庄家要多输一番。\n\n五、算分规则\n    1.杠上炮(自己暗杠、补杠、补花后，打一张牌，被别人胡了)\n      杠上花(自己暗杠、补杠、补花后，摸一张牌，自己胡牌了)\n      到牌时，不论是否是 杠上炮 或 杠上花 的情况，均对得分计算不产生影响。\n    2.抢杠(一个玩家补杠时，另一个玩家可以胡他补杠的牌)，这种情况对得分计算不产生影响。\n    3.到牌时不论是否是 清一色，对得分计算不产生影响。\n    4.到牌时不论是缺门还是不缺门，对得分计算不产生影响。\n    5.到牌后如果是 11.111.111.111.111.111 这种牌型（通常称为大对子）, 对得分计算不产生影响。\n\n    到牌奖励，牌计分如下：\n        1、平到：1翻\n        2、自摸：2翻\n        3、单游 ：3翻+半个底分\n        4、三金倒 ：2.5番\n        5、双游：4翻+半个底分\n        6、三游：5翻+半个底分\n        7、天到：3番\n        注：到牌后，除去到牌的人，其余未到的人也要算番数，手中的番数相加减。\n            庄家翻倍: 不管是不是庄家点炮还是到牌输赢都要双倍\n            杠: 补杠和明杠、金都是一个底分, 暗杠底分*2, 到的人杠,三家都要给, 没到人的杠,没到的人给（2个人）\n            花杠: 花牌不是金牌牌局结束前有4个及以上花就可以当一个杠，有8个及以上花就可以当两个杠\n            局数打法中如果连庄,则底分依次翻倍。但在分数打法中，如果连庄底分不翻\n\n六、注意事项\n    1.自己有一张东、一张西，别人打一张南，自己是不可以吃的，因为风牌或箭牌不可以成顺。\n    2.只有自己的上家打的牌，自己才可以吃，其它人打的牌，自己是不能吃的。\n    3.没有报听。\n    4.自己胡牌时或自己没胡牌时，手中有四个二万（没杠出去），不算作一杠，也不会特别的加分或减分。\n    5.自己胡牌时或自己没胡牌时，碰了三万，但手中还有一个三万（没杠出去），不算作一杠，也不会特别的加分或减分。\n    6.没有杀三。\n    7.没有八张花：所谓“八张花”是指：起手或在臭庄前只要能够拿到八张花牌，不管其他牌是什么牌，即可胡牌，八张花按游金计算。\n    8.平胡就是点炮胡或抢杠胡。\n\n    9.花牌是不会存在于手牌中的(因为只要摸到花牌，就必须马上补牌)，如果金牌是花牌，则可以放在手中，而不能当作花牌补牌出去。\n    10.关于花杠：\n        1）如果金牌是春，手中有春、夏，并且已经补花了：竹、菊，这种情况不能算作一个花杠。\n        2）如果金牌是二万，并且已经补花了：竹、菊、春、夏、秋、冬，只算作一个花杠(而不是三个或其它，因为现在有5张花牌，不会加番)\n        3）如果金牌是二万，并且已经补花了：竹、菊、春、夏，算作一个花杠。\n        4）如果金牌是二万，并且已经补花了：竹、菊，这样的情况不算花杠，不会加番，也就是说不会对最终的算分有任何影响。\n    11.关于胡牌：\n        1).没有将牌，就不可能胡牌 (即不存在类似假胡、烂牌的胡牌情况).\n        2).东、南、北或中、发、白 算作一个顺子，但东、南、中不算作一顺子。（对，字牌只能用来碰、用作刻子、用来明杠或暗杠、胡牌，而不能有吃或用作顺子）\n        3).大对子胡牌不算翻（11.111.111.111.111.111这种牌型）, 即没有大对子这一说。\n七、关于金牌\n    1.如果金牌是梅，则梅、兰、竹、菊都是金牌，此时梅、兰、竹、菊不可以补花，而春、夏、秋、冬算作花牌，必须补花(即只要摸到就自动补出去，而不能放在手中)\n    2.如果金牌是春，则春、夏、秋、冬都是金牌，此时春、夏、秋、冬不可以补花，而梅、兰、竹、菊算作花牌，必须补花(即只要摸到就自动补出去，而不能放在手中)\n    3.金牌是三万，如果手中两个二筒，两个金牌(三万)，金牌不可以当二筒用，所以是不能进行暗杠的。类似的还有碰、吃、补杠的情况也都是不可以的。\n      金牌只能用在替代自己的牌来计算胡牌， 还可用作游金， 不可作它用。\n    4.金牌是三万，如果手中有两个三万，别人打一张三万，自己可以碰，但碰了以后，就只能算作普通牌了（不再将这几张金牌算作一杠）。\n    5.玩家自己打一张金牌，其它玩家是不能胡这张牌的。\n    6.自己一旦将金牌打出去了(包括游金时)，最后自己算分时，就不会再算这张金牌的分了，而且即使游金成功了，也不再算那一张打出去的金牌。\n    8.金牌只有被放在手牌中才算一杠，如果碰出去或打出去，就不再算一杠。\n    7.如果金牌是三万：\n        1）自己有手中有四万、五万，自己的上家打一张三万，自己是不可以吃的。\n        2）自己已经碰了三万，自己以后是不可能再摸到三万的，因为金牌只会有三张牌，翻开的那张金牌，相当于打了一张牌。\n        5）自己能胡三万和六万，当别人打了一张三万后，自己是不可以胡的。\n\n\n八、关于单游\n    1.单游的前提是自己已经胡牌了，但是因为自己手中的将牌中有一张是金牌，所以自己可以不选择胡，而进行单游。\n    2.如果自己已经是胡牌了，并且将牌中两张牌都是金牌，则打出一张金牌，就跳过了单游而直接进行双游。\n    3.如果将牌中恰好有一张牌是金牌，则打出这张金牌，并且真的在下一圈内胡牌了，不算作单游，因为单游时，手中必须要有至少一张金牌。\n    4.如果将牌中恰好有一张牌是金牌，则打出另一张牌，并且真的在下一圈内胡牌了，算作单游。\n    5.单游、双游、三游中的‘一圈’是指：\n        从自己游金开始，直到自己下次摸牌，而不论其它人摸了几张牌。也就是说从自己游金出了一张牌后，不管是什么原因只要自己有机会再摸一张牌，就算游了一圈。\n\n        应注意以下几点：\n            1.游金开始后，玩家自己可以明杠其它玩家的牌，这样可以提前完成并成功游金，因为明杠后自己会摸一张牌。\n            2.游金开始后，玩家自己可以碰、吃， 这样不算游金失败，而是认为游金还没完成，一直到自己摸牌，才算游金成功。\n            3.游金开始后，其它玩家可以吃、碰、明杠、暗杠、补花、补杠。\n            4.单游开始后，则其它玩家可以点炮胡、抢杠胡、自摸胡，其它玩家应该跟没有游金一样，都可以胡，因为别人并不知道你正在单游。\n            5.如果是双游和三游的游金，则其它玩家不能点炮胡、抢杠胡，而只能自摸胡。\n            6.当玩家游金成功时，玩家自己也可以暗杠、补杠、补花，然后再胡牌，也算作游金成功。\n            7.当玩家自己游金时，其它玩家不需要知道他正在游金，而且其它玩家也不知道他正在游金。\n            8.自己在游金时，别人打一张牌，自己可以胡，但是胡牌后，算作普通的胡牌而不是游金。\n            9.如果自己游金失败，自己不会多输分，按照正常的算分逻辑进行算分。\n\n九、关于双游和三游\n    1.如果自己有两个金牌，可以跳过单游并直接进行双游。\n    2.如果单游时摸到的牌不是金牌，也有可能进行双游，只要自己还能打出金牌并能胡任意牌，就可以进行双游。\n    3.单游时摸到的牌是花牌，可以补花后再进行双游。\n    4.单游成功后，自己可以进行补杠、暗杠、补花，然后进行双游。\n    5.如果单游时摸到的牌不是金牌，比如是摸到四筒，但手中牌其它地方用金牌代替了四筒，此时就可以将金牌打出，进行双游。\n    6.打出的牌只能是金牌，才能双游，而不论这张金牌是不是刚刚摸到的(有可能刚才摸到的不是金牌，或自己补杠或暗杠了再次摸的牌)。\n    7.三游的情况和双游的一模一样。\n    8.最多只会有三游，因为一共有四张金牌，而在翻金时，已经翻了一张(用了一张)，还剩下三张金牌。\n\n十、关于房间\n    在创建房间时，可以选择玩法：\n    1. 8局的房间： 没有连庄算打了一局，连庄了也算打了一局， 黄庄了还是算打了一局。\n                  也就是说，只要一局结束，就算打了8局中的一局。实际打的局数达到8局后，整个房间结束。\n    2. 16局的房间： 含义与8局的房间类似。\n    3. 100分的房间： 是指不管实际打了多少局，只要本局中的四个玩家中有一个玩家输的分数大于100分，整个房间就结束了。\n    3. 200分的房间： 含义与100分的房间类似。\n    4. 单金不能平到的房间： 指的是当玩家手中恰好有一张金牌时，不能以平到的方式胡牌。注意，这里的一张金牌，包括了胡的那张牌。比如，当手中没有金牌时，是不能以平到的方式胡一张金牌的。\n                          (如果没有金牌或刚好有二张金牌或刚好有三张金牌，还是可以平到的)\n    5. 双金不能平到的房间： 指的是当玩家手中恰好有二张金牌时，不能以平到的方式胡牌。(如果没有金牌或刚好有一张金牌或刚好有三张金牌，还是可以平到的)\n\n十一、关于黄庄和三金倒\n    1.如果自己是闲家，刚拿到牌时，手中有三个金，只能等自己摸牌后，再胡牌(以三金倒的方式)。\n    2.如果已经黄庄了，就算自己手中有三个金牌，也不能胡了。\n    3.如果最后一张牌是自己拿的(自己摸了牌后，还剩16张牌)，而自己手中有三张金牌，自己可以胡或三金倒。\n    4.如果最后一张牌是自己拿的(自己摸了牌后，还剩16张牌)，而自己此时不能胡牌，打一张牌后，如果别人能胡、碰、明杠，则别人可以胡、碰、杠。\n      杠了拿不了牌，也不用出牌，本局就结束了。如果碰了，必须出一张牌，其它玩家也能进行胡、碰、明杠。\n    5.如果最后一张牌是自己拿的(自己摸了牌后，还剩16张牌)，而自己手中还有补杠、暗杠的牌，则自己不能进行暗杠、补杠，只是杠拿不了牌，也不用出牌，本局就结束了。\n    6.如果最后一张牌是自己拿的(自己摸了牌后，还剩16张牌)，而自己恰好摸到一张花牌，自己是可以补花的，只是拿不了牌，本局结束。\n";t.exports=s,cc._RFpop()},{}],inputNumPanel:[function(e,t,o){"use strict";cc._RFpush(t,"ccb80+jCMxPRrBiBALcFC4k","inputNumPanel");var s=cc.Class({name:"InputNumPanel",properties:{numsLabel:null,numBtnNodes:null,hasInputedArr:[],maxLen:6},ctor:function(){this.numsLabel=cc.find("Canvas/joinRoomAlert/alertContent/joinRoomBg/roomId/inputBg/roomIdStr").getComponent(cc.Label),this.numBtnNodes=cc.find("Canvas/joinRoomAlert/alertContent/joinRoomBg/keyboard").children,this.reset(),this._addClick_()},reset:function(){this.hasInputedArr.length=0,this.numsLabel.string="房间号为6位数字"},_addClick_:function(){for(var e=0;e<this.numBtnNodes.length;e++)this.numBtnNodes[e].on("click",function(e){this._pressBtnClick_(e.target.name)},this)},_pressBtnClick_:function(e){switch(window.audio.playEffect("waterClick"),e){case"del":0!==this.hasInputedArr.length&&this._del_();break;case"reset":this.reset();break;default:this.maxLen>this.hasInputedArr.length&&(this._add_(e),this.maxLen==this.hasInputedArr.length&&(clientUser?(getGI("hall").loading("start"),console.log("点击完成，发送了join消息"),clientUser.send({message:this.hasInputedArr.join(""),type:"join"})):(getGI("hall").errorReminder("未连接到服务器!"),this.reset())))}},_add_:function(e){this.hasInputedArr.push(e),this.numsLabel.string=this.hasInputedArr.join(" ")},_del_:function(){this.hasInputedArr.pop(),0===this.hasInputedArr.length?this.numsLabel.string="房间号为6位数字":this.numsLabel.string=this.hasInputedArr.join(" ")}});t.exports=s,cc._RFpop()},{}],isOnline_controller:[function(e,t,o){"use strict";cc._RFpush(t,"fdc79Gh8ZRLnrW3kD1fRhO0","isOnline_controller");var s=cc.Class({name:"IsOnline_controller",leaveLine_controller:function(e){console.log("执行 leaveLine_controller..."),console.log(e);var t=e.message,o=room.getUser(t);o.attr("state",0),o.displayHead("leaveLine","show"),room.attr("isCanDismiss",!1),room.dismissAlert&&(room.dismissAlert.reset(),room.dismissAlert.dismissShow("hide")),room&&room.displayRoomInfo&&room.displayRoomInfo("offLine",o.attr("nickName")+" 离线了..."),clientUser.sleep(),socket.finishMsg("leaveLine")},reConnect_controller:function(e){console.log("执行 reConnect_controller..."),console.log(e);var t=e.message,o=room.getUser(t);o.attr("state",1),o.displayHead("leaveLine","hide");var s=!0;room.forEach(function(e){if(e&&0===e.attr("state"))return s=!1,"break"}),room.attr("isCanDismiss",s),o!==clientUser&&room&&room.displayRoomInfo&&room.displayRoomInfo("onLine",o.attr("nickName")+" 上线了..."),s&&clientUser&&clientUser.wake(),socket.finishMsg("reConnect")},exitRoom_controller:function(e){console.log("客户端--执行 exitRoom_controller...");var t=e.message;if(!room||room.msgIsMeSend(t))return void socket.finishMsg("exitRoom");var o=room.getUser(t);o.attr("zhuang")?cc.director.loadScene("hall",function(){window.reset(),getGI("hall").display({nickName:clientUser.attr("nickName"),userId:clientUser.attr("userId"),headIcon:clientUser.attr("faceIcon"),roomCardNum:clientUser.attr("roomCards")}),socket.finishMsg("exitRoom")}):(this._resetUserHead_(o),room.removeUser(o),socket.finishMsg("exitRoom"))},_resetUserHead_:function(e){e.displayHead({zhuang:"hide",faceIcon:"man0",nickName:"hide",score:"hide",ok:"hide",leaveLine:"hide",isHost:"hide"})}});t.exports=s,cc._RFpop()},{}],isOnline_serverController:[function(e,t,o){"use strict";cc._RFpush(t,"ad899l2NcJKFJa6ZYtfU84w","isOnline_serverController");var s=cc.Class({name:"IsOnline_serverController",leaveLine_controller:function(e){},reConnect_controller:function(e){},exitRoom_controller:function(e){console.log("服务器--执行 exitRoom_controller...");for(var t=e.openId,o=window.serverData.roomUsers,s=0;s<o.length;s++)o[s].userId===t&&(localServer.send({type:"exitRoom",message:t}),o[s]=null)}});t.exports=s,cc._RFpop()},{}],join_controller:[function(e,t,o){"use strict";cc._RFpush(t,"c79a5zZg9FCqJuZzBmv0qB4","join_controller");var s=e("msgComm"),n=cc.Class({name:"Join_controller",create_controller:function(e){console.log("客户端--执行 create_controller..."),this.join_controller(e)},join_controller:function(e){console.log("客户端--执行 join_controller...");var t=e.message,o=t.p,n=t.players;n.sort(function(e,t){return e.order-t.order});var r=s.getMeInfo(n,o);t.meIndex=r,t.room.activeIndex=t.room.activer-1,s.initRoom(t,function(){socket.finishMsg("join")})}});t.exports=n,cc._RFpop()},{msgComm:"msgComm"}],join_serverController:[function(e,t,o){"use strict";cc._RFpush(t,"65c78OucxlPkIdBZnFv2Y+3","join_serverController");var s=e("serverMsgData"),n=cc.Class({name:"Join_serverController",ctor:function(){this.joinNum=0,this.createMsg},create_controller:function(e){console.log("服务器--执行 create_controller...",e);var t=e.message;this.createMsg=t;var o={roomId:8002,totalJuNum:t.ju,opt:t.opt,creator:window.testData.test_users[0].userId,meOrder:1,roomUsers:[window.testData.test_users[0]]};window.serverData.roomUsers=[window.testData.test_users[0]],localServer.send({type:"create",message:o}),this.joinNum=1,this.addThreeUserAuto()},join_controller:function(e){console.log("服务器--执行 join_controller...",e);for(var t=e.openId,o={roomId:8002,totalJuNum:this.createMsg.ju,opt:this.createMsg.opt,creator:window.testData.test_users[0].userId,meOrder:1,roomUsers:[]},n=window.testData.test_users,r=null,i=0;i<n.length;i++)if(n[i].userId===t){r=n[i];break}for(var a=window.serverData.roomUsers,c=!1,l=0,i=0;i<a.length;i++)if(null===a[i]){a[i]=r,l=i+1,c=!0;break}c||(a.push(r),l=a.length),o.roomUsers=window.serverData.roomUsers;for(var d=0,i=0;i<o.roomUsers.length;i++)o.roomUsers[i]&&d++;if(4===d){setTimeout(function(){s.sendStartMsg()},1e3)}o.meOrder=l,localServer.send({type:"join",message:o})},exitOneUserAuto:function(){setTimeout(function(){window.socket.send({type:"exitRoom",openId:window.testData.test_users[2].userId})},8e3)},joinOneUserAuto:function(){setTimeout(function(){window.socket.send({message:8002,type:"join",openId:window.testData.test_users[2].userId})},14e3)},addThreeUserAuto:function(){var e=this;this.timer=setInterval(function(){return e.joinNum>3?(e.joinNum=0,void clearInterval(e.timer)):(window.socket.send({message:8002,type:"join",openId:window.testData.test_users[e.joinNum].userId}),void e.joinNum++)},1e3)}});t.exports=n,cc._RFpop()},{serverMsgData:"serverMsgData"}],juEnd_controller:[function(e,t,o){"use strict";cc._RFpush(t,"c5a77zT0QVAfLB5YkPE6cnb","juEnd_controller");var s=cc.Class({name:"JuEnd_controller",juScore_controller:function(e){console.log("客户端-- 执行 juScore_controller..."),console.log(e),room.attr("period","endJu"),room.singleResult.refreshMahResult(e.message.players),room.singleResult.singelResultShow("show");var t=e.message.room;room.displayPointer(-1),room.currentJuNum=t.useJuNum,room.totalJuNum=t.totalJuNum,room.totalQuan=t.totalQuanNum,room.currentQuan=t.useQuanNum,room.nextZhuang=parseInt(t.zhuangId),socket.finishMsg("juScore")}});t.exports=s,cc._RFpop()},{}],mahjongMngBase:[function(e,t,o){"use strict";cc._RFpush(t,"0b11201TahDV7pX7OOztS28","mahjongMngBase");var s=e("combination"),n=e("cardsMng"),r=cc.Class({name:"MahjongMngBase",ctor:function(){var e=arguments[0];this.userSelf=e.userSelf,this.mahView=this._getMahView_(),this.mahModel=new n,this.animate=this._getAnimate_()},reset:function(){console.log("mahjongMng.js重置了。"),this.mahView.reset(),this.mahModel.reset()},setCards:function(){this.mahModel.setCards(arguments[0].handCards),this.mahModel.operateAttr("cardsArr",arguments[0].mingCards),this.mahModel.outArr("cardsArrOgn",arguments[0].outAllCards),this.mahModel.outArr("cardsArrN",arguments[0].outCards),this.userSelf.attr("huaCards",arguments[0].huaCards),this.userSelf.attr("isClient")&&room.nextZhuang&&room.setZhuang(room.nextZhuang)},showCards:function(e){switch(e){case"beiMian":var t=this.mahModel.getHandCard();console.log(this.userSelf.attr("nickName")+" 的用户的牌是： "+t),this.mahView.convertHM("handd");var o=t;"number"!=typeof t&&(o=t.length),o&&o%3===2?this.mahView.displayHand(o,"wantOutCard"):this.mahView.displayHand(o);break;case"mix":this.mahView.convertHM("hand");var t=this.userSelf.attr("originalCards");t&&(t.length?t.length%3===2:t%3===2)?this.mahView.displayHand(t,"wantOutCard"):this.mahView.displayHand(t);break;case"order":var t=this.mahModel.getHandCard();t&&(t.length?t.length%3===2:t%3===2)?this.mahView.displayHand(t,"wantOutCard"):this.mahView.displayHand(t);break;case"allOut":var s=this.mahModel.outArr("cardsArrN");this.mahView.operateAllOutCard(s);break;case"allMing":var n=this.mahModel.operateAttr("cardsArr");this.mahView.displayAllMing(n);break;case"buHua":this.startBuHua();break;case"isCanOutCard":this.userSelf.attr("isClient")&&this.mahView.outCardEventAttr("isCanPlay",this.userSelf.attr("zhuang"));break;case"showPanel":var r=this.userSelf.attr("operateArr");r&&r.length>0&&this.showPanel(r)}},startBuHua:function(){var e=this.userSelf.attr({userId:void 0,haveCard:void 0,huaCards:void 0,processPeriod:void 0}),t=e.huaCards;if(t){for(var o=0,s=this,n=e.haveCard,r=e.userId,i=e.processPeriod,o=0;o<t.length;o++){var a=t[o].h,c=t[o].c,l=s.mahModel.operate({p:r,t:"buHua",c:a,from:r,m:[a]});if(n)if("inCard"===i){var d=s.mahModel.getHandCard();s.mahView.displayHand(d),s.mahModel.inCard(c),s.mahView.inCard(c)}else{s.mahModel.inCard(c);var d=s.mahModel.getHandCard();s.mahView.displayHand(d)}else s.mahModel.inCard(c);s.mahView.displayOneMing(l)}this.userSelf.attr("huaCards",null)}},inCard:function(e,t){console.log("执行了mahjongMngBase.inCard"+e),this.mahModel.inCard(e),this.mahView.inCard(e),this.userSelf.attr("isClient")&&(t&&t.length>0?(this.userSelf.attr("operateArr",t),this.showPanel(TOOL.converOperate(t))):this.mahView.outCardEventAttr("isCanPlay",!0))},outCard:function(e,t){this.mahModel.outCard(e);var o=this.mahModel.getHandCard();this.mahView.displayHand(o);var s=this.mahView.operateOutCard("forward",e);s.active=!0,room.playOutSkipAni(s)},rebuildOutCard:function(e,t){var o=this.mahView.getCurrentNode();o&&this.animate.outCardAni(o,e,function(e){room.playOutSkipAni(e)}),room.msgIsMeSend(t)&&this.outCardPCheck(e,t)},_getMahView_:function(){var e=new s;return e.combination([{name:"mingCardMng",combineType:"method",type:"class",config:this.userSelf.attr("userNode")},{name:"outCardMng",combineType:"method",type:"class",config:this.userSelf.attr("userNode")},{name:"handCardMng",combineType:"method",type:"class",config:this.userSelf}]),this.userSelf.attr("isClient")?e.combination([{name:"hand_operatePanel",combineType:"method",type:"class",config:this.userSelf.attr("userNode")},{name:"hand_outCardEvent",combineType:"method",type:"class",config:this.userSelf.attr("userNode")}]):e},_getAnimate_:function(){var e=new s;return e.combination([])}});t.exports=r,cc._RFpop()},{cardsMng:"cardsMng",combination:"combination"}],mahjongMng:[function(e,t,o){"use strict";cc._RFpush(t,"4e15bbvWQlDtbZ2s98nsxv6","mahjongMng");var s=e("mahjongMngBase"),n=cc.Class({name:"MahjongMng","extends":s,ctor:function(){},checkNum:function(e){return this.mahModel.checkNum(e)},operateItem:function(e){var t=e.t;switch(t){case"buHua":this._buHua_(e);break;case"pong":case"chi":case"mingGang":case"anGang":case"buGang":this.comm(e);break;case"youJing":case"shuangYou":case"sanYou":case"sanJingDao":console.log("mahjongMng.js- "+t);break;case"hu":}},_buHua_:function(e){var t=this.mahModel.operate(e);this.mahView.displayOneMing(t)},comm:function(e){this.mahModel.operate(e);var t=this.mahModel.getHandCard();"pong"===e.t||"chi"===e.t?this.mahView.displayHand(t,"wantOutCard"):this.mahView.displayHand(t),this.mahView.displayOneMing(e),this.userSelf.attr("isClient")&&(this.mahView.outCardEventAttr("isCanPlay",!0),this.mahView.outCardEventAttr("isCanOperate",!0))},showPanel:function(e){this.mahView.showPanel(e),this.mahView.outCardEventAttr("isCanOperate",!1),this.userSelf.attr("isCanOperateClick",!0)}});t.exports=n,cc._RFpop()},{mahjongMngBase:"mahjongMngBase"}],messageAlert_click:[function(e,t,o){"use strict";cc._RFpush(t,"d4b57gd8fVN+orD7M6kY/QR","messageAlert_click"),cc.Class({"extends":cc.Component,onLoad:function(){this._test_msg_()},_test_msg_:function(){var t=e("messageAlert_display");this.test_messageAlert=new t,this.test_messageAlert.generateWord(this.wordClick,this),this.test_messageAlert.generateFace(this.faceClick,this)},_test_msgShow_:function(){for(var t=e("userMsgShow"),o=0;o<4;o++)"touches"in cc.sys.capabilities?cc.find("Canvas/roomMain/user"+o+"/nickBorder/nickName").on("touchend",function(e){var t=e.target.parent.parent.name.charAt(4);this.test_userMsg.test_setUser(cc.find("Canvas/roomMain/user"+t))},this):"mouse"in cc.sys.capabilities&&(console.log("bb"),cc.find("Canvas/roomMain/user"+o+"/nickBorder/nickName").on("mouseup",function(e){var t=e.target.parent.parent.name.charAt(4);this.test_userMsg.test_setUser(cc.find("Canvas/roomMain/user"+t))},this));this.test_userMsg=new t({userNode:cc.find("Canvas/roomMain/user0")})},wordBtnClick:function(e){window.audio.playEffect("waterClick"),cc.find("Canvas/msgAlert/alertContent/wordScrollView").active=!0,cc.find("Canvas/msgAlert/alertContent/faceScrollView").active=!1},faceBtnClick:function(e){window.audio.playEffect("waterClick"),cc.find("Canvas/msgAlert/alertContent/faceScrollView").active=!0,cc.find("Canvas/msgAlert/alertContent/wordScrollView").active=!1},wordClick:function(e){this.test_messageAlert.messageAlertShow("hide"),window.audio.playEffect("waterClick");var t=e.target.name;console.log("发送了文字信息："+t),console.log({message:t,type:"word"}),clientUser.send({message:t,type:"word"})},faceClick:function(e){window.audio.playEffect("waterClick");var t=e.target.name;console.log("选中的表情的名字是："+t),this.test_messageAlert.messageAlertShow("hide"),console.log({message:t,type:"face"}),clientUser.send({message:t,type:"face"})}}),cc._RFpop()},{messageAlert_display:"messageAlert_display",userMsgShow:"userMsgShow"}],messageAlert_display:[function(e,t,o){"use strict";cc._RFpush(t,"71fedXzD4JC7qoL9ef86YJO","messageAlert_display");var s=cc.Class({name:"MessageAlert_display",ctor:function(){var e=getGI("roomGlobalRes");this.face_Atlas=e.face_Atlas,this.wordPref=e.wordPref,this.facePref=e.facePref,this.messageAlert=cc.find("Canvas/msgAlert"),this.words=window.words,this.wordBox=cc.find("alertContent/wordScrollView/view/content",this.messageAlert),this.faceBox=cc.find("alertContent/faceScrollView/view/content",this.messageAlert)},generateFace:function(e,t){for(var o=this.face_Atlas.getSpriteFrames(),s=0;s<o.length;s++)this._addOneFace_(o[s],e,t)},generateWord:function(e,t){for(var o=this.words.order,s=0;s<o.length;s++)this._addOneWord_(o[s],s,e,t)},messageAlertShow:function(e){e="show"===e,this.messageAlert.active=e},_addOneWord_:function(e,t,o,s){var n=cc.instantiate(this.wordPref);n.getComponent(cc.Label).string=this.words.data[e],n.name=e,n.on("click",o,s),n.parent=this.wordBox},_addOneFace_:function(e,t,o){var s=cc.instantiate(this.facePref);s.getComponent(cc.Sprite).spriteFrame=e,s.name=e.name,s.on("click",t,o),s.parent=this.faceBox}});t.exports=s,cc._RFpop()},{}],mingCardMng:[function(e,t,o){"use strict";cc._RFpush(t,"01fd1MMxEZNjqExpZCmnkcW","mingCardMng");var s=cc.Class({name:"MingCardMng",ctor:function(){var e=arguments[0];this.buHuaNode=e.getChildByName("buHua"),this.showNode=e.getChildByName("ming"),this.mj_Atlas=getGI("roomGlobalRes").mj_Atlas,this.currentShowNodeArr=null,this.showPointer=-1,this.hideAllMingCard()},reset:function(){console.log("mingCardMng.js重置了。"),this.showPointer=-1,this.hideAllMingCard()},hideAllMingCard:function(){for(var e=null,t=0;t<5;t++)e=this.showNode.getChildByName("operate"+t),e.active=!1,e.getChildByName("mj3").active=!1;for(var o=this.buHuaNode.children,t=0;t<8;t++)o[t].active=!1},displayAllMing:function(e){for(var t=0;t<e.length;t++)this.displayOneMing(e[t])},displayOneMing:function(e){"buGang"===e.t?this.currentShowNodeArr=this.showNode.getChildByName("operate"+e.index).children:"buHua"===e.t?this.currentShowNodeArr=this.buHuaNode.children:(this.showPointer++,this.currentShowNodeArr=this.showNode.getChildByName("operate"+this.showPointer).children),this.currentShowNodeArr.sort(function(e,t){return e.name.slice(-1)-t.name.slice(-1)});var t=e.c,o=e.m,s=0,n="";switch(e.t){case"chi":n=!1;for(var r=s;r<o.length;r++)this._setMj_(this.currentShowNodeArr[r],o[r]),o[r]===t?this.currentShowNodeArr[r].getChildByName("mask").active=!0:this.currentShowNodeArr[r].getChildByName("mask").active=!1;return void(""!==n&&(this.currentShowNodeArr[3].active=n,this.currentShowNodeArr[3].parent.active=!0));case"pong":o.push(t),n=!1;break;case"mingGang":o.push(t),n=!0;break;case"buGang":s=3,o=["mjB","mjB","mjB","mjB"],n=!0;break;case"anGang":o=e.p===clientUser.attr("userId")?["mjB","mjB","mjB",t]:["mjB","mjB","mjB","mjB"],n=!0;break;case"buHua":for(var r=s;r<o.length;r++)this.currentShowNodeArr[r].getComponent(cc.Sprite).spriteFrame=this.mj_Atlas.getSpriteFrame("y_"+o[r]),this.currentShowNodeArr[r].active=!0;return}for(var r=s;r<o.length;r++)this._setMj_(this.currentShowNodeArr[r],o[r]),this.currentShowNodeArr[r].getChildByName("mask").active=!1;""!==n&&(this.currentShowNodeArr[3].active=n,this.currentShowNodeArr[3].parent.active=!0)},_setMj_:function(e,t){var o=e.getComponent(cc.Sprite).spriteFrame.name;switch(t){case"mjB":o.search("mingb")===-1&&(o=o.replace("ming","mingb"),e.getComponent(cc.Sprite).spriteFrame=this.mj_Atlas.getSpriteFrame(o)),e.getChildByName("hua").active=!1;break;case"mjF":o.search("mingb")!==-1&&(o=o.replace("mingb","ming"),e.getComponent(cc.Sprite).spriteFrame=this.mj_Atlas.getSpriteFrame(o)),e.getChildByName("hua").active=!0;break;default:o.search("mingb")!==-1&&(o=o.replace("mingb","ming"),e.getComponent(cc.Sprite).spriteFrame=this.mj_Atlas.getSpriteFrame(o)),e.getChildByName("hua").getComponent(cc.Sprite).spriteFrame=this.mj_Atlas.getSpriteFrame(t),e.getChildByName("hua").active=!0}}});t.exports=s,cc._RFpop()},{}],msgCache:[function(e,t,o){"use strict";cc._RFpush(t,"c6c9crJfjxEqolCL67FNNIY","msgCache");var s=cc.Class({name:"MsgCache",ctor:function(){this.controllerMap=arguments[0],this.msgArr=[],this.timer=null,this.isProcessing=!1},reset:function(){0===this.msgArr.length,clearInterval(this.timer),this.timer=null,this.isProcessing=!1},pushMsg:function(e){if(this.isProcessing)this.msgArr.push(e),null===this.timer&&this._registerTimer_();else{if(!msgCondition[e.type])return this.isProcessing=!0,console.log("2开始处理 "+e.type+" 消息！"),void this.controllerMap.accessController(e);for(var t=msgCondition[e.type].length,o=!0,s=0;s<t;s++)if(!window.CONDITIONS[msgCondition[e.type][s]](e)){o=!1;break}if(o)return this.isProcessing=!0,console.log("1开始处理 "+e.type+" 消息！"),void this.controllerMap.accessController(e);this.msgArr.push(e),null===this.timer&&this._registerTimer_()}},_registerTimer_:function(){var e=this;this.timer=setInterval(function(){!e.isProcessing&&e.msgArr.length>0&&e._processMsg_(),0===e.msgArr.length&&(clearInterval(e.timer),e.timer=null)},100)},_processMsg_:function(){for(var e,t=-1,o=this.msgArr,s=0;s<o.length;s++){var n=o[s];if(msgCondition[n.type]){for(var r=msgCondition[n.type],i=!0,a=0;a<r.length;a++)if(!window.CONDITIONS[msgCondition[n.type][a]](n)){i=!1;break}i&&(t=s)}else t=s}return this.msgArr[t]&&(e=this.msgArr.splice(t,1)),!(e===o||!e||1!==e.length)&&(this.isProcessing=!0,console.log("3开始处理 "+n.type+" 消息！"),this.controllerMap.accessController(e[0]),!0)}});t.exports=s,cc._RFpop()},{}],msgComm:[function(e,t,o){"use strict";cc._RFpush(t,"8fae6BIwkJNR6gJzmTvIS0R","msgComm");var s=e("user"),n=e("room"),r={initHall:function(e){var t=new s({attr:{roomCards:e.cards,faceIcon:e.faceIcon,nickName:e.nickName,openId:e.openId,userId:e.userId,sex:1===e.sex?"man":"woman",ip:e.ip,isVip:e.isVip,isClient:!0}});t.combineSend(),window.clientUser=t,t.send({type:"share",message:window.location.href}),getGI("hall").display({nickName:t.attr("nickName"),userId:t.attr("userId"),headIcon:t.attr("faceIcon"),isVip:t.attr("isVip"),roomCardNum:t.attr("roomCards")})},initRoom:function(e,t){var o=e.room;e.players;if(window.room)this.addUser(e,"one"),t&&t();else{console.log("如果自己还没进入房间"),this.createRoom(o),this.initSetting(o);var s=this;cc.director.loadScene("room",function(){console.log("场景加载完成"),window.audio.stopBgMusic(),window.audio.playMusic("playingBg"),s.roomLoaded(e),t&&t()})}},createRoom:function(e){var t=1===e.totalQuanNum||2===e.totalQuanNum?1:3===e.totalQuanNum||4===e.totalQuanNum?0:1;window.room=new n({roomId:+e.roomId,totalQuan:+e.totalQuanNum,currentJuNum:+e.useJuNum,currentQuan:t})},roomLoaded:function(e){TOOL.resetData(),setGI("roomSceneFinished",!0),room.combineAction(),room.displayRoomInfo({roomId:room.roomId,inviteBtn:"show",juCount:{currentJuNum:room.currentQuan,totalJuNum:room.totalQuan},arithmetic:"setting"}),TOOL.replaceShareUrl(room.roomId),this.addUser(e),clientUser.attr("zhuang")&&room.displayRoomInfo("exit","hide"),room.attr("period","readying")},addUser:function(e,t){var o,n=e.room,r=e.players,i=e.meIndex;if("one"===t){var a=r[i];o=new s,this._andOneUser_(o,a,n)}else{var c=r.length;clientUser.attr("joinOrder",r[i].order-1);for(var l=c-1;l>-1;l--){var a=r[l];o=l!==i?new s:clientUser,this._andOneUser_(o,a,n)}}},_andOneUser_:function(e,t,o){var s=t.order-1,n=clientUser.attr("joinOrder"),r=(s<n?4:0)-(n-s),i=t.userInfo;e.attr({roomCards:i.cards,faceIcon:i.faceIcon,nickName:i.nickName,openId:i.openId,userId:i.userId,joinOrder:s,positionOrder:r,sex:1===i.sex?"man":"woman",ip:i.ip,whoseVoice:1===i.sex?"b":"g",isVip:i.isVip,state:i.state,isReady:i.ready,isHost:o.creator==i.userId,isActive:o.activeIndex===s,zhuang:i.userId==o.zhuangId});var a=t.outAllCards,c=a&&a.length>0?a[0]:"";e.combineAction(),e.attr("naPaiInfo").cardName=c,this._displayHead_(e),room.addUser(e)},_displayHead_:function(e){var t=e.attr({faceIcon:void 0,zhuang:void 0,sex:void 0,isHost:void 0,state:void 0,isReady:void 0,nickName:void 0,roomScore:void 0});e.displayHead({zhuang:t.zhuang?"show":"hide",faceIcon:t.faceIcon,nickName:t.nickName,score:t.roomScore,ok:t.isReady?"show":"hide",leaveLine:0===t.state?"show":"hide",isHost:t.isHost?"show":"hide"})},initSetting:function(e){var t=JSON.parse(e.opt),o=e.totalQuanNum,s=t[0],n=t[1];o=1===o?"8局":2===o?"16局":3===o?"100分":4===o?"200分":0,s=1===s?"2分":2===s?"4分":3===s?"8分":0,n=1===n?"单金不能平到":2===n?"双金不能平到":0,room.attr({ju:o,diFeng:s,fanXin:n})},getMeInfo:function(e,t){for(var o=0;o<e.length;o++)if(e[o].userInfo.userId===t)return o}};t.exports=r,cc._RFpop()},{room:"room",user:"user"}],msgConfig:[function(e,t,o){"use strict";cc._RFpush(t,"96836IX0t1EdL9d8nNvlApO","msgConfig");var s={start:1,ready:2,join:3,login:4,create:5,heart:6,outCard:7,hu:8,napai:9,huang:10,pong:11,gang:12,chi:13,ziMo:15,sanJingDao:16,youJing:17,shuangYou:18,sanYou:19,juScore:20,roomScore:21,tianHu:22,youJingZhong:23,shuangYouZhong:24,sanYouZhong:25,dismiss:30,dismissing:31,record:32,leaveLine:33,reConnect:34,rebuild:35,exitRoom:36,buHua:38,share:37,error:99,guo:50,buGang:51,anGang:52,mingGang:58,face:55,word:56},n={error_controller:["join","error","ready"],napai_controller:["napai","buHua"],juEnd_controller:["juScore","roomScore"],msgSend_controller:["word","face"],operate_controller:["buGang","anGang","ting","hu","mingGang","chi","pong","youJing","shuangYou","sanYou","tianHu","ziMo","sanJingDao","guo"],outCard_controller:["outCard","youJingZhong","shuangYouZhong","sanYouZhong"],start_controller:["login","start"],dismiss_controller:["ready","dismissing","dismiss"],join_controller:["create","join"],buGangCheck_controller:["wantBuGang","buGangCheck"],
record_controller:["record"],isOnline_controller:["leaveLine","reConnect","exitRoom"],rebuild_controller:["rebuild"],share_controller:["share","heart"]};!function(e){for(var t in e)e[e[t]]=t}(s),s.convert=function(e){var t;return"s"in e?(t=e,t.errMsg=e.e,t.type=this[e.t],t.message=e.m,t.success=e.s):(t={},t.t=this[e.type],t.m=e.message,t.p=e.openId),t},t.exports={messageType:s,controllerMap:n},cc._RFpop()},{}],msgSend_controller:[function(e,t,o){"use strict";cc._RFpush(t,"b2697dGIztLu45tAALfqPh8","msgSend_controller");var s=cc.Class({name:"MsgSend_controller",word_controller:function(e){console.log("执行 word_controller...");var t=e.message,o=room.getUser(t.p);o.say({type:"word",value:t.m,whoseVoice:o.attr("whoseVoice")}),socket.finishMsg("word")},face_controller:function(e){console.log("执行 face_controller...");var t=e.message,o=room.getUser(t.p);o.say({type:"face",value:t.m}),socket.finishMsg("face")}});t.exports=s,cc._RFpop()},{}],msgStartRun:[function(e,t,o){"use strict";cc._RFpush(t,"803ebAkzBlDUL8t+K6WerW8","msgStartRun");var s={startRun:function(e,t){console.log("执行 _startRun_..."),room.goldCard=e.room.goldCard,this._initUser_(e),this._initRoom_(e.room.cardNum),this._showCards_(e);var o=e.players[e.meIndex].order-1,s=e.room.activeIndex;room.acitveIndex=s>=o?s-o:4+s-o,room.displayPointer(room.acitveIndex),room.setActiveUser(room.acitveIndex);var n=e.players[e.meIndex].handCards.length;n%3===2&&(room.displayPointer(clientUser.attr("positionOrder")),room.setActiveUser(clientUser.attr("positionOrder")),clientUser.setAttr("isCanPlay",!0)),t?0===room.acitveIndex&&clientUser.wake():clientUser.sleep(),setGI("rebuildFinished",!0),socket.finishMsg("rebuild"),room.attr("isCanShowAllResult",!1)},_initUser_:function(e){room.forEach(function(t,o){var s=e.players[t.attr("joinOrder")];t.combineMahjong();var n=s.handCards;n=""===n[0]?n.length:n,TOOL.converOperate(s.optMsgs);var r=s.huaCards;r&&r.length>0&&s.optMsgs.push({p:t.userId,t:"buHua",c:"",from:t.userId,m:r}),t.setCards({handCards:n,outCards:s.outCards,outAllCards:s.outAllCards,mingCards:s.optMsgs,huaCards:null}),t.displayHead({ok:"hide"})})},_initRoom_:function(e){room.attr("period","playing"),room.runHeadNoTime(),console.log("头像运动！！！！"),room.displayRoomInfo({playingLayer:"show",timer:"show",juCount:{currentJuNum:room.currentJuNum,totalJuNum:room.totalQuan},restCardNum:"show"}),room.diceToggle("hide"),room.displayPointer(room.acitveIndex),room.setActiveUser(room.acitveIndex),room.attr("readyArr").length=0,room.attr("isCanShowAllResult",!1),room.attr("restCardNum",e)},_showCards_:function(){room.forEach(function(e){e.mahjongMng.mahView.convertHM("hand"),e.showCards("order"),room.displayRoomInfo("goldCard",room.goldCard),e.showCards("allOut"),e.showCards("allMing")}),setGI("buHuaOver",!0)}};t.exports=s,cc._RFpop()},{}],msgsMng:[function(e,t,o){"use strict";cc._RFpush(t,"83429g++d9DUIAabrYr25C8","msgsMng");var s=e("msgs"),n=e("serverControllerMapMng"),r=cc.Class({name:"MsgsMng",ctor:function(){this.msgs=s,this.msgTimer=null,this.serverController=new n({controllerMap:window.serverControllerMap})},run:function(){var e=this;this.msgTimer=setInterval(function(){if(0===e.msgs.length)clearInterval(e.msgTimer),this.msgTimer=null;else{var t=e.msgs.shift();console.log(t)}},2e3)},receive:function(e){e=window.serverMessageType.convert(e),this.serverController.accessController(e)},send:function(e){!e.errMsg&&(e.errMsg=null),!e.success&&(e.success=!0),e=window.serverMessageType.convert(e),window.socket.onmessage(e)}});t.exports=r,cc._RFpop()},{msgs:"msgs",serverControllerMapMng:"serverControllerMapMng"}],msgs:[function(e,t,o){"use strict";cc._RFpush(t,"9e157uQ/E9MH4ZnI5e7zDqA","msgs");var s=[{t:"4",m:{cards:1e3,faceIcon:"5350b36d56b6e054.jpg",nickName:"玩家10004",openId:"10004",userId:10004,sex:1,ip:"192.168.75.1"},e:null}];t.exports=s,cc._RFpop()},{}],napai_controller:[function(e,t,o){"use strict";cc._RFpush(t,"f8ddauJu25G2ZfihAD9ZrnI","napai_controller");var s=cc.Class({name:"InCard_controller",napai_controller:function(e){var t=e.message,o=t.c,s=t.who,n=room.getUser(s);if(room.attr("restCardNum",t.cardNum),room.setActiveUser(s),room.displayPointer(room.getNextActiveIndex(s)),null==o)return void socket.finishMsg("napai");if(o&&(clientUser.attr("naPaiInfo").cardName=o),TOOL.deleteStart(n,e.e),n.inCard(o,t.cardNum,e.e),room.msgIsMeSend(s)){var r=o.charAt(0);o===room.goldCard||"i"!==r&&"h"!==r||clientUser.send({type:"buHua",message:o})}socket.finishMsg("napai")},buHua_controller:function(e){var t=e.message,o=t.c,s=t.h,n=t.who,r=room.getUser(n);return room.attr("restCardNum",t.cardNum),room.setActiveUser(n),room.displayPointer(room.getNextActiveIndex(n)),null==o?void socket.finishMsg("buHua"):(o&&(clientUser.attr("naPaiInfo").card=o),r.operateItem({p:n,t:"buHua",c:s,from:n,m:[s]}),TOOL.deleteStart(r,e.e),r.inCard(o,t.cardNum,e.e),void socket.finishMsg("buHua"))}});t.exports=s,cc._RFpop()},{}],node_hall_broadcast:[function(e,t,o){"use strict";cc._RFpush(t,"c87831bGzNI1Zq/V6FQqq85","node_hall_broadcast"),cc.Class({"extends":cc.Component,onLoad:function(){this.msgNode=cc.find("hallMain/namePanel/broadcastBg/maskNode/broadStr",this.node),this.msgNode.x=(this.msgNode.parent.width+this.msgNode.width)/2,this.num=0,this.isFinished=!0,this.broadcastAni(),this.timer=setInterval(this.broadcastAni.bind(this),3e4)},onDestroy:function(){clearInterval(this.timer),this.isFinished=!0,console.log("销毁了...")},broadcastAni:function(e){this.num++,this.num>15&&(clearInterval(this.timer),this.isFinished=!0);var t=this.msgNode;if(e&&(t.getComponent(cc.Label).string=e,clearInterval(this.timer),this.timer=setInterval(this.broadcastAni.bind(this),3e4),t.x=(t.parent.width+t.width)/2),this.isFinished){this.isFinished=!1;var o=t.width/100*1.5,s=t.getPosition(),n=s.sub(cc.v2(t.parent.width+t.width,0));console.log("运行了广告！"),t.runAction(cc.sequence(cc.delayTime(1.5),cc.moveTo(o,n),cc.callFunc(function(){t.setPosition(s),this.isFinished=!0},this)))}}}),cc._RFpop()},{}],node_hall_display:[function(e,t,o){"use strict";cc._RFpush(t,"af034VHtWtNTIgjTVE/uQlq","node_hall_display");var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=e("inputNumPanel");cc.Class({"extends":cc.Component,properties:{hallMain_atlas:cc.SpriteAtlas},display:function(e,t){if("object"===("undefined"==typeof e?"undefined":s(e)))for(var o in e)this._displayOne_(o,e[o]);else this._displayOne_(e,t)},_displayOne_:function(e,t){switch(e){case"nickName":cc.find("hallMain/namePanel/userInfo/nickName",this.node).getComponent(cc.Label).string=t;break;case"userId":cc.find("hallMain/namePanel/userInfo/userId",this.node).getComponent(cc.Label).string="ID: "+t;break;case"headIcon":TOOL.setUserHeadIcon(cc.find("hallMain/namePanel/userInfo/headIcon",this.node),t);break;case"roomCardNum":cc.find("hallMain/namePanel/userInfo/diamondFrame/num",this.node).getComponent(cc.Label).string=t;break;case"isVip":t=t?"vipGold":"vipGray",cc.find("hallMain/namePanel/userInfo/vip",this.node).getComponent(cc.Sprite).spriteFrame=this.hallMain_atlas.getSpriteFrame(t)}},showRecordAlert:function(e){e="show"===e,this.node.getChildByName("recordAlert").active=e,this.node.getChildByName("main").active=!e},onLoad:function(){this.inputNumPanel=new n,setGI("hall",this),console.log("调整hall的高度"),this.node.height=cc.winSize.height;var e=this;cc.view.setResizeCallback(function(){console.log("调整hall的高度"),e.node.height=cc.winSize.height,console.log(cc.winSize)})},disableHall:function(){cc.find("Canvas/hallMain/medium/createIcon").getComponent(cc.Button).interactable=!1,cc.find("Canvas/hallMain/medium/joinIcon").getComponent(cc.Button).interactable=!1,cc.find("Canvas/hallMain/medium/friendCreate").getComponent(cc.Button).interactable=!1,cc.find("Canvas/hallMain/medium/mahjongHallIcon").getComponent(cc.Button).interactable=!1},errorReminder:function(e){this.getComponent(cc.Animation).stop("reminder"),clearTimeout(n);var t=cc.find("Canvas/reminder"),o=t.getChildByName("describe");o.getComponent(cc.Label).string=e,this.getComponent(cc.Animation).play("reminder");var s=this,n=setTimeout(function(){return s?(s.getComponent(cc.Animation).stop("reminder"),void clearTimeout(n)):void clearTimeout(n)},4e3)},loading:function(e){var t=cc.find("Canvas/loading");switch(e){case"start":t.active=!0,this.getComponent(cc.Animation).play("loading");break;case"end":this.getComponent(cc.Animation).stop("loading"),t.active=!1}}}),cc._RFpop()},{inputNumPanel:"inputNumPanel"}],node_helpAlert:[function(e,t,o){"use strict";cc._RFpush(t,"92f1diDcptDVJHKTRecU6rm","node_helpAlert"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){getGI("hall").loading("end")}}),cc._RFpop()},{}],node_recordAlert:[function(e,t,o){"use strict";cc._RFpush(t,"d2fbe7PCRBKY4Q8TqlHfXOH","node_recordAlert"),cc.Class({"extends":cc.Component,properties:{recordItemPref:cc.Prefab},showRecords:function(e,t){var o=cc.find("recordAlert/alertContent/recordBg/scrollView/view/content",this.node),s=o.getChildByName("recordItem");if(s&&s.removeFromParent(),"append"===t)this._createRecordItem_(e,o);else{for(var n=e.length-o.childrenCount,r=o.children,i=Math.min(e.length,o.childrenCount),a=0;a<i;a++)this._showOneItem_(e[a],r[a]);if(n>=0)this._createRecordItem_(e.slice(a),o);else for(var c=a;c<o.childrenCount;c++)r[a].active=!1}},_createRecordItem_:function(e,t){for(var o=0;o<e.length;o++){var s=cc.instantiate(this.recordItemPref);this._showOneItem_(e[o],s,o),s.name="recordItem"+o,s.getChildByName("seeBack").on("click",this.node_seeMeVideo,this),s.parent=t}},_showOneItem_:function(e,t,o){t.active=!0,cc.find("orderFrame/order",t).getComponent(cc.Label).string=o+1,cc.find("borderFrameRoom/roomId",t).getComponent(cc.Label).string=e.roomId,t.getChildByName("time").getComponent(cc.Label).string=e.time;for(var s,n,r,i=t.getChildByName("users").children,o=0;o<4;o++)s=i[o],n=e.usersInfo[o].nickName,s.getComponent(cc.Label).string=n+":",r=e.usersInfo[o].score,s.getChildByName("score").getComponent(cc.Label).string=r>0?"+"+r:r},node_seeOtherVideoClick:function(e){console.log("点击了‘查看其它人的录像按钮’"),window.audio.playEffect("waterClick")},node_seeMeVideo:function(e){var t=cc.find("borderFrameRoom/roomId",e.target.parent).getComponent(cc.Label).string;console.log("点击了‘回放按钮’"+t),window.audio.playEffect("waterClick")},onLoad:function(){getGI("hall").recordAlert=this},_test_record_:function(){var e=[{roomId:"6389292",time:"2016-11-29 14:03",usersInfo:[{nickName:"如花",score:118},{nickName:"如花",score:78},{nickName:"如花",score:-28},{nickName:"如花",score:-28}]},{roomId:"6389293",time:"2016-14-29 14:05",usersInfo:[{nickName:"如花1",score:-28},{nickName:"如花",score:8},{nickName:"如花",score:0},{nickName:"如花",score:-28}]},{roomId:"6389295",time:"2016-11-41 14:03",usersInfo:[{nickName:"如花2",score:458},{nickName:"如花",score:-28},{nickName:"如花",score:-28},{nickName:"如花",score:-28}]},{roomId:"6389232",time:"2016-12-29 14:03",usersInfo:[{nickName:"如花3",score:-8},{nickName:"如花",score:-218},{nickName:"如花",score:428},{nickName:"如花",score:-28}]},{roomId:"6389232",time:"2016-12-29 14:03",usersInfo:[{nickName:"如花3",score:-8},{nickName:"如花",score:-218},{nickName:"如花",score:428},{nickName:"如花",score:-28}]},{roomId:"6380032",time:"2016-12-29 14:03",usersInfo:[{nickName:"如花3",score:-8},{nickName:"如花",score:-218},{nickName:"如花",score:428},{nickName:"如花",score:-28}]},{roomId:"6384534",time:"2016-12-29 14:03",usersInfo:[{nickName:"如花3",score:-8},{nickName:"如花",score:-218},{nickName:"如花",score:428},{nickName:"如花",score:-28}]},{roomId:"6389238",time:"2016-12-29 14:03",usersInfo:[{nickName:"如花3",score:-8},{nickName:"如花",score:-218},{nickName:"如花",score:428},{nickName:"如花",score:-28}]},{roomId:"6459232",time:"2016-12-29 14:03",usersInfo:[{nickName:"如花3",score:-8},{nickName:"如花",score:-218},{nickName:"如花",score:428},{nickName:"如花",score:-28}]}];this.showRecords(e)}}),cc._RFpop()},{}],node_settingAlert:[function(e,t,o){"use strict";cc._RFpush(t,"8bb11HNdNpE85xPtOsOWF4O","node_settingAlert"),cc.Class({"extends":cc.Component,properties:{},node_toggle:function(e){var t=e.target,o=t.getComponent(cc.Toggle).isChecked;t.getChildByName("close").active=!o,t.getChildByName("open").active=o,t.name.search("music")!==-1?setGI("musicVolume",o):setGI("effectVolume",o),window.audio&&window.audio.refreshVolume()},node_langualeToggle:function(e){var t=e.target.parent;t.getComponent(cc.Toggle).isChecked;setGI("language",t.name),window.audio&&window.audio.refreshLanguage()},_initSetting_:function(){var e=cc.find("Canvas/settingAlert/alertContent/settingBg"),t=getGI("musicVolume");cc.find("music/musicToggle/close",e).active=!t,cc.find("music/musicToggle/open",e).active=t,cc.find("music/musicToggle",e).getComponent(cc.Toggle).isChecked=t;var o=getGI("effectVolume");cc.find("effect/effectToggle/close",e).active=!o,cc.find("effect/effectToggle/open",e).active=o,cc.find("effect/effectToggle",e).getComponent(cc.Toggle).isChecked=o;var s,n;"puTongHua"===getGI("language")?(s=!0,n=!1):(s=!1,n=!0),cc.find("languageTG/puTongHuaLabel/puTongHua",e).getComponent(cc.Toggle).isChecked=s,cc.find("languageTG/mingNanLabel/mingNan",e).getComponent(cc.Toggle).isChecked=n},node_dismissClick:function(e){return window.audio.playEffect("waterClick"),room.attr("isCanDismiss")?(this.node.active=!1,void room.dismissAlert.startDismiss()):void room.displayRoomInfo("onLine","只有房间中的全部成员同时在线时，才能解散房间！")},onLoad:function(){setGI("setAlert",this),this._initSetting_()}}),cc._RFpop()},{}],operateCards_operate:[function(e,t,o){"use strict";cc._RFpush(t,"6dc1bgSfGFOZqVJbFCVyYmr","operateCards_operate");var s=cc.Class({name:"OperateCards_operate",ctor:function(){var e=arguments[0];this.operateCards=e.operateCards,this.handCards=e.handCards},getCardsOperateArr:function(){return this.operateCards.cardsOperateArr},isHasOperate:function(e){var t=!1;return this.operateCards.forEach(function(o){if(o.t===e)return t=!0,"break"}),t}});t.exports=s,cc._RFpop()},{}],operateCards:[function(e,t,o){"use strict";cc._RFpush(t,"a7d68oo+9xHiKphZ78iFsiE","operateCards");var s=cc.Class({name:"OperateCards",ctor:function(){arguments[0];this.cardsOperateArr=[]},operateAttr:function(e,t){switch(e){case"cardsArr":if(void 0==t)return this.cardsOperateArr;this.cardsOperateArr=t}},reset:function(){console.log("operateCards.js重置了。。"),this.cardsOperateArr.length=0},addOperate:function(e){switch(e.t){case"buGang":return this._buGang_(e.c);case"buHua":return this._buHua_(e.c,e);default:this.cardsOperateArr.push(e)}},_buGang_:function(e){for(var t=void 0,o=0;o<this.cardsOperateArr.length;o++)if(t=this.cardsOperateArr[o],"pong"===t.t&&t.c===e)return t.index=o,t;return t},_buHua_:function(e,t){for(var o,s=0;s<this.cardsOperateArr.length;s++)if(o=this.cardsOperateArr[s],"buHua"===o.t)return o.m.push(e),o;return this.cardsOperateArr.push(t),t},forEach:function(e,t){t=t||this;for(var o,s=this.cardsOperateArr,n=0;n<s.length;n++)switch(o=e.call(t,s[n],n,s)){case"break":break;case"continue":continue}}});t.exports=s,cc._RFpop()},{}],operate_controller:[function(e,t,o){"use strict";cc._RFpush(t,"ccda8SjBLxKpYdlDaMd3LwK","operate_controller");var s=cc.Class({name:"Operate_controller",pong_controller:function(e){console.log("客户端-- 执行 pong_controller..."),this._processOperate_(e),socket.finishMsg("pong")},chi_controller:function(e){console.log("客户端-- 执行 chi_controller..."),this._processOperate_(e),socket.finishMsg("chi")},mingGang_controller:function(e){console.log("客户端-- 执行 mingGang_controller..."),this._processOperate_(e),room.msgIsMeSend(e.message.p)&&clientUser.send({type:"napai"}),socket.finishMsg("mingGang")},buGang_controller:function(e){console.log("客户端-- 执行 buGang_controller..."),this._processOperate_(e),room.msgIsMeSend(e.message.p)&&clientUser.send({type:"napai"}),socket.finishMsg("buGang")},anGang_controller:function(e){return console.log("客户端-- 执行 anGang_controller..."),room.msgIsMeSend(e.message.p)?(clientUser.send({type:"napai"}),void socket.finishMsg("anGang")):(this._processOperate_(e),void socket.finishMsg("anGang"))},_processOperate_:function(e){var t=window.TOOL.converOperate(e.message),o=t.p,s=room.getUser(o),n=room.getNextActiveIndex(o);s.operateItem(t),console.log("operate: 下一当前用户是： "+n),room.setActiveUser(n),room.displayPointer(n),clientUser.setAttr("isCanOperate")},youJing_controller:function(e){console.log("客户端-- 执行 youJing_controller..."),this._huProcess_(e),socket.finishMsg("youJing")},shuangYou_controller:function(e){console.log("客户端-- 执行 shuangYou_controller..."),this._huProcess_(e),socket.finishMsg("shuangYou")},sanYou_controller:function(e){console.log("客户端-- 执行 sanYou_controller..."),this._huProcess_(e),socket.finishMsg("sanYou")},_huProcess_:function(e){room.msgIsMeSend(e.message.p)&&clientUser.send({type:"juScore",message:e.message})},sanJingDao_controller:function(e){console.log("客户端-- 执行 sanJingDao_controller..."),this._huProcess_(e),socket.finishMsg("sanJingDao")},ziMo_controller:function(e){console.log("客户端-- 执行 ziMo_controller..."),this._huProcess_(e),socket.finishMsg("ziMo")},tianHu_controller:function(e){console.log("客户端-- 执行 tianHu_controller..."),this._huProcess_(e),socket.finishMsg("tianHu")},hu_controller:function(e){console.log("客户端-- 执行 hu_controller..."),this._huProcess_(e),socket.finishMsg("hu")}});t.exports=s,cc._RFpop()},{}],operate_serverController:[function(e,t,o){"use strict";cc._RFpush(t,"500c9jk/2RF75rN0pMsef2R","operate_serverController");var s=cc.Class({name:"Operate_serverController",pong_controller:function(e){console.log("服务器-- 执行 pong_controller..."),localServer.send({type:window.messageType[e.message.t],message:e.message})},mingGang_controller:function(e){console.log("服务器-- 执行 mingGang_controller..."),localServer.send({type:window.messageType[e.message.t],message:e.message})},chi_controller:function(e){console.log("服务器-- 执行 chi_controller..."),localServer.send({type:window.messageType[e.message.t],message:e.message})},buGang_controller:function(e){console.log("服务器-- 执行 buGang_controller..."),localServer.send({type:window.messageType[e.message.t],message:e.message})},anGang_controller:function(e){console.log("服务器-- 执行 anGang_controller..."),localServer.send({type:window.messageType[e.message.t],message:e.message})},hu_controller:function(e){console.log("服务器-- 执行 hu_controller..."),socket.finishMsg("hu")}});t.exports=s,cc._RFpop()},{}],outCardMng:[function(e,t,o){"use strict";cc._RFpush(t,"3aa4eZMHdxBuqM7r1pVdTMW","outCardMng");var s=cc.Class({name:"OutCardMng",ctor:function(){this.userNode=arguments[0],this.mj_Atlas=getGI("roomGlobalRes").mj_Atlas,this.outNodes=this.userNode.getChildByName("out"),this.reset()},reset:function(){console.log("outCardMng.js重置了。"),this.outPointerIndex=-1,this.outLineIndex=0,this._hideAllNodes_(this.outNodes)},_hideAllNodes_:function(e){for(var t=e.children,o=0;o<t.length;o++)t[o].active=!1},operateOutCard:function(e,t){var o;switch(e){case"forward":this._nextPointer_(),o=this.outNodes.getChildByName("mj"+this.outLineIndex+this.outPointerIndex),o.getChildByName("hua").getComponent(cc.Sprite).spriteFrame=this.mj_Atlas.getSpriteFrame(t);break;case"backward":o=this.outNodes.getChildByName("mj"+this.outLineIndex+this.outPointerIndex),this._prevPointer_()}return o},_nextPointer_:function(){this.outPointerIndex++,0===this.outLineIndex&&this.outPointerIndex>6?(this.outLineIndex=1,this.outPointerIndex=0):1===this.outLineIndex&&this.outPointerIndex>8&&(this.outLineIndex=2,this.outPointerIndex=0)},_prevPointer_:function(){this.outPointerIndex--,this.outPointerIndex<0&&(0===this.outLineIndex?this.outPointerIndex=0:1===this.outLineIndex?(this.outLineIndex=0,this.outPointerIndex=6):2===this.outLineIndex&&(this.outLineIndex=1,this.outPointerIndex=8))},operateAllOutCard:function(e){for(var t,o=e.length,s=0;s<o;s++)t=this.operateOutCard("forward",e[s]),t.active=!0}});t.exports=s,cc._RFpop()},{}],outCard_controller:[function(e,t,o){"use strict";cc._RFpush(t,"fe9c3vqeS9CILRqnRmDC8c7","outCard_controller");var s=cc.Class({name:"OutCard_controller",outCard_controller:function(e){console.log("客户端-- 执行 outCard_controller..."),this._processOutCard_(e),socket.finishMsg("outCard")},_processOutCard_:function(e){var t=e.message.m,o=e.message.p;if(!room.msgIsMeSend(o)){var s=room.getUser(o);if(e.e){var n=e.e;n&&n.length>0&&(clientUser.attr("operateArr",n),clientUser.mahjongMng.showPanel(TOOL.converOperate(n)))}else clientUser.send({type:"guo"});s.outCard(t,o)}},_processYouJingCard_:function(e){var t=e.message.m,o=e.message.p;if(!room.msgIsMeSend(o)){var s=room.getUser(o);if(s.displayHead("youJing",e.type),e.e){var n=e.e;n&&n.length>0&&(clientUser.attr("operateArr",n),clientUser.mahjongMng.showPanel(TOOL.converOperate(n)))}else clientUser.send({type:"guo"});s.outCard(t,o)}},youJingZhong_controller:function(e){console.log("客户端-- 执行 youJingZhong_controller..."),this._processYouJingCard_(e),socket.finishMsg("youJingZhong")},shuangYouZhong_controller:function(e){console.log("客户端-- 执行 shuangYouZhong_controller..."),this._processYouJingCard_(e),socket.finishMsg("shuangYouZhong")},sanYouZhong_controller:function(e){console.log("客户端-- 执行 sanYouZhong_controller..."),this._processYouJingCard_(e),socket.finishMsg("sanYouZhong")}});t.exports=s,cc._RFpop()},{}],outCards_operate:[function(e,t,o){"use strict";cc._RFpush(t,"eca34mVeMNCfLy56x7kbD3w","outCards_operate");var s=cc.Class({name:"OutCards_operate",ctor:function(){this.outCards=arguments[0]},getOutCardNum:function(){return this.outCards.originalCardsOut.length}});t.exports=s,cc._RFpop()},{}],outCards:[function(e,t,o){"use strict";cc._RFpush(t,"d97b6rK5KFFArh5NkAOO3wd","outCards");var s=cc.Class({name:"OutCards",ctor:function(){this.originalCardsOut=[],this.cardsOut=[]},outArr:function(e,t){var o=t;switch(e){case"cardsArrOgn":if(void 0==t)return this.originalCardsOut;this.originalCardsOut.length=0;for(var s=0;s<o.length;s++)this.originalCardsOut.push(o[s]);break;case"cardsArrN":if(void 0==t)return this.cardsOut;this.cardsOut.length=0;for(var s=0;s<o.length;s++)this.cardsOut.push(o[s]);break;case"cardsArrTwo":if(void 0==t)return this.cardsOut;this.originalCardsOut.length=0,this.cardsOut.length=0;for(var s=0;s<o.length;s++)this.cardsOut.push(o[s]),this.originalCardsOut.push(o[s])}},reset:function(){this.cardsOut.length=0,this.originalCardsOut.length=0},pushCard:function(e){return this.originalCardsOut.push(e),this.cardsOut.push(e)},popCard:function(){return this.cardsOut.pop()}});t.exports=s,cc._RFpop()},{}],pageLog:[function(e,t,o){"use strict";cc._RFpush(t,"5daefaMTyJArInWySn+X+AU","pageLog");var s={log:function(e,t){if(0!==getGI("debug")){var o=arguments;if(window.logPref)this._log_(o);else{var s=this;clearInterval(this.timer),this.timer=setInterval(function(){window.logPref&&(clearInterval(s.timer),s.timer=null,s._log_(o))},300)}}},_log_:function(e){for(var t=0;t<e.length;t++){var o=cc.instantiate(window.logPref);o.name="logbar",o.getComponent(cc.Label).string=e[t],o.parent=cc.find("Canvas/pageLog/log/view/content")}},generateLogNode:function(){if(1===getGI("debug")){var e=this;this.pageLogPref?this._generateNode_(this.pageLogPref):cc.loader.loadRes("prefabs/pageLog",function(t,o){e.pageLogPref=o,e._generateNode_(o)}),window.logPref||cc.loader.loadRes("prefabs/logbar",function(e,t){window.logPref=t})}},_generateNode_:function(e){var t=cc.instantiate(e),o=t.getChildByName("logBtn");o.active=!0,o.on("click",function(){var e=t.getChildByName("log"),o=!e.active;e.active=o,t.getChildByName("bg").active=o}),cc.find("log/clearBtn",t).on("click",function(){cc.find("log/view/content",t).removeAllChildren()}),this._addLogClick_(t),t.parent=cc.find("Canvas")},_addLogClick_:function(e){function t(){s++,1===s?o=(new Date).getTime():2===s&&((new Date).getTime()-o<200&&(n.active=!1,r.active=!1),s=0)}var o,s=0,n=e.getChildByName("log"),r=e.getChildByName("bg");"touches"in cc.sys.capabilities?n.on("touchend",t,this):"mouse"in cc.sys.capabilities&&n.on("mouseup",t,this)}};t.exports=s,cc._RFpop()},{}],rebuildMsgMng:[function(e,t,o){"use strict";cc._RFpush(t,"a3e19FDoZtBrrgwUyJh1NrQ","rebuildMsgMng");var s={sendRebuildMsg:function(){localServer.send({type:"rebuild",message:this._getMessageData_()})},_getMessageData_:function(){var e={};return e.msg=null,e.room=this._getRoomData_(),e.players=this._getPlayers_(),e.p=window.testData.test_users[0].userId,e},_getRoomData_:function(){var e={roomId:8002,creator:38929,totalJuNum:"",totalQuanNum:1,opt:[1,2],useJuNum:2,activer:2,step:2,status:0};return e},_getPlayers_:function(){var e=[];window.serverData.roomUsers=[];for(var t=0;t<4;t++){var o={},s=window.testData.test_cardsData[t];o.outAllCards=s.outAllCards,o.outCards=s.outCards,o.handCards=s.handCards,o.cardsShow=s.optMsgs,o.order=t+1,o.userInfo=window.testData.test_users[t],window.serverData.roomUsers.push(o.userInfo),o.currentScore=this._getRandom_(-40,40),o.roomScore=this._getRandom_(-150,150),o.napai="w7",e.push(o)}return e},_getRandom_:function(e,t){return Math.floor(Math.random()*(t-e+1)+e)}};t.exports=s,cc._RFpop()},{}],rebuild_controller:[function(e,t,o){"use strict";cc._RFpush(t,"83ac7gCz2FHyayQAj6n+1bC","rebuild_controller");var s=(e("rebuild_msg_controller"),e("msgStartRun")),n=e("msgComm"),r=cc.Class({name:"Rebuild_controller",rebuild_controller:function(t){console.log("执行 rebuild_controller...");var o=t.message,s=o.p,r=o.players;r.sort(function(e,t){return e.order-t.order});var i=n.getMeInfo(r,s);o.meIndex=i,o.room.activeIndex=o.room.activer-1;for(var a=!0,c=0;c<r.length;c++)a&&0==r[c].userInfo.state&&(a=!1);var l=r[o.meIndex].userInfo;if(n.initHall(l),getGI("hall").disableHall(),n.initRoom(o),this._choose_(o,a),o.msg)var d=setInterval(function(){if(getGI("rebuildFinished")){clearInterval(d),d=null;var t=e("rebuild_msg_controller"),s=new t,n=window.messageType.convert(o.msg);s[n.type+"_controller"]&&s[n.type+"_controller"](n)}},50);console.log("isOnline: ",a)},_choose_:function(e,t){switch(e.room.step){case"1":room.attr("period","readying");var o=setInterval(function(){if(getGI("roomSceneFinished")){clearInterval(o);var e=clientUser.attr("isReady");room.displayRoomInfo({inviteBtn:e?"showCenter":"show",exit:e?"hide":"show"}),setGI("rebuildFinished",!0),socket.finishMsg("rebuild")}},50);break;case"2":room.attr("period","playing");var o=setInterval(function(){getGI("roomSceneFinished")&&(clearInterval(o),s.startRun(e,t))},50);break;case"3":room.attr("period","endJu");var o=setInterval(function(){getGI("roomSceneFinished")&&(clearInterval(o),room.displayRoomInfo({inviteBtn:"hide",exit:"hide"}),setGI("rebuildFinished",!0),socket.finishMsg("rebuild"))},50);break;case"4":var o=setInterval(function(){getGI("roomSceneFinished")&&(clearInterval(o),setGI("rebuildFinished",!0),socket.finishMsg("rebuild"))},50)}}});t.exports=r,cc._RFpop()},{msgComm:"msgComm",msgStartRun:"msgStartRun",rebuild_msg_controller:"rebuild_msg_controller"}],rebuild_msg_controller:[function(e,t,o){"use strict";cc._RFpush(t,"5e8e17fRn9EaIG3g74ZUkNT","rebuild_msg_controller");var s=cc.Class({name:"Rebuild_msg_controller",outCard_controller:function(e){console.log("执行 重构的 outCard_controller..."),console.log(e),clientUser.send({type:"heart",message:e.t})},hu_controller:function(e){console.log("执行 重构的 hu_controller..."),console.log(e),clientUser.send({type:"heart",message:e.t})}});t.exports=s,cc._RFpop()},{}],record_controller:[function(e,t,o){"use strict";cc._RFpush(t,"54f01cXmWZD66neE6YPIRSo","record_controller");var s=cc.Class({name:"Record_controller",record_controller:function(e){console.log("客户端-- 执行record_controller 战绩查询记录数据:",e),getGI("hall").recordAlert.showRecords(e.message),socket.finishMsg("record"),getGI("hall").loading("end")}});t.exports=s,cc._RFpop()},{}],record_serverController:[function(e,t,o){"use strict";cc._RFpush(t,"6165a2q/Z1GWZSvYSqzE7WW","record_serverController");var s=cc.Class({name:"Record_serverController",record_controller:function(e){console.log("服务器--处理战绩查询记录数据:");var t=[{roomId:"43300352",time:"2016-11-09 14:03",usersInfo:[{nickName:"昭君",score:-28},{nickName:"静怡",score:15},{nickName:"西施",score:-28},{nickName:"玉环",score:-28}]},{roomId:"60000352",time:"2016-11-29 14:03",usersInfo:[{nickName:"小强",score:-11},{nickName:"老斯机",score:-95},{nickName:"小兵",score:4},{nickName:"如花",score:-28}]},{roomId:"60000332",time:"2016-11-14 14:03",usersInfo:[{nickName:"周润发",score:-11},{nickName:"张娜拉",score:-95},{nickName:"赵丽颖",score:0},{nickName:"刘德华",score:8}]},{roomId:"73838293",time:"2016-12-29 14:03",usersInfo:[{nickName:"张三丰",score:-11},{nickName:"张无忌",score:-95},{nickName:"周芷若",score:4},{nickName:"灭绝师太",score:-28}]}];localServer.send({type:"record",message:t})}});t.exports=s,cc._RFpop()},{}],roomData:[function(e,t,o){"use strict";cc._RFpush(t,"73476WUBiNB36yuEjmDpauJ","roomData");var s=cc.Class({name:"RoomData",ctor:function(){this.isSetTing=!1,this.isZFBOrder=!1,this.ju="",this.diFeng="",this.fanXin="",this.nextZhuang="",this.readyArr=[],this.period="playing",this.playingPeriod="beiMian",this.showChange=!1,this.dismissingNum=0,this.isCanShowAllResult=!1,this.isCanDismiss=!0,this.restCardNum=83,this.buHuaCallback=[],this.buHuaOnceT=.8}});t.exports=s,cc._RFpop()},{}],roomDisplay:[function(e,t,o){"use strict";cc._RFpush(t,"39d8f6WBHNMqbO9kQabFR/D","roomDisplay");var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=cc.Class({name:"RoomDisplay",ctor:function(){this.restCardNum=cc.find("Canvas/roomMain/topLeft/rest"),this.mj_Atlas=getGI("roomGlobalRes").mj_Atlas,this.num=0},displayRoomInfo:function(e,t){if("object"===("undefined"==typeof e?"undefined":s(e)))for(var o in e)this._setOneAttrDisplay_(o,e[o]);else this._setOneAttrDisplay_(e,t)},_setOneAttrDisplay_:function(e,t){switch(e){case"roomId":cc.find("Canvas/roomMain/topLeft/roomId").getComponent(cc.Label).string="房间: "+t;break;case"juCount":t=1===t.totalJuNum?"局数："+t.currentJuNum+"/8局":2===t.totalJuNum?"局数："+t.currentJuNum+"/16局":3===t.totalJuNum?"分数："+t.currentJuNum+"/100分":4===t.totalJuNum?"分数："+t.currentJuNum+"/200分":0,cc.find("Canvas/roomMain/topLeft/currentProgress").getComponent(cc.Label).string=t;break;case"inviteBtn":var o=cc.find("Canvas/roomMain/invateIcon");"show"===t||"hide"===t?o.active="show"===t:"moveCenter"===t?o.x=0:"showCenter"===t&&(o.active=!0,o.x=0);break;case"goWixin":cc.find("Canvas/roomMain/topRight/goWiXinIcon").active="show"===t;break;case"goldCard":var s=cc.find("Canvas/playingLayer/user0/gold");"show"===t?s.active=!0:"hide"===t?s.active=!1:(s.active=!0,s.getChildByName("hua").getComponent(cc.Sprite).spriteFrame=this.mj_Atlas.getSpriteFrame(t));break;case"dismiss":cc.find("Canvas/roomMain/topRight/dismissIcon").active="show"===t;break;case"playingLayer":cc.find("Canvas/playingLayer").active="show"===t;break;case"shareFriend":cc.find("Canvas/shareFriend").active="show"===t;break;case"restCardNum":"show"===t||"hide"===t?this.restCardNum.active="show"===t:this.restCardNum.getChildByName("restNum").getComponent(cc.Label).string=t;break;case"arithmetic":var n=cc.find("Canvas/roomMain/playMethod");t=room.attr({diFeng:void 0,fanXin:void 0}),"show"===t||"hide"===t?n.active="show"===t:n.getComponent(cc.Label).string="底:"+t.diFeng+" 番:"+t.fanXin;break;case"timer":cc.find("Canvas/roomMain/timer").active="show"===t;break;case"exit":cc.find("Canvas/roomMain/topRight/leaveRoomIcon").active="show"===t;break;case"exitBtn":cc.find("Canvas/roomMain/topRight/exitIcon").active="show"===t;break;case"setting":cc.find("Canvas/roomMain/topRight/settingIcon").active="show"===t;break;case"dice":cc.find("Canvas/roomMain/timer/border").active="show"===t;break;case"offLine":case"onLine":t&&(cc.find("Canvas/reminder/word").getComponent(cc.Label).string=t),cc.find("Canvas").getComponent(cc.Animation).play(e)}}});t.exports=n,cc._RFpop()},{}],roomGlobalRes:[function(e,t,o){"use strict";cc._RFpush(t,"f3e56Pk1cZD25tAIZyJpFtH","roomGlobalRes"),cc.Class({"extends":cc.Component,
properties:{mj_Atlas:cc.SpriteAtlas,operate_Atlas:cc.SpriteAtlas,dimiss_Atlas:cc.SpriteAtlas,roomMain_Atlas:cc.SpriteAtlas,face_Atlas:cc.SpriteAtlas,single_Atlas:cc.SpriteAtlas,singleUserPref:cc.Prefab,allResultUserPref:cc.Prefab,playingLayer:cc.Node,facePref:cc.Prefab,wordPref:cc.Prefab},onLoad:function(){setGI("roomGlobalRes",this),console.log("存入全局")}}),cc._RFpop()},{}],room:[function(e,t,o){"use strict";cc._RFpush(t,"a17d9JJwypGtL/TTtERyKT5","room");var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=e("combination"),r=(e("roomDisplay"),e("dismissAlert_display")),i=e("messageAlert_display"),a=e("singleResult_display"),c=e("allResultAlert_display"),l=cc.Class({name:"Room","extends":n,properties:{roomId:0,totalJuNum:0,currentJuNum:0,totalQuan:0,currentQuan:0,usersArr:[],acitveIndex:0,userIdOrder:null,zhuang:0,goldCard:""},ctor:function(){var e=arguments[0];if(e){for(var t in e)void 0!==this[t]&&(this[t]=e[t]);this.userIdOrder={},this.currentUser=this.usersArr[0],this.combination([{name:"roomData",combineType:"data",type:"class"}])}},combineAction:function(){this.combination([{name:"animate_head",combineType:"method",type:"class"},{name:"animate_skip",combineType:"method",type:"class"},{name:"animate_countDown",combineType:"method",type:"class"},{name:"roomDisplay",combineType:"method",type:"class"}]);getGI("roomGlobalRes");this.dismissAlert=new r,this.messageAlert=new i,this.singleResult=new a,this.resultAlert=new c},reset:function(){this.reset_other()},resetMah:function(){this.reset();for(var e=0;e<4;e++)this.usersArr[e].reset()},addUser:function(e){this.usersArr.push(e),this.userIdOrder[e.attr("userId")]=e,e.attr("zhuang")&&(this.acitveIndex=e.attr("positionOrder"),this.zhuang=this.acitveIndex);var t=this.usersArr.length;4===t&&(this.usersArr.sort(function(e,t){return e.attr("positionOrder")-t.attr("positionOrder")}),setGI("joinOver",!0)),console.log(this.userArr)},removeUser:function(e){var t;if(4===this.usersArr)t=e.attr("positionOrder");else for(var o=e.attr("joinOrder"),s=0;s<this.usersArr.length;s++)if(this.usersArr[s].attr("joinOrder")===o){t=s;break}"number"==typeof t&&(this.usersArr.splice(t,1),setGI("joinOver",!1))},otherUserForEach:function(e){for(var t=1;t<4;t++)e.call(this,this.usersArr[t],t)},forEach:function(e){var t;e:for(var o=0;o<4;o++)switch(t=e.call(this,this.usersArr[o],o)){case"break":break e;case"continue":continue e}},setActiveUser:function(e){switch(this.usersArr[this.acitveIndex].attr("isActive",!1),"undefined"==typeof e?"undefined":s(e)){case"number":e<10?this.acitveIndex=e:this.acitveIndex=this.userIdOrder[e].attr("positionOrder");break;case"object":this.acitveIndex=e.attr("positionOrder");break;case"string":}return this.usersArr[this.acitveIndex].attr("isActive",!0),this.acitveIndex},getPositionOrder:function(e){switch("undefined"==typeof e?"undefined":s(e)){case"string":case"object":return e.attr("positionOrder");case"number":return e<10?e:this.userIdOrder[e].attr("positionOrder")}},getUser:function(e){switch("undefined"==typeof e?"undefined":s(e)){case"number":if(!(e<10))return this.userIdOrder[e];if(4===this.usersArr.length)return this.usersArr[e];for(var t=this.usersArr,o=0;o<t.length;o++)if(t[o].attr("positionOrder")===e)return t[o];break;case"object":return e;case"string":}},getNextActiveIndex:function(e){switch("undefined"==typeof e?"undefined":s(e)){case"string":case"object":return e.attr("positionOrder");case"number":return e<10?this.acitveIndex-1<0?3:this.acitveIndex-1:this.userIdOrder[e].attr("positionOrder");default:return this.acitveIndex-1<0?3:this.acitveIndex-1}},msgIsMeSend:function(e){return clientUser.attr("userId")===e},setZhuang:function(e){var t=this.getUser(e);this.acitveIndex=t.attr("positionOrder"),this.usersArr[this.zhuang].attr("zhuang",!1),this.zhuang=this.acitveIndex,t.attr("zhuang",!0)},convertJtoP:function(e){for(var t=0;t<this.usersArr.length;t++)if(this.usersArr[t].attr("joinOrder")===e)return this.usersArr[t].attr("positionOrder")}});t.exports=l,cc._RFpop()},{allResultAlert_display:"allResultAlert_display",combination:"combination",dismissAlert_display:"dismissAlert_display",messageAlert_display:"messageAlert_display",roomDisplay:"roomDisplay",singleResult_display:"singleResult_display"}],serverControllerMapMng:[function(e,t,o){"use strict";cc._RFpush(t,"859c5kFRxlGbJugqW2Pgrpc","serverControllerMapMng");var s=cc.Class({name:"ServerControllerMapMng",ctor:function(){var e=arguments[0];this.controllerMap=e.controllerMap,this.controllerSave={},this.controllerObjArr=[],this._init_()},resetController:function(){for(var e=this.controllerObjArr,t=0;t<e.length;t++)e[t].reset&&e[t].reset()},accessController:function(e){var t=e.type,o=this.controllerSave[t];if(!o)return void console.log("服务器没有专门处理",e);var s=o.index,n=o[t+"_controller"];s&&s.call(o,e),n&&n.call(o,e)},_init_:function(){this.className;var t=this.controllerMap;for(var o in t){this.className=e(o);var s=new this.className;s.fileName=o,this.controllerObjArr.push(s);for(var n=this.controllerMap[o],r=0;r<n.length;r++)this.controllerSave[n[r]]=s}}});t.exports=s,cc._RFpop()},{}],serverGlobal:[function(e,t,o){"use strict";cc._RFpush(t,"086868yRNVGjZY9OD0h2i7T","serverGlobal"),window.serverData={};var s=e("serverMsgConfig");window.serverControllerMap=s.controllerMap,window.serverMessageType=s.messageType;var n=e("msgsMng");window.localServer=new n,window.serverModel="rebuild",cc._RFpop()},{msgsMng:"msgsMng",serverMsgConfig:"serverMsgConfig"}],serverMsgConfig:[function(e,t,o){"use strict";cc._RFpush(t,"ce3cb+d20NJDagRMwK+M08j","serverMsgConfig");var s=e("msgConfig").messageType,n={operate_serverController:["buGang","anGang","ting","hu","mingGang","chi","pong","specialGang","specialBuGang","guo"],start_serverController:["login","start"],join_serverController:["create","join"],record_serverController:["record"],isOnline_serverController:["leaveLine","reConnect","exitRoom"]},r={};r.convert=function(e){var t={};return"success"in e?(t.e=e.errMsg,t.t=s[e.type],t.m=e.message,t.s=e.success):(t.type=s[e.t],t.message=e.m,t.openId=e.p),t},t.exports={messageType:r,controllerMap:n},cc._RFpop()},{msgConfig:"msgConfig"}],serverMsgData:[function(e,t,o){"use strict";cc._RFpush(t,"a28906wxNJE/4u/8tcM7U1C","serverMsgData");var s={sendStartMsg:function(){for(var e=[],t=0;t<4;t++){var o=[],s=window.testData.test_cardsData[t].handCards;if(0===t)for(var n=0;n<s.length;n++)o.push(s[n]);else for(var n=0;n<s.length;n++)o.push("");e.push(o)}var r=window.testData.test_users[0].userId,i=[{p:r,hua:window.testData.test_cardsData[0].hua,c:e[0],gc:"t4"},{p:window.testData.test_users[1].userId,hua:window.testData.test_cardsData[1].hua,c:e[1],gc:"t4"},{p:window.testData.test_users[2].userId,hua:window.testData.test_cardsData[2].hua,c:e[2],gc:"t4"},{p:window.testData.test_users[3].userId,hua:window.testData.test_cardsData[3].hua,c:e[3],gc:"t4"}],a=[{p:r,t:"pong",c:"t9",from:r,m:["t9","t9"]},{p:r,t:"mingGang",c:"w3",from:r,m:["w3","w3","w3"]},{p:r,t:"anGang",c:"w1",from:r,m:["w1","w1","w1","w1"]},{p:r,t:"anGang",c:"w2",from:r,m:["w2","w2","w2","w2"]},{p:r,t:"anGang",c:"w2",from:r,m:["w2","w2","w2","w2"]},{p:r,t:"chi",c:"t3",from:r,m:["t2","t4"]},{p:r,t:"chi",c:"t3",from:r,m:["t4","t5"]}];localServer.send({type:"start",message:i,errMsg:TOOL.converOperate(a)}),this.autoOutCard()},autoOutCard:function(){function e(){t++;var e=window.testData.test_users[window.serverData.currenIndex].userId;if(1===t){var s=window.testData.test_cardsData[window.serverData.currenIndex];if(0===window.serverData.currenIndex&&void 0===s.naiPaiIndex)return void(s.naiPaiIndex=0);void 0===s.naiPaiIndex&&(s.naiPaiIndex=0),o=s.naPaiCards[s.naiPaiIndex],s.naiPaiIndex++,localServer.send({type:"napai",message:{card:o,cardNum:43,who:e}})}else 2===t&&(window.serverData.currenIndex--,window.serverData.currenIndex<0&&(window.serverData.currenIndex=3),3!==window.serverData.currenIndex&&localServer.send({type:"outCard",message:{t:7,m:o,p:e}}),t=0)}window.serverData.currenIndex=0;var t=0,o="";"touches"in cc.sys.capabilities?cc.find("Canvas/roomMain/timer").on("touchend",e,this):"mouse"in cc.sys.capabilities&&cc.find("Canvas/roomMain/timer").on("mouseup",e,this)}};t.exports=s,cc._RFpop()},{}],share_controller:[function(e,t,o){"use strict";cc._RFpush(t,"9f0f1adUWZOO7R7SFuMn/Fn","share_controller");var s=cc.Class({name:"Share_controller",share_controller:function(e){if(console.log("客户端-- 执行share_controller  分享消息：",e),"produce"!==getGI("model"))return void socket.finishMsg("share");console.log("微信对象：",wx);var t=JSON.parse(e.message);console.log("收到的分享数据：",t);var o={title:"泉洲麻将",link:t.url+"/qzmj",desc:"咱泉洲人自己的麻将",imgUrl:t.url+"/img/shareIcon.png",trigger:function(e){console.log("请点击浏览器右上角的分享到朋友圈")},success:function(e){console.log("分享成功")},cancel:function(e){console.log("已取消分享")},fail:function(e){console.log("分享失败")}};setGI("shareConfig",o);var s={debug:!1,appId:t.appid,timestamp:t.timestamp,nonceStr:t.noncestr,signature:t.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage"]};wx.config(s),console.log("获得了分享的数据：",s),wx.ready(function(){wx.onMenuShareTimeline(o),wx.onMenuShareAppMessage(o),console.log("添加了分享的数据：",o)}),socket.finishMsg("share")},heart_controller:function(e){clientUser.send({type:"heart",message:e.message}),socket.finishMsg("heart")}});t.exports=s,cc._RFpop()},{}],singleResult_click:[function(e,t,o){"use strict";function s(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}cc._RFpush(t,"8d825HCdj1Pxom5//OgHVqJ","singleResult_click"),cc.Class({"extends":cc.Component,continueClick:function(e){var t;window.audio.playEffect("waterClick"),room.attr("isCanShowAllResult",!0),room.singleResult.singelResultShow("hide"),room.resetMah(),room.timeShow("hide"),room.setZhuang(room.nextZhuang),room.displayRoomInfo((t={inviteBtn:"hide",exit:"hide",goldCard:"hide",dismiss:"show",goWixin:"show",restCardNum:"hide"},s(t,"restCardNum","hide"),s(t,"exitBtn","hide"),s(t,"setting","hide"),t)),clientUser.send({message:"准备好了",type:"ready"}),clientUser.attr("isReady",!0),clientUser.displayHead("ok","show"),room.forEach(function(e){e.displayHead("score",e.attr("roomScore")),e.displayHead("zhuang",e.attr("zhuang")?"show":"hide")});for(var o=room.attr("readyArr"),n=void 0,r=0;r<o.length;r++)n=room.getUser(o[r]),n.displayHead("ok","show")},dismissClick:function(e,t){return window.audio.playEffect("waterClick"),room.attr("isCanDismiss")?(room.attr("isCanShowAllResult",!1),void room.dismissAlert.startDismiss()):void room.displayRoomInfo("onLine","只有房间中的全部成员同时在线时，才能解散房间！")}}),cc._RFpop()},{}],singleResult_display:[function(e,t,o){"use strict";cc._RFpush(t,"c7972sQZytBw48WmNEieZgy","singleResult_display");var s=cc.Class({name:"SingleResult",ctor:function(){this.singleResult=cc.find("Canvas/singleAlert"),this.mj_Atlas=getGI("roomGlobalRes").mj_Atlas,this.singleUserPref=getGI("roomGlobalRes").singleUserPref,this.single_Atlas=getGI("roomGlobalRes").single_Atlas,this.mjPosition=[],this.mjArrPosition="",this.itemNodes=[],this._getItemNodes_(),this.scores=[0,0,0,0],this.isShow=!1,this.juResults=null},isSingleAlertShow:function(){return this.isShow},singelResultShow:function(e){this.isShow="show"===e,this.singleResult.active=this.isShow},refreshMahResult:function(e){e.sort(function(e,t){return room.getPositionOrder(e.userInfo.userId)-room.getPositionOrder(t.userInfo.userId)}),this.juResults=e,this._showRoom_(),this._addHuInfo_(),this._setUserInfo_();for(var t=0;t<this.juResults.length;t++)this.scores[t]=this.juResults[t].roomScore,room.getUser(t).attr({currentScore:this.juResults[t].currentScore,roomScore:this.juResults[t].roomScore})},_addHuInfo_:function(){var e=void 0,t=void 0;this.juResults.forEach(function(o){e=o.huInfo,t=o.optMsgs,e.daoType="",e.huCard="",TOOL.converOperate(t);for(var s=0;s<t.length;s++)switch(t[s].t){case"hu":case"sanJingDao":case"ziMo":case"youJing":case"shuangYou":case"sanYou":case"tianHu":return e.daoType=t[s].t,void(e.huCard=t[s].c)}})},_getItemNodes_:function(){var e=this;this.itemNodes.length=0;for(var t=null,o=0;o<4;o++)t=cc.find("alertContent/singleBg/users/singleUser"+o,this.singleResult),t||(t=cc.instantiate(this.singleUserPref),t.name="singleUser"+o,t.parent=cc.find("alertContent/singleBg/users",this.singleResult)),this.itemNodes.push(t);var s=cc.find("mj",this.itemNodes[0]);this.mjArrPosition=s.y,Array.from(s.children).forEach(function(t){return e.mjPosition.push(t.x)})},_setUserInfo_:function(){for(var e=0;e<4;e++)this._setUserHeadInfo_(e),this._setMash_(e),this._setHua_(e),this._setTypeAndScore_(e)},_setUserHeadInfo_:function(e){var t=[this.juResults[e],this.itemNodes[e].getChildByName("userHead")],o=t[0],s=o.userInfo,n=o.huInfo,r=t[1];TOOL.setUserHeadIcon(r,s.headIcon),r.getChildByName("nickName").getComponent(cc.Label).string=s.nickName;var i=room.getUser(s.userId),a=i.attr("zhuang");r.getChildByName("zhuanIcon").active=a,r.getChildByName("cap").active=i.attr("isHost");var c=a&&n.lZCount>0;r.getChildByName("lianZhuang").active=c,c&&(r.getChildByName("lianZhuang").getComponent(cc.Label).string="连庄: "+n.lZCount)},_setHua_:function(e){var t=this,o=[this.juResults[e],this.itemNodes[e].getChildByName("hua").children],s=o[0].huaCards,n=o[1];Array.from(n).forEach(function(e,o){s[o]?(e.getComponent(cc.Sprite).spriteFrame=t.mj_Atlas.getSpriteFrame("y_"+s[o]),e.active=!0):e.active=!1})},_setMash_:function(e){var t=this,o=[this.itemNodes[e].getChildByName("mj"),this.juResults[e]],s=o[0],n=o[1],r=o[2];r=void 0===r?n:r;var i=r.handCards,a=r.optMsgs,c=o[3],l=void 0===c?s.children:c,d=o[4],h=void 0===d?0:d;this._reset_(s),h=this._setCardsShow_(l,a,h),i.forEach(function(e){t._setMj_(l[h],e),h++}),h=this._showHuCard_(l,h,e);for(var u=h;u<l.length;u++)l[u].active=!1;0!==n.huaCards.length||n.userInfo.isZhuang||""!==n.huInfo.daoType&&"dianPao"!==n.huInfo.daoType?s.y=this.mjArrPosition:s.y=s.y+15},_showHuCard_:function(e,t,o){if(!(t>16)){var s=this.juResults[o].huInfo.huCard;return s&&(this._setMj_(e[t],s),e[t].active=!0,e[t].x=e[t].x+10,t++),t}},_setCardsShow_:function(e,t,o){var s=this,n=void 0,r=0,i=0;return t.forEach(function(t,a){switch(n=t.c,r=0,t.t){case"pong":for(var c=o;c<o+3;c++)s._setMj_(e[c],n);o+=3,r++;break;case"mingGang":s._setMj_(e[o],n),o++,s._setMj_(e[o],n),s._setMj_(e[o].getChildByName("mj"),n),e[o].getChildByName("mj").active=!0,o++,s._setMj_(e[o],n),o++,r++;break;case"buGang":s._setMj_(e[o],n),o++,s._setMj_(e[o],n),s._setMj_(e[o].getChildByName("mj"),"mjB"),e[o].getChildByName("mj").active=!0,o++,s._setMj_(e[o],n),o++,r++;break;case"anGang":s._setMj_(e[o],"mjB"),o++,s._setMj_(e[o],"mjB"),s._setMj_(e[o].getChildByName("mj"),n),e[o].getChildByName("mj").active=!0,o++,s._setMj_(e[o],"mjB"),o++,r++;break;case"chi":t.m.forEach(function(t){s._setMj_(e[o],t),o++}),r++}if(i+=r,r)for(var l=3*i;l<e.length;l++)e[l].x=e[l].x+5}),o},_setMj_:function(e,t){switch(t){case"mjB":e.getComponent(cc.Sprite).spriteFrame=this.mj_Atlas.getSpriteFrame(t),e.getChildByName("hua").active=!1;break;case"mjF":e.getComponent(cc.Sprite).spriteFrame=this.mj_Atlas.getSpriteFrame(t),e.getChildByName("hua").active=!0;break;default:e.getComponent(cc.Sprite).spriteFrame=this.mj_Atlas.getSpriteFrame("mjF"),e.getChildByName("hua").getComponent(cc.Sprite).spriteFrame=this.mj_Atlas.getSpriteFrame(t),e.getChildByName("hua").active=!0}},_setTypeAndScore_:function(e){var t=this.itemNodes[e].getChildByName("right"),o=this.juResults[e].huInfo,s=o.daoType,n=!1;switch(s){case"":case"dianPao":n=!1;break;default:n=!0}t.getChildByName("dao").active=n,t.getChildByName("type").getComponent(cc.Label).string=this._getHuType_(s),t.getChildByName("type").active=n;var r=o.gangFen,i=o.jingFen,a=o.huFen,c=void 0;c=r>0?"+"+r:r,t.getChildByName("gang").getComponent(cc.Label).string="杠分: "+c,c=i>0?"+"+i:i,t.getChildByName("jing").getComponent(cc.Label).string="金分: "+c,c=a>0?"+"+a:a,t.getChildByName("all").getComponent(cc.Label).string="胡分: "+c,t.getChildByName("allScore").getComponent(cc.Label).string=this.juResults[e].currentScore},_getHuType_:function(e){var t;switch(e){case"hu":t="平到";break;case"sanJingDao":t="三金倒";break;case"ziMo":t="自摸";break;case"youJing":t="游金";break;case"shuangYou":t="双游";break;case"sanYou":t="三游";break;case"tianHu":t="天到"}return t},_reset_:function(e){for(var t=e.children,o=null,s=0;s<t.length;s++)o=t[s].getChildByName("mj"),o&&(o.active=!1),t[s].x=this.mjPosition[s],t[s].active=!0;this.isShow=!1},_showRoom_:function(){cc.find("alertContent/singleBg/roomId",this.singleResult).getComponent(cc.Label).string="房间号: "+room.roomId;var e=room.attr({diFeng:void 0,fanXin:void 0}),t="底:"+e.diFeng+" 番:"+e.fanXin;cc.find("alertContent/singleBg/method",this.singleResult).getComponent(cc.Label).string=t;var o=this.juResults[0].currentScore,s=0===o?"draw":o>0?"win":"failure";cc.find("alertContent/singleBg/win",this.singleResult).getComponent(cc.Sprite).spriteFrame=this.single_Atlas.getSpriteFrame(s)}});t.exports=s,cc._RFpop()},{}],socketLocalMng:[function(e,t,o){"use strict";cc._RFpush(t,"01c8f2VT4JO2bVjtVfrRUUa","socketLocalMng");var s=cc.Class({name:"SocketLocalMng",ctor:function(){var e=arguments[0];this.ID=e.ID,this.procotolObj=e.procotolObj,this.wsObj=null,this.sendData={t:"",m:"",p:this.ID},this.msgCache=null,this.sendDataArr=[]},finishMsg:function(e){console.log(e+"消息处理完成！"),this.msgCache.isProcessing=!1},setID:function(e){return this.ID=e,this},reset:function(){this.controllerMap.resetController()},setControllerMap:function(e){this.controllerMap=e},openLink:function(e){var t=this;return setTimeout(function(){t.onopen()},500),this},success:function(e){var t=this;return this.onopen=function(){console.log("打开成功！"),t.onmessage=function(e){console.log("客户端--收到一条消息！");var o=e;t.procotolObj.convert(o),console.log(o),t.receiveMessageFunc&&"function"==typeof t.receiveMessageFunc&&t.receiveMessageFunc.call(t,o,e)},e&&"function"==typeof e&&e.call(t),clientUser&&clientUser.combineSend(!0);for(var o=0;o<t.sendDataArr.length;o++)console.log("要发送的消息："),console.log(t.sendDataArr[o]),t.send(t.sendDataArr[o]);t.sendDataArr.length=0},this},receiveMessage:function(e){return this.receiveMessageFunc=e,this},error:function(e){var t=this;return this.onerror=function(o){console.log("连接失败！"),console.log(o),e&&"function"==typeof e&&e.call(t,o)},this},close:function(e){var t=this;return this.onclose=function(){console.log("已经关闭连接！"),clientUser&&window.room&&clientUser.displayHead&&(clientUser.attr("state",0),clientUser.displayHead("leaveLine","show"),room.dismissAlert&&(room.dismissAlert.reset(),room.dismissAlert.dismissShow("hide")),clientUser.sleep()),e&&"function"==typeof e&&e.call(t),t.wsObj=void 0},this},send:function(e){return console.log("要发送的消息："),this.sendData.t=void 0===e.type?"":this.procotolObj[e.type],this.sendData.p=e.openId||this.ID,this.sendData.m=void 0===e.message?"":e.message,console.log(this.sendData),localServer.receive(this.sendData),this}});t.exports=s,cc._RFpop()},{}],socketMng:[function(e,t,o){"use strict";cc._RFpush(t,"31322wzVLRC5ZoIL4X6uneT","socketMng");var s=cc.Class({name:"SocketMng",ctor:function(){var e=arguments[0];this.ID=e.ID,this.procotolObj=e.procotolObj,this.wsObj=null,this.sendData={t:"",m:"",p:this.ID},this.msgCache=null,this.sendDataArr=[]},finishMsg:function(e){console.log(e+"消息处理完成！"),this.msgCache.isProcessing=!1},setID:function(e){return this.ID=e,this},reset:function(){this.controllerMap.resetController()},setControllerMap:function(e){this.controllerMap=e},openLink:function(e){return this.wsObj=new WebSocket(e||""),this},success:function(e){var t=this;return this.wsObj.onopen=function(){console.log("打开成功！"),e&&"function"==typeof e&&e.call(t),clientUser&&clientUser.combineSend(!0);for(var o=0;o<t.sendDataArr.length;o++){console.log("缓存中 要发送的消息：");var s=t.sendDataArr[o];console.log(s),this.sendData.t=void 0===s.type?"":this.procotolObj[s.type],this.sendData.p=this.ID,this.sendData.m=void 0===s.message?"":s.message,window.pageLog.log("缓存中要发送的"+s.type+"消息："+JSON.stringify(s)),t.wsObj.send(JSON.stringify(this.sendData))}t.sendDataArr.length=0,t.wsObj.onmessage=function(e){var o=JSON.parse(e.data);t.procotolObj.convert(o),"heart"===o.type?console.log("收到心跳消息！"):(console.log("收到一条消息！"),console.log(o),window.pageLog.log("收到的"+o.type+"消息："+JSON.stringify(o))),t.receiveMessageFunc&&"function"==typeof t.receiveMessageFunc&&t.receiveMessageFunc.call(t,o,e)}},this},receiveMessage:function(e){return this.receiveMessageFunc=e,this},error:function(e){var t=this;return this.wsObj.onerror=function(o){console.log("连接失败！"),console.log(o),e&&"function"==typeof e&&e.call(t,o)},this},close:function(e){var t=this;return this.wsObj.onclose=function(){console.log("已经关闭连接！"),clientUser&&window.room&&clientUser.displayHead&&(clientUser.attr("state",0),clientUser.displayHead("leaveLine","show"),clientUser.sleep()),e&&"function"==typeof e&&e.call(t),t.wsObj=void 0},this},send:function(e){"heart"===e.type?console.log("发送了一条心跳消息"):console.log("要发送的消息："),this.sendData.t=void 0===e.type?"":this.procotolObj[e.type],this.sendData.p=this.ID,this.sendData.m=void 0===e.message?"":e.message,"heart"!==e.type&&(console.log(this.sendData),window.pageLog.log("要发送的"+e.type+"消息："+JSON.stringify(e)));var t=JSON.stringify(this.sendData);if(!this.wsObj){switch(console.log("send消息时，连接已关闭 ！"),this.sendDataArr.length=0,e.type){case"join":case"create":case"login":case"heart":case"record":case"leaveLine":case"reConnect":case"share":case"face":case"word":break;default:window.pageLog.log("要缓存的"+e.type+"消息："+JSON.stringify(e)),this.sendDataArr.push(e)}return"produce"===getGI("model"),this}return this.wsObj.send(t),this}});t.exports=s,cc._RFpop()},{}],start_controller:[function(e,t,o){"use strict";cc._RFpush(t,"d774bO9SLhMF5LhFTKTAJC6","start_controller");var s=(e("user"),e("msgComm")),n=cc.Class({name:"Start_controller",start_controller:function(e){console.log("客户端-- 已经收到start消息"),room.goldCard=e.message[0].gc,this._initUser_(e.message,e.e),this._initRoom_(),"produce"!==getGI("model")?this._devShowCards_(e.e):this._showCards_(e.message),this._subCards_(),socket.finishMsg("start")},_devShowCards_:function(e){room.forEach(function(e){e.mahjongMng.mahView.convertHM("hand"),e.showCards("order"),room.displayRoomInfo("goldCard",room.goldCard),e.showCards("buHua")}),clientUser.showCards("isCanOutCard"),setGI("buHuaOver",!0),e&&clientUser.showCards("showPanel")},_initUser_:function(e,t){for(var o,s,n=0;n<e.length;n++)o=room.getUser(e[n].p),o.mahjongMng||o.combineMahjong(),s=""===e[n].c[0]?e[n].c.length:e[n].c,o.setCards({handCards:s,outCards:null,outAllCards:null,mingCards:null,huaCards:e[n].h}),o.displayHead({ok:"hide"});TOOL.deleteStart(clientUser,t),clientUser.attr("operateArr",TOOL.converOperate(t))},_showCards_:function(){for(var e=getGI("roomGlobalRes").node,t=[],o=room.zhuang,s=0;s<4;s++)t.push(room.getUser(o)),o--,o=o<0?3:o;for(var n=.2,r=[],s=0;s<4;s++){var i=t[s].attr("huaCards");r[s]=i?i.length*n:0}e.runAction(cc.sequence(cc.callFunc(function(){room.forEach(function(e){e.showCards("beiMian")}),room.attr("playingPeriod","beiMian")}),cc.delayTime(1),cc.callFunc(function(){room.forEach(function(e){e.showCards("mix")}),room.attr("playingPeriod","mix")}),cc.delayTime(1),cc.callFunc(function(){room.forEach(function(e){e.showCards("order")}),room.attr("playingPeriod","order")}),cc.delayTime(1),cc.callFunc(function(){room.displayRoomInfo("goldCard",room.goldCard),room.attr("playingPeriod","gold")}),cc.callFunc(function(){t[0].showCards("buHua"),room.attr("playingPeriod","buHuaStart")}),cc.delayTime(r[0]),cc.callFunc(function(){t[1].showCards("buHua")}),cc.delayTime(r[1]),cc.callFunc(function(){t[2].showCards("buHua")}),cc.delayTime(r[2]),cc.callFunc(function(){t[3].showCards("buHua")}),cc.delayTime(r[3]),cc.callFunc(function(){clientUser.showCards("isCanOutCard"),room.attr("playingPeriod","buHuaEnd"),setGI("buHuaOver",!0),clientUser.showCards("showPanel")})))},_initRoom_:function(){room.attr("period","playing"),room.runHead(),room.displayRoomInfo({playingLayer:"show",timer:"show",juCount:{currentJuNum:room.currentJuNum,totalJuNum:room.totalQuan},restCardNum:"show"}),room.diceToggle("hide"),room.displayPointer(room.acitveIndex),room.setActiveUser(room.acitveIndex),room.attr("readyArr").length=0,room.attr("isCanShowAllResult",!1),room.attr("restCardNum",83)},_subCards_:function(){if(1===room.currentJuNum&&0===room.zhuang){var e=clientUser.attr("roomCards");switch(room.totalQuan){case 1:case 3:clientUser.attr("roomCards",e-5);break;case 2:case 4:clientUser.attr("roomCards",e-10)}}},login_controller:function(e){console.log("客户端-- 执行 login_controller...");var t=e.message;s.initHall(t),socket.finishMsg("login")}});t.exports=n,cc._RFpop()},{msgComm:"msgComm",user:"user"}],start_serverController:[function(e,t,o){"use strict";cc._RFpush(t,"933c5tIKyhI6ZUrgRL+Cq9B","start_serverController");var s=(e("rebuildMsgMng"),cc.Class({name:"Start_serverController",start_controller:function(e){console.log("服务器--已经收到start消息")},login_controller:function(e){console.log("服务器--执行 login_controller..."),localServer.send({type:"login",message:window.testData.test_users[0]})}}));t.exports=s,cc._RFpop()},{rebuildMsgMng:"rebuildMsgMng"}],test_allResultData:[function(e,t,o){"use strict";cc._RFpush(t,"7ad66PLMENAJrRFGBaXkETh","test_allResultData");var s=e("test_createUser"),n=[{optMsgs:[{p:"289383",t:"pong",c:"w2",from:"3892938",m:["w2","w2"]},{p:"289383",t:"mingGang",c:"w3",from:"3892938",m:["w3","w3","w3"]},{p:"289383",t:"anGang",c:"i2",from:"3892938",m:["i2","i2","i2"]},{p:"289383",t:"buGang",c:"o5",from:"3892938",m:["o5","o5","o5"]},{p:"289383",t:"chi",c:"t3",from:"3892938",m:["t4","t5","t3"]}],handCards:["j2"],huaCards:["h2","i1","h1","i3","h4"],userInfo:s[0],huInfo:{zhuangCount:3,paoCount:2,huCount:1,lZCount:2,gangFen:38,jingFen:14,huFen:2},currentScore:10,roomScore:-20},{optMsgs:[],handCards:["j1","w2","t8","w4","t8","w2","t8","w2","j2","w2","t8","w2","t8","w2","f1","o2"],huaCards:[],userInfo:s[1],huInfo:{zhuangCount:3,paoCount:2,huCount:1,lZCount:2,gangFen:0,jingFen:33,huFen:2},currentScore:28,roomScore:-19},{optMsgs:[{p:289383,t:"youJing",c:"w2",from:3892938,m:[]}],handCards:["j2","w2","o2","t8","w4","t8","w2","t8","w2","f3","w2","t8","w2","t8","w2","i3"],huaCards:["h3","i2","h3"],userInfo:s[2],huInfo:{zhuangCount:3,paoCount:2,huCount:1,lZCount:2,gangFen:11,jingFen:14,huFen:2},currentScore:4,roomScore:-14},{optMsgs:[],handCards:["j1","w2","t8","o2","w4","t8","w2","t8","w2","f2","w2","t8","w2","t8","w2","h1"],huaCards:["h1","h3"],userInfo:s[3],huInfo:{zhuangCount:3,paoCount:2,huCount:1,lZCount:2,gangFen:8,jingFen:2,huFen:2},currentScore:5,roomScore:-23}];t.exports=n,cc._RFpop()},{test_createUser:"test_createUser"}],test_cardsData:[function(e,t,o){"use strict";cc._RFpush(t,"09764SMcmlB6YVl7Hje43hF","test_cardsData");var s=[{optMsgs:[{p:"10000",t:"pong",c:"w2",from:"3892938",m:["w2","w2"]},{p:"10000",t:"mingGang",c:"w3",from:"3892938",m:["w3","w3","w3"]},{p:"10000",t:"anGang",c:"i2",from:"3892938",m:["i2","i2","i2"]},{p:"10000",t:"anGang",c:"t4",from:"3892938",m:["t4","t4","t4"]},{p:"10000",t:"buGang",c:"w2",from:"3892938",m:[],index:0},{p:"10000",t:"chi",c:"t3",from:"3892938",m:["t4","t5"]}],handCards:["w2","w2","w2","w2","w1","w1","w1","w1","t2","t3","t4","t5","w3","w3","w3","t9","t9"],hua:[{h:"i2",c:"i3"},{h:"i3",c:"w2"}],huaCards:["h2","i1","h1","i3","h4"],outCards:["t2","f1","w2","t7","i2","t3","w2","t1","w3","w2","w7","i1","t3","w2","w2","w7","h1","t3","w2","w7","i1","t3","w2","i1","t3","w2","w7","i1"],outAllCards:["t2","f1","w2","t7","i2","t3","w2","t1","w3","w2","w7","i1","t3","w2","w2","w7","h1","t3","w2","w7","i1","t3","w2","i1","t3","w2","w7","i1"],naPaiCards:["h1","t3","w2","w7","i1","t3","w2","i1","t3","w2","w7"]},{optMsgs:[{p:"10001",t:"pong",c:"w2",from:"3892938",m:["w2","w2"]},{p:"10001",t:"mingGang",c:"w3",from:"3892938",m:["w3","w3","w3"]},{p:"10001",t:"anGang",c:"i2",from:"3892938",m:["i2","i2","i2"]},{p:"10000",t:"buGang",c:"w2",from:"3892938",m:[],index:0}],handCards:["i1","o8","w2","o5","t8","w2","i3"],hua:[{h:"i1",c:""},{h:"i3",c:""}],huaCards:["h2","i1","h1","i3","h4"],outCards:["t7","t3","w2","w7","i1","t3"],outAllCards:["t2","f1","w2","t7","i2","t3","w2","t1","w3","w2","w7","i1","t3","w2","w2","w7","h1","t3","w2","w7","i1","t3","w2","i1","t3","w2","w7","i1"],naPaiCards:["h1","t3","w2","w7","i1","t3","w2","i1","t3","w2","w7"]},{optMsgs:[{p:"10002",t:"pong",c:"w2",from:"3892938",m:["w2","w2"]},{p:"10002",t:"mingGang",c:"w3",from:"3892938",m:["w3","w3","w3"]},{p:"10002",t:"anGang",c:"i2",from:"3892938",m:["i2","i2","i2"]},{p:"10000",t:"buGang",c:"w2",from:"3892938",m:[],index:0}],handCards:["j2","t8","i2","o5","t8","w2","t1"],hua:[{h:"i2",c:"i3"},{h:"i3",c:""}],huaCards:["h2","i1","h1","i3","h4"],outCards:["w9","t1","w2","w7","i1","t3","w2"],outAllCards:["t2","f1","w2","t7","i2","t3","w2","t1","w3","w2","w7","i1","t3","w2","w2","w7","h1","t3","w2","w7","i1","t3","w2","i1","t3","w2","w7","i1"],naPaiCards:["h1","t3","w2","w7","i1","t3","w2","i1","t3","w2","w7"]},{optMsgs:[{p:"10003",t:"pong",c:"w2",from:"3892938",m:["w2","w2"]},{p:"10003",t:"mingGang",c:"w3",from:"3892938",m:["w3","w3","w3"]},{p:"10003",t:"anGang",c:"i2",from:"3892938",m:["i2","i2","i2"]},{p:"10000",t:"buGang",c:"w2",from:"3892938",m:[],index:0}],handCards:["i2","i3","w2","o5","t8","w2","t1"],hua:[{h:"i2",c:""},{h:"i3",c:""}],huaCards:["h2","i1","h1","i3","h4"],outCards:["f3","t2","w6","w7","i1","t3","w2","h1","o5","w2","w7","i1","t3","w2","w2","w7"],outAllCards:["t2","f1","w2","t7","i2","t3","w2","t1","w3","w2","w7","i1","t3","w2","w2","w7","h1","t3","w2","w7","i1","t3","w2","i1","t3","w2","w7","i1"],naPaiCards:["h1","t3","w2","w7","i1","t3","w2","i1","t3","w2","w7"]}];t.exports=s,cc._RFpop()},{}],test_createRoom:[function(e,t,o){"use strict";cc._RFpush(t,"42828Gs5b9JSbWlB0sz82dW","test_createRoom");cc._RFpop()},{}],test_createUser:[function(e,t,o){"use strict";function s(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}cc._RFpush(t,"a4209B16D5B66evbC9GWCEh","test_createUser");var n,r=[(n={cards:1e3,faceIcon:"5350b36d56b6e054.jpg",nickName:"玩家10101",openId:"10101",userId:10101,isVip:!0,sex:1,ip:"192.168.75.1"},s(n,"isVip",!0),s(n,"state",1),s(n,"ready",!0),s(n,"isHost",!1),n),{cards:1001,faceIcon:"5350b36d56b6e054.jpg",nickName:"玩家10102",openId:"10102",userId:10102,isVip:!0,sex:1,ip:"192.168.75.1",roomId:"",state:1,ready:!0,isHost:!1},{cards:1002,faceIcon:"5350b36d56b6e054.jpg",nickName:"玩家10103",openId:"10103",userId:10103,isVip:!0,sex:1,ip:"192.168.0.102",roomId:"",state:1,ready:!0,isHost:!0},{cards:3003,faceIcon:"5350b36d56b6e054.jpg",nickName:"玩家10104",openId:"10004",userId:10004,isVip:!0,sex:1,ip:"192.168.0.106",roomId:"",state:1,ready:!0,isHost:!1}];t.exports=r,cc._RFpop()},{}],test_data:[function(e,t,o){"use strict";cc._RFpush(t,"0c2ceb9daRLE4VZygl0he/E","test_data");var s={test_cardsData:e("test_cardsData"),test_users:e("test_createUser"),test_allResultData:e("test_allResultData"),test_singleResultData:e("test_singleResultData")};t.exports=s,cc._RFpop()},{test_allResultData:"test_allResultData",test_cardsData:"test_cardsData",test_createUser:"test_createUser",test_singleResultData:"test_singleResultData"}],test_singleResultData:[function(e,t,o){"use strict";cc._RFpush(t,"dea51bzo/FFl6hzNgrDcUub","test_singleResultData");var s=e("test_createUser"),n=[{optMsgs:[{p:"289383",t:"pong",c:"w2",from:"3892938",m:["w2","w2"]},{p:"289383",t:"mingGang",c:"w3",from:"3892938",m:["w3","w3","w3"]},{p:"289383",t:"anGang",c:"i2",from:"3892938",m:["i2","i2","i2"]},{p:"289383",t:"buGang",c:"o5",from:"3892938",m:["o5","o5","o5"]},{p:"289383",t:"chi",c:"t3",from:"3892938",m:["t4","t5","t3"]}],handCards:["j2"],huaCards:["h2","i1","h1","i3","h4"],userInfo:s[0],huInfo:{zhuangCount:3,paoCount:2,huCount:1,lZCount:2,gangFen:38,jingFen:14},currentScore:10,roomScore:-20},{optMsgs:[],handCards:["j1","w2","t8","w4","t8","w2","t8","w2","j2","w2","t8","w2","t8","w2","f1","o2"],
huaCards:[],userInfo:s[1],huInfo:{zhuangCount:3,paoCount:2,huCount:1,lZCount:2,gangFen:0,jingFen:33},currentScore:28,roomScore:-19},{optMsgs:[{p:289383,t:"youJing",c:"w2",from:3892938,m:[]}],handCards:["j2","w2","o2","t8","w4","t8","w2","t8","w2","f3","w2","t8","w2","t8","w2","i3"],huaCards:["h3","i2","h3"],userInfo:s[2],huInfo:{zhuangCount:3,paoCount:2,huCount:1,lZCount:2,gangFen:11,jingFen:14},currentScore:4,roomScore:-14},{optMsgs:[],handCards:["j1","w2","t8","o2","w4","t8","w2","t8","w2","f2","w2","t8","w2","t8","w2","h1"],huaCards:["h1","h3"],userInfo:s[3],huInfo:{zhuangCount:3,paoCount:2,huCount:1,lZCount:2,gangFen:8,jingFen:2},currentScore:5,roomScore:-23}];t.exports=n,cc._RFpop()},{test_createUser:"test_createUser"}],tools:[function(e,t,o){"use strict";cc._RFpush(t,"af0c8X9T4NH5Z4x6IBi8c8h","tools");var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=e("socketMng"),r=e("controllerMapMng"),i=e("msgCache"),a={data:{},resetData:function(){},copyArray:function(e,t){for(var o=0;o<t.length;o++)e.push(t[o])},getNoZeroArr:function(e){var t=[];return e.forEach(function(o,s){0!==o&&(t.push(o),void 0!==e[s]?t["index"+(t.length-1)]=e[s]:t["index"+(t.length-1)]=s)}),t},getSplitAll:function(e){var t=[],o=null,s=!1;return e.forEach(function(e,n){0!==e?(s||(s=!0,o=[],t.push(o)),o.push(e),o["index"+(o.length-1)]=n):s=!1}),t},trimFrontZero:function(e){for(var t=-1;0===e[0];)e.shift(),t++;if(t>-1&&void 0!==e.index0)for(var o=0;o<e.length;o++)e["index"+o]=e["index"+t]},isZeroArr:function(e){for(var t=0;t<e.length;t++)if(0!==e[t])return!1;return!0},copyArr:function(e,t){for(var o=0;o<e.length;o++)t[o]=e[o];t.length=e.length},convertParamToObj:function(e){for(var t={},o=e.split("&"),s=0;s<o.length;s++){var n=o[s].split("=");t[n[0]]=n[1]}return t},convertObjToParam:function(e){var t=[];for(var o in e)t.push(o+"="+e[o]);return t.join("&")},setUserHeadIcon:function(e,t){var o;switch(t){case"default":o="noHead";break;default:if("produce"!==getGI("model"))o="noHead";else{var s=t;cc.loader.load(s,function(t,o){var s=new cc.SpriteFrame(o);e.getComponent(cc.Sprite).spriteFrame=s,e.width=65,e.height=65})}}if(o){var n=getGI("roomGlobalRes"),r=n&&n.roomMain_Atlas;r&&(e.getComponent(cc.Sprite).spriteFrame=r.getSpriteFrame(o))}},replaceShareUrl:function(e){if("produce"===getGI("model")){var t=getGI("shareConfig");if(!t)return void(this.timer1=setTimeout(function(){a.replaceShareUrl(e)},500));clearTimeout(this.timer1);var o="咱泉洲人自己的麻将 ";if("wx"===e)t.link=t.link.replace(/\?roomId=\d{6}/,""),t.title="【"+clientUser.attr("nickName")+"】邀请你一起来玩 【泉洲麻将】",t.desc=o;else if("number"==typeof e||"string"==typeof e)t.link=t.link.replace(/\?roomId=\d{6}/,""),t.link=t.link+"?roomId="+e,t.title="【"+clientUser.attr("nickName")+"】邀请你加入房间："+room.roomId+" - 【泉洲麻将】",t.desc=o+this._getArithmeticStr_();else if("object"===("undefined"==typeof e?"undefined":s(e))){e.sort(function(e,t){return t.score-e.score});var n="",r="大赢家-",i=e[0].score;i=i>0?"+"+i:i;for(var c=0;c<e.length;c++){var l=e[c];l.score=l.score>0?"+"+l.score:l.score,l.score===i?r+=l.name+":"+i+"分 ":n+=l.name+":"+l.score+"分 "}t.title=r,t.desc=n+this._getArithmeticStr_(),t.link=t.link.replace(/\?roomId=\d{6}/,"")}else t.title="【"+clientUser.attr("nickName")+"】邀请你一起来玩 【泉洲麻将】",t.desc=o}},_getArithmeticStr_:function(){var e=room.attr({ju:void 0,diFeng:void 0,fanXin:void 0});return"房间："+e.ju+" 底:"+e.diFeng+" 限制:"+e.fanXin},createSocket:function(t,o){var s=getGI("socketURL");"localhost"===s&&(n=e("socketLocalMng")),"reLink"===o&&window.socket||(window.socket=new n({ID:0,procotolObj:window.messageType}),window.socket.setControllerMap(new r({controllerMap:window.controllerMap})),window.msgCache=new i(window.socket.controllerMap),window.socket.msgCache=window.msgCache),window.socket.openLink(s).success(function(){this.send(t)}).receiveMessage(function(e,t){this.msgCache.pushMsg(e)}).error(function(){getGI("hall").errorReminder("连接服务器失败!")}).close(function(){room})},converOperate:function(e){if(e){if(void 0===e.length)e.t=window.messageType[e.t];else for(var t=0;t<e.length;t++)e[t].t=window.messageType[e[t].t];return e}},backHall:function(){window.reset(),getGI("hall").display({nickName:clientUser.attr("nickName"),userId:clientUser.attr("userId"),headIcon:clientUser.attr("faceIcon"),roomCardNum:clientUser.attr("roomCards"),isVip:clientUser.attr("isVip")})},deleteStart:function(e,t){if(t&&t.length>0)for(var o=0;o<t.length;o++){switch(t[o].t){case 23:case 24:case 25:var s=t.splice(o,1)[0];e.attr("youJingCards",s.m),e.attr("youJingCards").type=window.messageType[s.t],console.log(e.attr("youJingCards"))}}else e.attr("youJingCards",null)}};t.exports=a,cc._RFpop()},{controllerMapMng:"controllerMapMng",msgCache:"msgCache",socketLocalMng:"socketLocalMng",socketMng:"socketMng"}],userBase:[function(e,t,o){"use strict";cc._RFpush(t,"d7df1ntA/JALYuP2zBOvFXb","userBase");var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=e("combination"),r=e("mahjongMng"),i=cc.Class({name:"UserBase","extends":n,ctor:function(){var e=arguments[0],t=e?e.attr:void 0;this.combination([{name:"userInfo",combineType:"data",type:"class",config:t},{name:"userState",combineType:"data",type:"class",config:t}]),this.mahjongMng=null},reset:function(){console.log("执行了userBase.reset方法"),this.reset_other(),this.mahjongMng&&this.mahjongMng.reset()},resetJu:function(){this.mahjongMng=null,this.remove(["userResource","userHeadShow","userMsgShow"])},sleep:function(){this.mahjongMng&&(this.attr("isCanPlay",this.mahjongMng.mahView.outCardEventAttr("isCanPlay")),this.mahjongMng.mahView.outCardEventAttr("isCanPlay",!1)),this.attr("isCanOperateClick",!1),console.log("sleep...")},setAttr:function(e,t){switch(e){case"isCanPlay":return void 0!=t?(this.attr("isCanPlay",t),this.mahjongMng.mahView.outCardEventAttr("isCanPlay",t)):this.mahjongMng.mahView.outCardEventAttr("isCanPlay");case"isCanOperateClick":return void 0!=t?this.attr("isCanOperateClick",t):this.attr("isCanOperateClick");case"isCanOperate":return void 0!=t?this.mahjongMng.mahView.outCardEventAttr("isCanOperate",t):this.mahjongMng.mahView.outCardEventAttr("isCanOperate")}},wake:function(){this.mahjongMng&&this.mahjongMng.mahView.outCardEventAttr("isCanPlay",this.attr("isCanPlay")),this.attr("isCanOperateClick",!0),console.log("wake...")},inCard:function(e,t,o){console.log("执行了userBase.inCard"+e+","+t),this.mahjongMng.inCard(e,o),room.displayRoomInfo("restCardNum",t)},outCard:function(e){this.mahjongMng.outCard(e,function(){}),this.attr("isClient")&&clientUser.attr("chooseIten",null),window.audio.playMj(this.attr("whoseVoice")+"_"+e),this.attr("firstOutCard")||this.attr("firstOutCard",e)},showPanel:function(e){this.mahjongMng.showPanel(e)},setCards:function(e){this.mahjongMng.setCards.apply(this.mahjongMng,arguments),this.attr("originalCards",e.handCards),this.attr("haveCard","object"===s(e.handCards))},showCards:function(){this.mahjongMng.showCards.apply(this.mahjongMng,arguments)},startBuHua:function(){this.mahjongMng.startBuHua.apply(this.mahjongMng,arguments)},combineSend:function(e){this.attr("isHasCombined")||e||(this.sendMessageMng=socket.setID(this.attr("userId")),this.send=function(e){return this.sendMessageMng.send(e),this})},combineAction:function(){console.log("执行了 userBase - combineAction。。"),console.log("结合了combineAction"),this.combination([{name:"userResource",combineType:"data",type:"class",config:{userSelf:this}},{name:"userHeadShow",combineType:"method",type:"class",config:{userSelf:this}}]),this.combination([{name:"userMsgShow",combineType:"method",type:"class",config:this.attr("userHeadNode")}])},combineMahjong:function(e){console.log("执行了 userBase - combineMahjong。。"),this.attr("isHasCombined",!0),this.mahjongMng=new r({userSelf:this}),e&&this.mahjongMng.displayAllMing(e)}});t.exports=i,cc._RFpop()},{combination:"combination",mahjongMng:"mahjongMng"}],userHeadShow:[function(e,t,o){"use strict";cc._RFpush(t,"24f412GFEdPGrklf5Cza0uu","userHeadShow");var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=cc.Class({name:"UserHeadShow",ctor:function(){var e=arguments[0];this.userNode=e.userSelf.attr("userHeadNode"),this.mainGame_Atlas=getGI("roomGlobalRes").mainGame_Atlas,this.operate_Atlas=getGI("roomGlobalRes").operate_Atlas},reset:function(){console.log("userHeadShow.js重置了。"),this.userNode.getChildByName("youJing").active=!1,this.userNode.getChildByName("readyStr").active=!1},displayHead:function(e,t){if("object"===("undefined"==typeof e?"undefined":s(e)))for(var o in e)this._setOneAttrDisplay_(o,e[o]);else this._setOneAttrDisplay_(e,t)},_setOneAttrDisplay_:function(e,t){switch(e){case"zhuang":cc.find("zhuanIcon",this.userNode).active="show"===t;break;case"faceIcon":TOOL.setUserHeadIcon(this.userNode.getChildByName("userHeadIcon"),t);break;case"nickName":var o=this.userNode.getChildByName("nickBorder");this._setNick_(o,"nickName",t);break;case"isHost":cc.find("cap",this.userNode).active="show"===t;break;case"score":var o=this.userNode.getChildByName("nickBorder");this._setNick_(o,"score",t);break;case"ok":this.userNode.getChildByName("readyStr").active="show"===t;break;case"youJing":var s=this.userNode.getChildByName("youJing");"show"===t?s.active=!0:"hide"===t?s.active=!1:(s.active=!0,s.getComponent(cc.Sprite).spriteFrame=this.operate_Atlas.getSpriteFrame(t));break;case"leaveLine":cc.find("leaveLine",this.userNode).active="show"===t}},_setNick_:function(e,t,o){"show"===o?e.active=!0:"hide"===o?e.active=!1:(e.active=!0,e.getChildByName(t).getComponent(cc.Label).string=(o>0?"+":"")+o)}});t.exports=n,cc._RFpop()},{}],userInfoAlert:[function(e,t,o){"use strict";cc._RFpush(t,"8b60aufZVBCT5nAfF7z1/80","userInfoAlert");var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};cc.Class({"extends":cc.Component,properties:{atlas:cc.SpriteAtlas},onLoad:function(){this.headNode=null},node_showUserInfoAlertClick:function(e,t){if(window.audio.playEffect("waterClick"),"show"===t){var o=room.getUser(parseInt(e.target.parent.name.slice(-1)));if(!o)return;var s=o.attr({nickName:void 0,userId:void 0,ip:void 0,roomCards:void 0,faceIcon:void 0});this.headNode=cc.find("alertContent/userInfoAlertBg/noHeade",this.node),this.setserInfoAlertData(s)}this.isShow="show"===t,this.node.active=this.isShow},setserInfoAlertData:function(e,t){if("object"===("undefined"==typeof e?"undefined":s(e))){var o=e;for(var n in o)this._showOne_(n,o[n])}else this._showOne_(e,t)},_showOne_:function(e,t){switch(e){case"faceIcon":return void TOOL.setUserHeadIcon(cc.find("alertContent/userInfoAlertBg/headIcon",this.node),t);case"nickName":cc.find("alertContent/userInfoAlertBg/nickName",this.node).getComponent(cc.Label).string=t;break;case"roomCards":cc.find("alertContent/userInfoAlertBg/diamond",this.node).getComponent(cc.Label).string="钻石: "+t+"颗";break;case"userId":cc.find("alertContent/userInfoAlertBg/ID",this.node).getComponent(cc.Label).string="ID:"+t;break;case"ip":cc.find("alertContent/userInfoAlertBg/IP",this.node).getComponent(cc.Label).string="IP:"+t}}}),cc._RFpop()},{}],userInfo:[function(e,t,o){"use strict";cc._RFpush(t,"7e4d6/RI+pFALcCTKAD0LfB","userInfo");var s=cc.Class({name:"UserInfo",ctor:function(){var e=arguments[0];if(this.faceIcon="",this.nickName="",this.openId="",this.userId=0,this.roomCards=0,this.ip="",this.isVip=!1,this.isHost=!1,this.joinOrder=0,this.positionOrder=0,this.sex="man",this.whoseVoice="g",this.state=0,this.haveCard=!1,this.isClient=!1,this.isActive=!1,this.isHasCombined=!1,e)for(var t in e)void 0!==this[t]&&(this[t]=e[t])},reset:function(){console.log("userInfo.js重置了。。"),this.isActive=!1}});t.exports=s,cc._RFpop()},{}],userMsgShow:[function(e,t,o){"use strict";cc._RFpush(t,"f0ca9gTDWZIdKAswuFMEQYY","userMsgShow");var s=cc.Class({name:"UserMsgShow",ctor:function(){var e=arguments[0];this.userNode=e,this.roomComponent=getGI("roomGlobalRes"),this.face_Atlas=this.roomComponent.face_Atlas,this.msgShowTime=3,this._finishedBind_=null},test_setUser:function(e){this.userNode=e},say:function(e){"show"===e?this._setMsgState_("show"):"hide"===e?this._setMsgState_("hide"):"face"===e.type?this._showFace_(e.value):"word"===e.type&&this._showMsg_(e.value,e.whoseVoice)},_setMsgState_:function(e,t){var o=!1,s=!1;"faceAlert"===e?(o=t,s=!t):"msgAlert"===e?(s=t,o=!t):"show"===e&&(o=s=!0),this.userNode.getChildByName("faceAlert").active=o,this.userNode.getChildByName("msgAlert").active=s},_showFace_:function(e){this.roomComponent.unschedule(this._finishedBind_),this._finishedBind_=this._finished_.bind(this),this.roomComponent.scheduleOnce(this._finishedBind_,this.msgShowTime),this._setMsgState_("faceAlert",!0);var t=cc.find("faceAlert/FE",this.userNode);t.getComponent(cc.Sprite).spriteFrame=this.face_Atlas.getSpriteFrame(e)},_finished_:function(){this._setMsgState_("hide")},_showMsg_:function(e,t){this.roomComponent.unschedule(this._finishedBind_),this._finishedBind_=this._finished_.bind(this),this.roomComponent.scheduleOnce(this._finishedBind_,this.msgShowTime),this._setMsgState_("msgAlert",!0);var o=cc.find("msgAlert/word",this.userNode);o.getComponent(cc.Label).string=window.words.data[e],window.audio.chat(t+"_"+e)}});t.exports=s,cc._RFpop()},{}],userResource:[function(e,t,o){"use strict";cc._RFpush(t,"8fb7fyqtPlJYak9O0nvKVqK","userResource");var s=cc.Class({name:"UserResource",ctor:function(){var e=arguments[0],t=e.userSelf.attr("positionOrder"),o=getGI("roomGlobalRes");if(this.playingLayer=o.playingLayer,this.userNode=this.playingLayer.getChildByName("user"+t),this.showNode=this.userNode.getChildByName("show"),this.handNode=this.userNode.getChildByName("hand"),this.userHeadNode=cc.find("Canvas/roomMain/user"+t),e)for(var s in e)void 0!==this[s]&&(this[s]=e[s])}});t.exports=s,cc._RFpop()},{}],userStateBase:[function(e,t,o){"use strict";cc._RFpush(t,"edfb99wD4ZMo5Us+a7Y9lok","userStateBase");var s=cc.Class({name:"UserStateBase",ctor:function(){var e=arguments[0];if(this.zhuang=!1,this.ting=!1,this.originalCards=null,this.currentScore=0,this.roomScore=0,this.isReady=!1,e)for(var t in e)void 0!==this[t]&&(this[t]=e[t])},reset:function(){console.log("userStateBase.js重置了。。"),this.zhuang=!1,this.ting=!1,this.originalCards=null,this.isReady=!1}});t.exports=s,cc._RFpop()},{}],userState:[function(e,t,o){"use strict";cc._RFpush(t,"f74f3LBPN9CnJ2/r7iMp6LG","userState");var s=e("userStateBase"),n=cc.Class({name:"UserState","extends":s,ctor:function(){var e=arguments[0];if(this.cardsHandOrder={},this.firstOutCard="",this.finishCheckClick=!0,this.huInfoArr=[],this.naPaiInfo={cardName:""},this.youJingCards=null,this.huaCards=null,this.processPeriod="init",this.operateArr=null,this.chooseIten=null,this.isCanPlay=!1,this.isCanOperateClick=!0,e)for(var t in e)void 0!==this[t]&&(this[t]=e[t])},reset:function(){console.log("userState.js重置了。。"),this._super(),this.firstOutCard="",this.finishCheckClick=!0,this.huInfoArr.length=0,this.operateArr=null,this.chooseIten=null,this.isCanPlay=!1,this.isCanOperateClick=!0,this.naPaiInfo={cardName:""}}});t.exports=n,cc._RFpop()},{userStateBase:"userStateBase"}],user:[function(e,t,o){"use strict";cc._RFpush(t,"0dbeag/FOpClK1qaAd40OYK","user");var s=e("userBase"),n=cc.Class({name:"User","extends":s,ctor:function(){},juEnd:function(e){console.log("发送了一局结束的消息"),room.displayPointer(-1),this.send({type:"juScore"})},operateItem:function(e){this._choose_(e),this.mahjongMng.operateItem(e)},_choose_:function(e){var t=e.t;switch(t){case"buHua":break;case"pong":window.audio.playMj(this.attr("whoseVoice")+"_pong"),room.getUser(e.from).backOutCard();break;case"chi":window.audio.playMj(this.attr("whoseVoice")+"_chi"),room.getUser(e.from).backOutCard();break;case"mingGang":room.getUser(e.from).backOutCard(),window.audio.playMj(this.attr("whoseVoice")+"_gang");break;case"anGang":this.attr("haveCard")&&(this.send({type:e.t,message:TOOL.converOperate(e)}),TOOL.converOperate(e)),window.audio.playMj(this.attr("whoseVoice")+"_gang");break;case"youJing":case"shuangYou":case"sanYou":case"sanJingDao":window.audio.playMj(this.attr("whoseVoice")+"_hu"),console.log("user.js- "+t);break;case"buGang":window.audio.playMj(this.attr("whoseVoice")+"_gang");break;case"hu":window.audio.playMj(this.attr("whoseVoice")+"_hu")}},backOutCard:function(){var e=this.mahjongMng.mahView.operateOutCard("backward");"chiangBuGang"!==e&&(e.active=!1,room.finishOutSkipAni())}});t.exports=n,cc._RFpop()},{userBase:"userBase"}]},{},["audioMng","combination","mahjongMng","mahjongMngBase","buGangCheck_controller","dismiss_controller","error_controller","isOnline_controller","join_controller","juEnd_controller","msgSend_controller","napai_controller","operate_controller","outCard_controller","rebuild_controller","rebuild_msg_controller","record_controller","share_controller","start_controller","msgComm","msgStartRun","user","userBase","dialogWords","global","globalData","helpText","conditions","controllerMapMng","msgCache","msgConfig","socketLocalMng","socketMng","pageLog","test_allResultData","test_cardsData","test_createRoom","test_createUser","test_data","test_singleResultData","tools","_node_hall_click","inputNumPanel","node_hall_broadcast","node_hall_display","node_helpAlert","node_recordAlert","node_settingAlert","_node_login","handCards","handCardsBase","operateCards","outCards","calcHuMng","cardsHu_other","cardsHu_pair","cardsMng","cardsAll","handCardsChild","operateCards_operate","outCards_operate","room","roomData","userInfo","userResource","userState","userStateBase","allResultAlert_click","allResultAlert_display","dismissAlert_click","dismissAlert_display","messageAlert_click","messageAlert_display","singleResult_click","singleResult_display","userInfoAlert","_node_operatePanelEvent","hand_outCardEvent","_node_room_click","animate_countDown","animate_head","animate_skip","roomDisplay","roomGlobalRes","animate_outCard","handCardMng","hand_operatePanel","mingCardMng","outCardMng","userHeadShow","userMsgShow","msgs","msgsMng","rebuildMsgMng","serverControllerMapMng","calc","isOnline_serverController","join_serverController","operate_serverController","record_serverController","start_serverController","serverGlobal","serverMsgConfig","serverMsgData"]);